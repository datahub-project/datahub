# SPDX-License-Identifier: Apache-2.0
#
# This file is unmodified from its original version developed by Acryl Data, Inc.,
# and is now included as part of a repository maintained by the National Digital Twin Programme.
# All support, maintenance and further development of this code is now the responsibility
# of the National Digital Twin Programme.

extend type Mutation {
  patchEntity(input: PatchEntityInput!): PatchEntityResult!
  patchEntities(input: [PatchEntityInput!]!): [PatchEntityResult!]!
}

input PatchEntityInput {
  urn: String
  entityType: String
  aspectName: String!
  patch: [PatchOperationInput!]!
  arrayPrimaryKeys: [ArrayPrimaryKeyInput!]
  forceGenericPatch: Boolean
  systemMetadata: SystemMetadataInput
  headers: [StringMapEntryInput!]
}

input PatchOperationInput {
  op: PatchOperationType!
  path: String!
  value: String
  from: String
}

enum PatchOperationType {
  ADD
  REMOVE
  REPLACE
  MOVE
  COPY
  TEST
}

input SystemMetadataInput {
  lastObserved: Long
  runId: String
  properties: [StringMapEntryInput!]
}

input ArrayPrimaryKeyInput {
  arrayField: String!
  keys: [String!]!
}

type PatchEntityResult {
  urn: String!
  name: String
  success: Boolean!
  error: String
}
