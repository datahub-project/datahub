# SPDX-License-Identifier: Apache-2.0
#
# This file is unmodified from its original version developed by Acryl Data, Inc.,
# and is now included as part of a repository maintained by the National Digital Twin Programme.
# All support, maintenance and further development of this code is now the responsibility
# of the National Digital Twin Programme.

query isAnalyticsEnabled {
    isAnalyticsEnabled
}

query getAnalyticsCharts {
    getAnalyticsCharts {
        groupId
        title
        charts {
            ...analyticsChart
        }
    }
}

query getMetadataAnalyticsCharts($input: MetadataAnalyticsInput!) {
    getMetadataAnalyticsCharts(input: $input) {
        groupId
        title
        charts {
            ...analyticsChart
        }
    }
}

fragment analyticsChart on AnalyticsChart {
    ... on TimeSeriesChart {
        title
        lines {
            name
            data {
                x
                y
            }
        }
        dateRange {
            start
            end
        }
        interval
    }
    ... on BarChart {
        title
        bars {
            name
            segments {
                label
                value
            }
        }
    }
    ... on TableChart {
        title
        columns
        rows {
            values
            cells {
                value
                linkParams {
                    searchParams {
                        types
                        query
                        filters {
                            field
                            values
                        }
                    }
                    entityProfileParams {
                        urn
                        type
                    }
                }
            }
        }
    }
}
