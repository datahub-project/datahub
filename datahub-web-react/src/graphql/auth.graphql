query getAccessToken($input: GetAccessTokenInput!) {
    getAccessToken(input: $input) {
        accessToken
    }
}

query listAccessTokens($input: ListAccessTokenInput!) {
    listAccessTokens(input: $input) {
        start
        count
        total
        tokens {
            urn
            id
            name
            description
            actorUrn
            ownerUrn
            owner {
                urn
                type
                username
                properties {
                    displayName
                    firstName
                    lastName
                    fullName
                    email
                }
                editableProperties {
                    displayName
                    pictureLink
                }
            }
            createdAt
            expiresAt
        }
    }
}

mutation createAccessToken($input: CreateAccessTokenInput!) {
    createAccessToken(input: $input) {
        accessToken
    }
}

mutation revokeAccessToken($tokenId: String!) {
    revokeAccessToken(tokenId: $tokenId)
}

query listServiceAccounts($input: ListServiceAccountsInput!) {
    listServiceAccounts(input: $input) {
        start
        count
        total
        serviceAccounts {
            urn
            type
            name
            displayName
            description
            createdBy
            createdAt
            updatedAt
            roles: relationships(input: { types: ["IsMemberOfRole"], direction: OUTGOING, start: 0, count: 1 }) {
                start
                count
                total
                relationships {
                    entity {
                        ... on DataHubRole {
                            urn
                            type
                            name
                        }
                    }
                }
            }
        }
    }
}

query getServiceAccount($urn: String!) {
    getServiceAccount(urn: $urn) {
        urn
        type
        name
        displayName
        description
        createdBy
        createdAt
        updatedAt
    }
}

mutation createServiceAccount($input: CreateServiceAccountInput!) {
    createServiceAccount(input: $input) {
        urn
        type
        name
        displayName
        description
        createdBy
        createdAt
    }
}

mutation deleteServiceAccount($urn: String!) {
    deleteServiceAccount(urn: $urn)
}
