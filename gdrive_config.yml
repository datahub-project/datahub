# Alternative configuration using DataHub's native secrets management
source:
  type: gdrive
  config:
    # Use GOOGLE_APPLICATION_CREDENTIALS environment variable
    # This reads from the environment variable for better security
    credentials_json: "${GOOGLE_CREDENTIALS_JSON}"  # DataHub secret
    
    # Optional: Start scanning from a specific folder ID
    root_folder_id: null  # Set to null to scan entire My Drive
    
    # File filtering by filename (regex patterns)
    include_files:
      allow:
        - ".*"                        # Include all files by default
      deny:
        - ".*\\.tmp$"                 # Skip temporary files
        - ".*\\.cache$"               # Skip cache files
        
    # MIME type filtering - specify which file types to include/exclude
    include_mime_types:
      allow:
        # Google Workspace files
        - "application/vnd.google-apps.spreadsheet"      # Google Sheets
        - "application/vnd.google-apps.document"         # Google Docs
        - "application/vnd.google-apps.presentation"     # Google Slides
        
        # Microsoft Office files
        - "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"           # Excel (.xlsx)
        - "application/vnd.openxmlformats-officedocument.wordprocessingml.document"     # Word (.docx)
        - "application/vnd.openxmlformats-officedocument.presentationml.presentation"   # PowerPoint (.pptx)
        
        # Common data files
        - "text/csv"                                      # CSV files
        - "application/json"                              # JSON files
        - "text/plain"                                    # Text files
        - "application/pdf"                               # PDF files
        
      deny:
        # Exclude system/binary files
        - "application/vnd.google-apps.folder"           # Folders (handled separately)
        - "application/octet-stream"                      # Unknown binary files
        - "image/.*"                                      # All image files
        - "video/.*"                                      # All video files
        - "audio/.*"                                      # All audio files
        
    # File size limit (in MB) - skip files larger than this
    max_file_size_mb: 100
    
    # Maximum folder depth to scan
    max_recursion_depth: 10

# DataHub sink configuration
sink:
  type: datahub-rest
  config:
    server: 'http://localhost:8080'
    # If you have authentication enabled on DataHub
    # token: "${DATAHUB_ACCESS_TOKEN}"

# DataHub Secret Setup Instructions:
# 1. Go to DataHub UI -> Settings -> Secrets
# 2. Create a new secret named "GOOGLE_CREDENTIALS_JSON"
# 3. Paste the entire service account JSON content:
#    {
#      "type": "service_account",
#      "project_id": "your-project-id",
#      "private_key_id": "key-id",
#      "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
#      "client_email": "service-account@project.iam.gserviceaccount.com",
#      "client_id": "123456789",
#      "auth_uri": "https://accounts.google.com/o/oauth2/auth",
#      "token_uri": "https://oauth2.googleapis.com/token",
#      "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
#      "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/service-account%40project.iam.gserviceaccount.com"
#    }