<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-docs/advanced/monitoring" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Monitoring DataHub | DataHub</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.datahub.com/docs/advanced/monitoring"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Monitoring DataHub | DataHub"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.datahub.com/docs/advanced/monitoring"><link data-rh="true" rel="alternate" href="https://docs.datahub.com/docs/advanced/monitoring" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.datahub.com/docs/advanced/monitoring" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RK0UG797F3-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/learn/rss.xml" title="DataHub RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/learn/atom.xml" title="DataHub Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PKGVLETT4C"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-PKGVLETT4C",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-5M8T9HNN",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="DataHub" href="/opensearch.xml">




<meta httpequiv="Content-Security-Policy" content="frame-ancestors &#39;self&#39; https://*.acryl.io https://acryldata.io http://localhost:*">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700&display=swap">
<script src="https://tools.luckyorange.com/core/lo.js?site-id=28ea8a38" async defer="defer"></script>
<script src="/scripts/rb2b.js" async defer="defer"></script>
<script src="https://app.revenuehero.io/scheduler.min.js"></script>
<script src="https://tag.clearbitscripts.com/v1/pk_2e321cabe30432a5c44c0424781aa35f/tags.js" referrerpolicy="strict-origin-when-cross-origin"></script>
<script src="/scripts/reo.js"></script>
<script id="runllm-widget-script" type="module" src="https://widget.runllm.com" crossorigin="true" runllm-name="DataHub" runllm-assistant-id="81" runllm-position="BOTTOM_RIGHT" runllm-keyboard-shortcut="Mod+j" runllm-preset="docusaurus" runllm-theme-color="#1890FF" runllm-brand-logo="https://docs.datahub.com/img/datahub-logo-color-mark.svg" runllm-community-url="https://datahub.com/slack" runllm-community-type="slack" runllm-disable-ask-a-person="true" async></script><link rel="stylesheet" href="/assets/css/styles.1e47f27f.css">
<link rel="preload" href="/assets/js/runtime~main.3c1f9b85.js" as="script">
<link rel="preload" href="/assets/js/main.e25b3457.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5M8T9HNN" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:transparent;color:#ffffff" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><div class="shimmer-banner"><p><strong>CONTEXT:</strong> The Metadata and AI Summit 10/29</p><a href="https://datahub.com/context/?utm_source=event&utm_medium=&utm_campaign=16839686-FY25-Q4-EVENT-CONTEXT-MAIS&utm_term=docs" target="_blank" class="button"><div>Register<span> â†’</span></div></a></div></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://datahub.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/datahub-logo-color-light-horizontal.svg" alt="DataHub Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/datahub-logo-color-dark-horizontal.svg" alt="DataHub Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link versionNavItem_cbn8">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/advanced/monitoring">Next</a></li><li><a class="dropdown__link" href="/docs/1.1.0/advanced/monitoring">1.1.0</a></li><li><hr class="dropdown-separator" style="margin: 0.4rem;"></li><li><div class="dropdown__link"><b>Archived versions</b></div></li><li>
                     <a class="dropdown__link" href="https://docs-website-t9sv4w3gr-acryldata.vercel.app/docs/features">1.0.0
                     <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                     </a>
                     </li><li>
                     <a class="dropdown__link" href="https://docs-website-t9sv4w3gr-acryldata.vercel.app/docs/0.15.0/features">0.15.0
                     <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                     </a>
                     </li><li>
                     <a class="dropdown__link" href="https://docs-website-8jkm4uler-acryldata.vercel.app/docs/0.14.1/features">0.14.1
                     <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                     </a>
                     </li><li>
                     <a class="dropdown__link" href="https://docs-website-eue2qafvn-acryldata.vercel.app/docs/features">0.14.0
                     <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                     </a>
                     </li><li>
                   <a class="dropdown__link" href="https://docs-website-psat3nzgi-acryldata.vercel.app/docs/features">0.13.1
                   <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                   </a>
                   </li><li>
                     <a class="dropdown__link" href="https://docs-website-lzxh86531-acryldata.vercel.app/docs/features">0.13.0
                     <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                     </a>
                     </li><li>
                   <a class="dropdown__link" href="https://docs-website-2uuxmgza2-acryldata.vercel.app/docs/features">0.12.1
                   <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                   </a>
                   </li><li>
                   <a class="dropdown__link" href="https://docs-website-irpoe2osc-acryldata.vercel.app/docs/features">0.11.0
                   <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                   </a>
                   </li><li>
                   <a class="dropdown__link" href="https://docs-website-1gv2yzn9d-acryldata.vercel.app/docs/features">0.10.5
                   <svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg>
                   </a>
                   </li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/integrations">Integrations</a><a href="https://datahub.com/slack?utm_source=docs&amp;utm_medium=header&amp;utm_campaign=docs_header" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">
            <style>
              .slack-logo:hover {
                opacity: 0.8;
              }
            </style>
            <img class="slack-logo" src="https://upload.wikimedia.org/wikipedia/commons/d/d5/Slack_icon_2019.svg" , alt="slack" , height="20px" style="margin: 10px 0 0 0;">
          </a><a href="https://github.com/datahub-project/datahub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">
            <style>
              .github-logo:hover {
                opacity: 0.8;
              }
            </style>
            <img class="github-logo" src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg" , alt="slack" , height="20px" style="margin: 10px 0 0 0;">
          </a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div>Getting Started</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/features">What Is DataHub?</a><button aria-label="Toggle the collapsible sidebar category &#x27;What Is DataHub?&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/features">Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;Features&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div>DataHub Cloud</div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/managed-datahub/managed-datahub-overview">DataHub Cloud vs. DataHub OSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/managed-datahub/welcome-acryl">Getting Started with DataHub Cloud</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/managed-datahub/upgrade_core_to_cloud">Upgrading from DataHub Core to Cloud</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/authentication/guides/sso/initialize-oidc">Configure Single Sign-On</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/managed-datahub/remote-executor/about">Remote Executor</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/managed-datahub/datahub-api/entity-events-api">DataHub API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/managed-datahub/slack/saas-slack-app">Slack</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/managed-datahub/teams/saas-teams-app">Teams</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/managed-datahub/operator-guide/setting-up-events-api-on-aws-eventbridge">Operator Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item saasOnly"><a class="menu__link" href="/docs/managed-datahub/change-proposals">Change Proposals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/managed-datahub/chrome-extension">Cloud Chrome Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item saasOnly"><a class="menu__link" href="/docs/managed-datahub/subscription-and-notification">Subscriptions &amp; Notifications</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/managed-datahub/release-notes/v_0_3_14">DataHub Cloud Release History</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div>Integrations</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/metadata-ingestion">Overview</a><button aria-label="Toggle the collapsible sidebar category &#x27;Overview&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/metadata-ingestion/cli-ingestion">Quickstart Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/metadata-ingestion/source_overview">Sources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Sources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/metadata-ingestion/schedule_docs/intro">Advanced Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div>API & SDKs</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/metadata-modeling/metadata-model">Open Source DataHub Metadata Standard</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/metadata-modeling/metadata-model">The Metadata Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/what/mxe">Core Metadata Events</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/generated/metamodel/entities/role">Entity Docs</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/what-is-datahub/datahub-concepts">Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/metadata-standards">Metadata Standards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Metadata Standards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/api/datahub-apis">APIs and SDKs Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/api/graphql/overview">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/metadata-ingestion/as-a-library">Python SDK</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/metadata-integration/java/as-a-library">Java SDK</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/cli">DataHub CLI</a><button aria-label="Toggle the collapsible sidebar category &#x27;DataHub CLI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/act-on-metadata">DataHub Actions</a><button aria-label="Toggle the collapsible sidebar category &#x27;DataHub Actions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/api/tutorials/datasets">Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div>Admin</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/authentication">Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/authorization">Authorization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/how/delete-metadata">Advanced Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/delete-metadata">Removing Metadata from DataHub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/configuring-authorization-with-apache-ranger">Configuring Authorization with Apache Ranger</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/managed-datahub/configuring-identity-provisioning-with-ms-entra">SCIM Provisioning</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/backup-datahub">Backup &amp; Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/restore-indices">Search and Graph Reindexing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/load-indices">Load Indices: High-Performance Bulk Index Loading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/db-retention">Configuring Database Retention</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/advanced/monitoring">Monitoring DataHub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/telemetry">Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/kafka-config">Configuring Kafka</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/configure-cdc">Configuring Change Data Capture (CDC) Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/jattach-guide">Debugging by Jattach</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div>Deployment</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/deployment-guides">Deployment Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deployment Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/deploy/confluent-cloud">Advanced Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div>Developers</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/architecture/architecture">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/developers">Developing on DataHub</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/advanced/mcp-mcl">Advanced Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div>Community</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/community">Community</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/releases">Release History</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Monitoring DataHub</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Monitoring DataHub</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h2><p>Monitoring DataHub&#x27;s system components is essential for maintaining operational excellence, troubleshooting performance issues,
and ensuring system reliability. This comprehensive guide covers how to implement observability in DataHub through tracing and metrics,
and how to extract valuable insights from your running instances.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-monitor-datahub">Why Monitor DataHub?<a href="#why-monitor-datahub" class="hash-link" aria-label="Direct link to Why Monitor DataHub?" title="Direct link to Why Monitor DataHub?">â€‹</a></h2><p>Effective monitoring enables you to:</p><ul><li>Identify Performance Bottlenecks: Pinpoint slow queries or API endpoints</li><li>Debug Issues Faster: Trace requests across distributed components to locate failures</li><li>Meet SLAs: Track and alert on key performance indicators</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="observability-components">Observability Components<a href="#observability-components" class="hash-link" aria-label="Direct link to Observability Components" title="Direct link to Observability Components">â€‹</a></h2><p>DataHub&#x27;s observability strategy consists of two complementary approaches:</p><ol><li><p>Metrics Collection</p><p><strong>Purpose:</strong> Aggregate statistical data about system behavior over time
<strong>Technology:</strong> Transitioning from DropWizard/JMX to Micrometer</p><p><strong>Current State:</strong> DropWizard metrics exposed via JMX, collected by Prometheus
<strong>Future Direction:</strong> Native Micrometer integration for Spring-based metrics
<strong>Compatibility:</strong> Prometheus-compatible format with support for other metrics backends</p><p>Key Metrics Categories:</p><ul><li>Performance Metrics: Request latency, throughput, error rates</li><li>Resource Metrics: CPU, memory utilization</li><li>Application Metrics: Cache hit rates, queue depths, processing times</li><li>Business Metrics: Entity counts, ingestion rates, search performance</li></ul></li><li><p>Distributed Tracing</p><p><strong>Purpose:</strong> Track individual requests as they flow through multiple services and components
<strong>Technology:</strong> OpenTelemetry-based instrumentation</p><ul><li>Provides end-to-end visibility of request lifecycles</li><li>Automatically instruments popular libraries (Kafka, JDBC, Elasticsearch)</li><li>Supports multiple backend systems (Jaeger, Zipkin, etc.)</li><li>Enables custom span creation with minimal code changes</li></ul><p>Key Benefits:</p><ul><li>Visualize request flow across microservices</li><li>Identify latency hotspots</li><li>Understand service dependencies</li><li>Debug complex distributed transactions</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="graphql-instrumentation-micrometer">GraphQL Instrumentation (Micrometer)<a href="#graphql-instrumentation-micrometer" class="hash-link" aria-label="Direct link to GraphQL Instrumentation (Micrometer)" title="Direct link to GraphQL Instrumentation (Micrometer)">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-1">Overview<a href="#overview-1" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3><p>DataHub provides comprehensive instrumentation for its GraphQL API through Micrometer metrics, enabling detailed performance
monitoring and debugging capabilities. The instrumentation system offers flexible configuration options to balance between
observability depth and performance overhead.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-path-level-graphql-instrumentation-matters">Why Path-Level GraphQL Instrumentation Matters<a href="#why-path-level-graphql-instrumentation-matters" class="hash-link" aria-label="Direct link to Why Path-Level GraphQL Instrumentation Matters" title="Direct link to Why Path-Level GraphQL Instrumentation Matters">â€‹</a></h3><p>Traditional GraphQL monitoring only tells you &quot;the search query is slow&quot; but not <strong>why</strong>. Without path-level instrumentation,
you&#x27;re blind to which specific fields are causing performance bottlenecks in complex nested queries.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="real-world-example">Real-World Example<a href="#real-world-example" class="hash-link" aria-label="Direct link to Real-World Example" title="Direct link to Real-World Example">â€‹</a></h3><p>Consider this GraphQL query:</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">query</span><span class="token plain"> </span><span class="token definition-query function" style="color:rgb(130, 170, 255)">getSearchResults</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property-query">search</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">input</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;sales data&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token object">searchResults</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token object">entity</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Dataset</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token object">owner</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Path: /search/searchResults/entity/owner</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token object">corpUser</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">displayName</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token object">lineage</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Path: /search/searchResults/entity/lineage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">upstreamCount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">downstreamCount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token object">upstreamEntities</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">urn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token object">schemaMetadata</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Path: /search/searchResults/entity/schemaMetadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token object">fields</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">fieldPath</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">description</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-path-level-instrumentation-reveals">What Path-Level Instrumentation Reveals<a href="#what-path-level-instrumentation-reveals" class="hash-link" aria-label="Direct link to What Path-Level Instrumentation Reveals" title="Direct link to What Path-Level Instrumentation Reveals">â€‹</a></h3><p>With path-level metrics, you discover:</p><ul><li><code>/search/searchResults/entity/owner</code> - 50ms (fast, well-cached)</li><li><code>/search/searchResults/entity/lineage</code> - 2500ms (SLOW! hitting graph database)</li><li><code>/search/searchResults/entity/schemaMetadata</code> - 150ms (acceptable)</li></ul><p><strong>Without path metrics</strong>: &quot;Search query takes 3 seconds&quot;<br>
<strong>With path metrics</strong>: &quot;Lineage resolution is the bottleneck&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-benefits">Key Benefits<a href="#key-benefits" class="hash-link" aria-label="Direct link to Key Benefits" title="Direct link to Key Benefits">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-surgical-optimization">1. <strong>Surgical Optimization</strong><a href="#1-surgical-optimization" class="hash-link" aria-label="Direct link to 1-surgical-optimization" title="Direct link to 1-surgical-optimization">â€‹</a></h4><p>Instead of guessing, you know exactly which resolver needs optimization. Maybe lineage needs better caching or pagination.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-smart-query-patterns">2. <strong>Smart Query Patterns</strong><a href="#2-smart-query-patterns" class="hash-link" aria-label="Direct link to 2-smart-query-patterns" title="Direct link to 2-smart-query-patterns">â€‹</a></h4><p>Identify expensive patterns like:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># These paths consistently slow:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/</span><span class="token important">*/lineage/upstreamEntities/*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/</span><span class="token important">*/siblings/*/platform</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Action: Add field-level caching or lazy loading</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-client-specific-debugging">3. <strong>Client-Specific Debugging</strong><a href="#3-client-specific-debugging" class="hash-link" aria-label="Direct link to 3-client-specific-debugging" title="Direct link to 3-client-specific-debugging">â€‹</a></h4><p>Different clients request different fields. Path instrumentation shows:</p><ul><li>Web UI requests are slow (requesting everything)</li><li>API integrations timeout (requesting deep lineage)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-n1-query-detection">4. <strong>N+1 Query Detection</strong><a href="#4-n1-query-detection" class="hash-link" aria-label="Direct link to 4-n1-query-detection" title="Direct link to 4-n1-query-detection">â€‹</a></h4><p>Spot resolver patterns that indicate N+1 problems:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/users/0/permissions - 10ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/users/1/permissions - 10ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/users/2/permissions - 10ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">... (100 more times)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-strategy">Configuration Strategy<a href="#configuration-strategy" class="hash-link" aria-label="Direct link to Configuration Strategy" title="Direct link to Configuration Strategy">â€‹</a></h3><p>Start targeted to minimize overhead:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Focus on known slow operations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">fieldLevelOperations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;searchAcrossEntities,getDataset&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Target expensive resolver paths</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">fieldLevelPaths</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/**/lineage/**,/**/relationships/**,/**/privileges&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture">â€‹</a></h3><p>The GraphQL instrumentation is implemented through <code>GraphQLTimingInstrumentation</code>, which extends GraphQL Java&#x27;s instrumentation framework. It provides:</p><ul><li><strong>Request-level metrics</strong>: Overall query performance and error tracking</li><li><strong>Field-level metrics</strong>: Detailed timing for individual field resolvers</li><li><strong>Smart filtering</strong>: Configurable targeting of specific operations or field paths</li><li><strong>Low overhead</strong>: Minimal performance impact through efficient instrumentation</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-collected">Metrics Collected<a href="#metrics-collected" class="hash-link" aria-label="Direct link to Metrics Collected" title="Direct link to Metrics Collected">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="request-level-metrics">Request-Level Metrics<a href="#request-level-metrics" class="hash-link" aria-label="Direct link to Request-Level Metrics" title="Direct link to Request-Level Metrics">â€‹</a></h4><p><strong>Metric: <code>graphql.request.duration</code></strong></p><ul><li><strong>Type</strong>: Timer with percentiles (p50, p95, p99)</li><li><strong>Tags</strong>:<ul><li><code>operation</code>: Operation name (e.g., &quot;getSearchResultsForMultiple&quot;)</li><li><code>operation.type</code>: Query, mutation, or subscription</li><li><code>success</code>: true/false based on error presence</li><li><code>field.filtering</code>: Filtering mode applied (DISABLED, ALL_FIELDS, BY_OPERATION, BY_PATH, BY_BOTH)</li></ul></li><li><strong>Use Case</strong>: Monitor overall GraphQL performance, identify slow operations</li></ul><p><strong>Metric: <code>graphql.request.errors</code></strong></p><ul><li><strong>Type</strong>: Counter</li><li><strong>Tags</strong>:<ul><li><code>operation</code>: Operation name</li><li><code>operation.type</code>: Query, mutation, or subscription</li></ul></li><li><strong>Use Case</strong>: Track error rates by operation</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="field-level-metrics">Field-Level Metrics<a href="#field-level-metrics" class="hash-link" aria-label="Direct link to Field-Level Metrics" title="Direct link to Field-Level Metrics">â€‹</a></h4><p><strong>Metric: <code>graphql.field.duration</code></strong></p><ul><li><strong>Type</strong>: Timer with percentiles (p50, p95, p99)</li><li><strong>Tags</strong>:<ul><li><code>parent.type</code>: GraphQL parent type (e.g., &quot;Dataset&quot;, &quot;User&quot;)</li><li><code>field</code>: Field name being resolved</li><li><code>operation</code>: Operation name context</li><li><code>success</code>: true/false</li><li><code>path</code>: Field path (optional, controlled by <code>fieldLevelPathEnabled</code>)</li></ul></li><li><strong>Use Case</strong>: Identify slow field resolvers, optimize data fetching</li></ul><p><strong>Metric: <code>graphql.field.errors</code></strong></p><ul><li><strong>Type</strong>: Counter</li><li><strong>Tags</strong>: Same as field duration (minus success tag)</li><li><strong>Use Case</strong>: Track field-specific error patterns</li></ul><p><strong>Metric: <code>graphql.fields.instrumented</code></strong></p><ul><li><strong>Type</strong>: Counter</li><li><strong>Tags</strong>:<ul><li><code>operation</code>: Operation name</li><li><code>filtering.mode</code>: Active filtering mode</li></ul></li><li><strong>Use Case</strong>: Monitor instrumentation coverage and overhead</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-guide">Configuration Guide<a href="#configuration-guide" class="hash-link" aria-label="Direct link to Configuration Guide" title="Direct link to Configuration Guide">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="master-controls">Master Controls<a href="#master-controls" class="hash-link" aria-label="Direct link to Master Controls" title="Direct link to Master Controls">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">graphQL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">metrics</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Master switch for all GraphQL metrics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">GRAPHQL_METRICS_ENABLED</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Enable field-level resolver metrics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">GRAPHQL_METRICS_FIELD_LEVEL_ENABLED</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="selective-field-instrumentation">Selective Field Instrumentation<a href="#selective-field-instrumentation" class="hash-link" aria-label="Direct link to Selective Field Instrumentation" title="Direct link to Selective Field Instrumentation">â€‹</a></h4><p>Field-level metrics can add significant overhead for complex queries. DataHub provides multiple strategies to control which fields are instrumented:</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-operation-based-filtering">1. <strong>Operation-Based Filtering</strong><a href="#1-operation-based-filtering" class="hash-link" aria-label="Direct link to 1-operation-based-filtering" title="Direct link to 1-operation-based-filtering">â€‹</a></h5><p>Target specific GraphQL operations known to be slow or critical:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">fieldLevelOperations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;getSearchResultsForMultiple,searchAcrossLineageStructure&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-path-based-filtering">2. <strong>Path-Based Filtering</strong><a href="#2-path-based-filtering" class="hash-link" aria-label="Direct link to 2-path-based-filtering" title="Direct link to 2-path-based-filtering">â€‹</a></h5><p>Use path patterns to instrument specific parts of your schema:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">fieldLevelPaths</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/search/results/**,/user/*/permissions,/**/lineage/*&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Path Pattern Syntax</strong>:</p><ul><li><code>/user</code> - Exact match for the user field</li><li><code>/user/*</code> - Direct children of user (e.g., <code>/user/name</code>, <code>/user/email</code>)</li><li><code>/user/**</code> - User field and all descendants at any depth</li><li><code>/*/comments/*</code> - Comments field under any parent</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-combined-filtering">3. <strong>Combined Filtering</strong><a href="#3-combined-filtering" class="hash-link" aria-label="Direct link to 3-combined-filtering" title="Direct link to 3-combined-filtering">â€‹</a></h5><p>When both operation and path filters are configured, only fields matching BOTH criteria are instrumented:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Only instrument search results within specific operations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">fieldLevelOperations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;searchAcrossEntities&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">fieldLevelPaths</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/searchResults/**&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-options">Advanced Options<a href="#advanced-options" class="hash-link" aria-label="Direct link to Advanced Options" title="Direct link to Advanced Options">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Include field paths as metric tags (WARNING: high cardinality risk)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">fieldLevelPathEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Include metrics for trivial property access</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">trivialDataFetchersEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="filtering-modes-explained">Filtering Modes Explained<a href="#filtering-modes-explained" class="hash-link" aria-label="Direct link to Filtering Modes Explained" title="Direct link to Filtering Modes Explained">â€‹</a></h3><p>The instrumentation automatically determines the most efficient filtering mode:</p><ol><li><strong>DISABLED</strong>: Field-level metrics completely disabled</li><li><strong>ALL_FIELDS</strong>: No filtering, all fields instrumented (highest overhead)</li><li><strong>BY_OPERATION</strong>: Only instrument fields within specified operations</li><li><strong>BY_PATH</strong>: Only instrument fields matching path patterns</li><li><strong>BY_BOTH</strong>: Most restrictive - both operation and path must match</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-considerations">Performance Considerations<a href="#performance-considerations" class="hash-link" aria-label="Direct link to Performance Considerations" title="Direct link to Performance Considerations">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="impact-assessment">Impact Assessment<a href="#impact-assessment" class="hash-link" aria-label="Direct link to Impact Assessment" title="Direct link to Impact Assessment">â€‹</a></h4><p>Field-level instrumentation overhead varies by:</p><ul><li><strong>Query complexity</strong>: More fields = more overhead</li><li><strong>Resolver performance</strong>: Fast resolvers have higher relative overhead</li><li><strong>Filtering effectiveness</strong>: Better targeting = less overhead</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices">â€‹</a></h4><ol><li><p><strong>Start Conservative</strong>: Begin with field-level metrics disabled</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">fieldLevelEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Target Known Issues</strong>: Enable selectively for problematic operations</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">fieldLevelEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">fieldLevelOperations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;slowSearchQuery,complexLineageQuery&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Use Path Patterns Wisely</strong>: Focus on expensive resolver paths</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">fieldLevelPaths</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/search/**,/**/lineage/**&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Avoid Path Tags in Production</strong>: High cardinality risk</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">fieldLevelPathEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Keep this false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Monitor Instrumentation Overhead</strong>: Track the <code>graphql.fields.instrumented</code> metric</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-configurations">Example Configurations<a href="#example-configurations" class="hash-link" aria-label="Direct link to Example Configurations" title="Direct link to Example Configurations">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="development-environment-full-visibility">Development Environment (Full Visibility)<a href="#development-environment-full-visibility" class="hash-link" aria-label="Direct link to Development Environment (Full Visibility)" title="Direct link to Development Environment (Full Visibility)">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">graphQL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">metrics</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelOperations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># All operations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelPathEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Include paths for debugging</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">trivialDataFetchersEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="production---targeted-monitoring">Production - Targeted Monitoring<a href="#production---targeted-monitoring" class="hash-link" aria-label="Direct link to Production - Targeted Monitoring" title="Direct link to Production - Targeted Monitoring">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">graphQL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">metrics</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelOperations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;getSearchResultsForMultiple,searchAcrossLineage&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelPaths</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/search/results/*,/lineage/upstream/**,/lineage/downstream/**&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelPathEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">trivialDataFetchersEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="production---minimal-overhead">Production - Minimal Overhead<a href="#production---minimal-overhead" class="hash-link" aria-label="Direct link to Production - Minimal Overhead" title="Direct link to Production - Minimal Overhead">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">graphQL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">metrics</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fieldLevelEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Only request-level metrics</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-slow-queries">Debugging Slow Queries<a href="#debugging-slow-queries" class="hash-link" aria-label="Direct link to Debugging Slow Queries" title="Direct link to Debugging Slow Queries">â€‹</a></h3><p>When investigating GraphQL performance issues:</p><ol><li><strong>Enable request-level metrics first</strong> to identify slow operations</li><li><strong>Temporarily enable field-level metrics</strong> for the slow operation:<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">fieldLevelOperations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;problematicQuery&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><strong>Analyze field duration metrics</strong> to find bottlenecks</li><li><strong>Optionally enable path tags</strong> (briefly) for precise identification:<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">fieldLevelPathEnabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Temporary only!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><strong>Optimize identified resolvers</strong> and disable detailed instrumentation</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-with-monitoring-stack">Integration with Monitoring Stack<a href="#integration-with-monitoring-stack" class="hash-link" aria-label="Direct link to Integration with Monitoring Stack" title="Direct link to Integration with Monitoring Stack">â€‹</a></h3><p>The GraphQL metrics integrate seamlessly with DataHub&#x27;s monitoring infrastructure:</p><ul><li><strong>Prometheus</strong>: Metrics exposed at <code>/actuator/prometheus</code></li><li><strong>Grafana</strong>: Create dashboards showing:<ul><li>Request rates and latencies by operation</li><li>Error rates and types</li><li>Field resolver performance heatmaps</li><li>Top slow operations and fields</li></ul></li></ul><p>Example Prometheus queries:</p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Average request duration by operation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rate(graphql_request_duration_seconds_sum[5m])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/ rate(graphql_request_duration_seconds_count[5m])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Field resolver p99 latency</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(0.99,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  rate(graphql_field_duration_seconds_bucket[5m])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Error rate by operation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rate(graphql_request_errors_total[5m])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-consumer-instrumentation-micrometer">Kafka Consumer Instrumentation (Micrometer)<a href="#kafka-consumer-instrumentation-micrometer" class="hash-link" aria-label="Direct link to Kafka Consumer Instrumentation (Micrometer)" title="Direct link to Kafka Consumer Instrumentation (Micrometer)">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-2">Overview<a href="#overview-2" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3><p>DataHub provides comprehensive instrumentation for Kafka message consumption through Micrometer metrics, enabling
real-time monitoring of message queue latency and consumer performance. This instrumentation is critical for
maintaining data freshness SLAs and identifying processing bottlenecks across DataHub&#x27;s event-driven architecture.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-kafka-queue-time-monitoring-matters">Why Kafka Queue Time Monitoring Matters<a href="#why-kafka-queue-time-monitoring-matters" class="hash-link" aria-label="Direct link to Why Kafka Queue Time Monitoring Matters" title="Direct link to Why Kafka Queue Time Monitoring Matters">â€‹</a></h3><p>Traditional Kafka lag monitoring only tells you &quot;we&#x27;re behind by 10,000 messages&quot;
Without queue time metrics, you can&#x27;t answer critical questions like &quot;are we meeting our 5-minute data freshness SLA?&quot;
or &quot;which consumer groups are experiencing delays?&quot;</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="real-world-impact">Real-World Impact<a href="#real-world-impact" class="hash-link" aria-label="Direct link to Real-World Impact" title="Direct link to Real-World Impact">â€‹</a></h4><p>Consider these scenarios:</p><p>Variable Production Rate:</p><ul><li>Morning: 100 messages/second â†’ 1000 message lag = 10 seconds old</li><li>Evening: 10 messages/second â†’ 1000 message lag = 100 seconds old</li><li>Same lag count, vastly different business impact!</li></ul><p>Burst Traffic Patterns:</p><ul><li>Bulk ingestion creates 1M message backlog</li><li>Are these messages from the last hour (recoverable) or last 24 hours (SLA breach)?</li></ul><p>Consumer Group Performance:</p><ul><li>Real-time processors need &lt; 1 minute latency</li><li>Analytics consumers can tolerate 1 hour latency</li><li>Different groups require different monitoring thresholds</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-1">Architecture<a href="#architecture-1" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture">â€‹</a></h3><p>Kafka queue time instrumentation is implemented across all DataHub consumers:</p><ul><li>MetadataChangeProposals (MCP) Processor - SQL entity updates<ul><li>BatchMetadataChangeProposals (MCP) Processor - Bulk SQL entity updates</li></ul></li><li>MetadataChangeLog (MCL) Processor &amp; Hooks - Elasticsearch &amp; downstream aspect operations</li><li>DataHubUsageEventsProcessor - Usage analytics events</li><li>PlatformEventProcessor - Platform operations &amp; external consumers</li></ul><p>Each consumer automatically records queue time metrics using the message&#x27;s embedded timestamp.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-collected-1">Metrics Collected<a href="#metrics-collected-1" class="hash-link" aria-label="Direct link to Metrics Collected" title="Direct link to Metrics Collected">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="core-metric">Core Metric<a href="#core-metric" class="hash-link" aria-label="Direct link to Core Metric" title="Direct link to Core Metric">â€‹</a></h4><p>Metric: <code>kafka.message.queue.time</code></p><ul><li>Type: Timer with configurable percentiles and SLO buckets</li><li>Unit: Milliseconds</li><li>Tags:<ul><li>topic: Kafka topic name (e.g., &quot;MetadataChangeProposal_v1&quot;)</li><li>consumer.group: Consumer group ID (e.g., &quot;generic-mce-consumer&quot;)</li></ul></li><li>Use Case: Monitor end-to-end latency from message production to SQL transaction</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="statistical-distribution">Statistical Distribution<a href="#statistical-distribution" class="hash-link" aria-label="Direct link to Statistical Distribution" title="Direct link to Statistical Distribution">â€‹</a></h4><p>The timer automatically tracks:</p><ul><li>Count: Total messages processed</li><li>Sum: Cumulative queue time</li><li>Max: Highest queue time observed</li><li>Percentiles: p50, p95, p99, p99.9 (configurable)</li><li>SLO Buckets: Percentage of messages meeting latency targets</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-guide-1">Configuration Guide<a href="#configuration-guide-1" class="hash-link" aria-label="Direct link to Configuration Guide" title="Direct link to Configuration Guide">â€‹</a></h4><p>Default Configuration:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">kafka</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">consumer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">metrics</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Percentiles to calculate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">percentiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0.5,0.95,0.99,0.999&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Service Level Objective buckets (seconds)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">slo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;300,1800,3600,10800,21600,43200&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 5m,30m,1h,3h,6h,12h</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Maximum expected queue time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">maxExpectedValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 24 hours (seconds)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="key-monitoring-patterns">Key Monitoring Patterns<a href="#key-monitoring-patterns" class="hash-link" aria-label="Direct link to Key Monitoring Patterns" title="Direct link to Key Monitoring Patterns">â€‹</a></h4><p>SLA Compliance Monitoring:</p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Percentage of messages processed within 5-minute SLA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(kafka_message_queue_time_seconds_bucket{le=&quot;300&quot;}[5m])) by (topic)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/ sum(rate(kafka_message_queue_time_seconds_count[5m])) by (topic) * 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Consumer Group Comparison:</p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># P99 queue time by consumer group</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(0.99,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  sum by (consumer_group, le) (</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rate(kafka_message_queue_time_seconds_bucket[5m])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-considerations-1">Performance Considerations<a href="#performance-considerations-1" class="hash-link" aria-label="Direct link to Performance Considerations" title="Direct link to Performance Considerations">â€‹</a></h4><p>Metric Cardinality:</p><p>The instrumentation is designed for low cardinality:</p><ul><li>Only two tags: <code>topic</code> and <code>consumer.group</code></li><li>No partition-level tags (avoiding explosion with high partition counts)</li><li>No message-specific tags</li></ul><p>Overhead Assessment:</p><ul><li>CPU Impact: Minimal - single timestamp calculation per message</li><li>Memory Impact: ~5KB per topic/consumer-group combination</li><li>Network Impact: Negligible - metrics aggregated before export</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="migration-from-legacy-metrics">Migration from Legacy Metrics<a href="#migration-from-legacy-metrics" class="hash-link" aria-label="Direct link to Migration from Legacy Metrics" title="Direct link to Migration from Legacy Metrics">â€‹</a></h4><p>The new Micrometer-based queue time metrics coexist with the legacy DropWizard <code>kafkaLag</code> histogram:</p><ul><li>Legacy: <code>kafkaLag</code> histogram via JMX</li><li>New: <code>kafka.message.queue.time</code> timer via Micrometer</li><li>Migration: Both metrics collected during transition period</li><li>Future: Legacy metrics will be deprecated in favor of Micrometer</li></ul><p>The new metrics provide:</p><ul><li>Better percentile accuracy</li><li>SLO bucket tracking</li><li>Multi-backend support</li><li>Dimensional tagging</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="datahub-request-hook-latency-instrumentation-micrometer">DataHub Request Hook Latency Instrumentation (Micrometer)<a href="#datahub-request-hook-latency-instrumentation-micrometer" class="hash-link" aria-label="Direct link to DataHub Request Hook Latency Instrumentation (Micrometer)" title="Direct link to DataHub Request Hook Latency Instrumentation (Micrometer)">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-3">Overview<a href="#overview-3" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3><p>DataHub provides comprehensive instrumentation for measuring the latency from initial request submission to post-MCL
(Metadata Change Log) hook execution. This metric is crucial for understanding the end-to-end processing time of metadata
changes, including both the time spent in Kafka queues and the time taken to process through the system to the final hooks.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-hook-latency-monitoring-matters">Why Hook Latency Monitoring Matters<a href="#why-hook-latency-monitoring-matters" class="hash-link" aria-label="Direct link to Why Hook Latency Monitoring Matters" title="Direct link to Why Hook Latency Monitoring Matters">â€‹</a></h3><p>Traditional metrics only show individual component performance. Request hook latency provides the complete picture of how long
it takes for a metadata change to be fully processed through DataHub&#x27;s pipeline:</p><ul><li>Request Submission: When a metadata change request is initially submitted</li><li>Queue Time: Time spent in Kafka topics waiting to be consumed</li><li>Processing Time: Time for the change to be persisted and processed</li><li>Hook Execution: Final execution of MCL hooks</li></ul><p>This end-to-end view is essential for:</p><ul><li>Meeting data freshness SLAs</li><li>Identifying bottlenecks in the metadata pipeline</li><li>Understanding the impact of system load on processing times</li><li>Ensuring timely updates to downstream systems</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">â€‹</a></h3><p>Hook latency metrics are configured separately from Kafka consumer metrics to allow fine-tuning based on your specific requirements:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">datahub</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">metrics</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Measures the time from request to post-MCL hook execution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">hookLatency</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Percentiles to calculate for latency distribution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">percentiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0.5,0.95,0.99,0.999&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Service Level Objective buckets (seconds)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># These define the latency targets you want to track</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">slo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;300,1800,3000,10800,21600,43200&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 5m, 30m, 1h, 3h, 6h, 12h</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Maximum expected latency (seconds)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Values above this are considered outliers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">maxExpectedValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">86000</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 24 hours</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-collected-2">Metrics Collected<a href="#metrics-collected-2" class="hash-link" aria-label="Direct link to Metrics Collected" title="Direct link to Metrics Collected">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="core-metric-1">Core Metric<a href="#core-metric-1" class="hash-link" aria-label="Direct link to Core Metric" title="Direct link to Core Metric">â€‹</a></h4><p>Metric: <code>datahub.request.hook.queue.time</code></p><ul><li>Type: Timer with configurable percentiles and SLO buckets</li><li>Unit: Milliseconds</li><li>Tags:<ul><li><code>hook</code>: Name of the MCL hook being executed (e.g., &quot;IngestionSchedulerHook&quot;, &quot;SiblingsHook&quot;)</li></ul></li><li>Use Case: Monitor the complete latency from request submission to hook exe</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="key-monitoring-patterns-1">Key Monitoring Patterns<a href="#key-monitoring-patterns-1" class="hash-link" aria-label="Direct link to Key Monitoring Patterns" title="Direct link to Key Monitoring Patterns">â€‹</a></h4><p>SLA Compliance by Hook:</p><p>Monitor which hooks are meeting their latency SLAs:</p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Percentage of requests processed within 5-minute SLA per hook</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(datahub_request_hook_queue_time_seconds_bucket{le=&quot;300&quot;}[5m])) by (hook)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/ sum(rate(datahub_request_hook_queue_time_seconds_count[5m])) by (hook) * 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Hook Performance Comparison:</p><p>Identify which hooks have the highest latency:</p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># P99 latency by hook</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(0.99,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  sum by (hook, le) (</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rate(datahub_request_hook_queue_time_seconds_bucket[5m])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Latency Trends:</p><p>Track how hook latency changes over time:</p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Average hook latency trend</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">avg by (hook) (</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  rate(datahub_request_hook_queue_time_seconds_sum[5m])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  / rate(datahub_request_hook_queue_time_seconds_count[5m])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-details">Implementation Details<a href="#implementation-details" class="hash-link" aria-label="Direct link to Implementation Details" title="Direct link to Implementation Details">â€‹</a></h4><p>The hook latency metric leverages the trace ID embedded in the system metadata of each request:</p><ol><li>Trace ID Generation: Each request generates a unique trace ID with an embedded timestamp</li><li>Propagation: The trace ID flows through the entire processing pipeline via system metadata</li><li>Measurement: When an MCL hook executes, the metric calculates the time difference between the current time and the trace ID timestamp</li><li>Recording: The latency is recorded as a timer metric with the hook name as a tag</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-considerations-2">Performance Considerations<a href="#performance-considerations-2" class="hash-link" aria-label="Direct link to Performance Considerations" title="Direct link to Performance Considerations">â€‹</a></h4><ul><li>Overhead: Minimal - only requires trace ID extraction and time calculation per hook execution</li><li>Cardinality: Low - only one tag (hook name) with typically &lt; 20 unique values</li><li>Accuracy: High - measures actual wall-clock time from request to hook execution</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="relationship-to-kafka-queue-time-metrics">Relationship to Kafka Queue Time Metrics<a href="#relationship-to-kafka-queue-time-metrics" class="hash-link" aria-label="Direct link to Relationship to Kafka Queue Time Metrics" title="Direct link to Relationship to Kafka Queue Time Metrics">â€‹</a></h4><p>While Kafka queue time metrics (<code>kafka.message.queue.time</code>) measure the time messages spend in Kafka topics, request hook
latency metrics provide the complete picture:</p><ul><li>Kafka Queue Time: Time from message production to consumption</li><li>Hook Latency: Time from initial request to final hook execution</li></ul><p>Together, these metrics help identify where delays occur:</p><ul><li>High Kafka queue time but low hook latency: Bottleneck in Kafka consumption</li><li>Low Kafka queue time but high hook latency: Bottleneck in processing or persistence</li><li>Both high: System-wide performance issues</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cache-monitoring-micrometer">Cache Monitoring (Micrometer)<a href="#cache-monitoring-micrometer" class="hash-link" aria-label="Direct link to Cache Monitoring (Micrometer)" title="Direct link to Cache Monitoring (Micrometer)">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-4">Overview<a href="#overview-4" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3><p>Micrometer provides automatic instrumentation for cache implementations, offering deep insights into cache performance
and efficiency. This instrumentation is crucial for DataHub, where caching significantly impacts query performance and system load.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-cache-metrics">Automatic Cache Metrics<a href="#automatic-cache-metrics" class="hash-link" aria-label="Direct link to Automatic Cache Metrics" title="Direct link to Automatic Cache Metrics">â€‹</a></h3><p>When caches are registered with Micrometer, comprehensive metrics are automatically collected without code changes:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="core-metrics">Core Metrics<a href="#core-metrics" class="hash-link" aria-label="Direct link to Core Metrics" title="Direct link to Core Metrics">â€‹</a></h4><ul><li><strong><code>cache.size</code></strong> (Gauge) - Current number of entries in the cache</li><li><strong><code>cache.gets</code></strong> (Counter) - Cache access attempts, tagged with:<ul><li><code>result=hit</code> - Successful cache hits</li><li><code>result=miss</code> - Cache misses requiring backend fetch</li></ul></li><li><strong><code>cache.puts</code></strong> (Counter) - Number of entries added to cache</li><li><strong><code>cache.evictions</code></strong> (Counter) - Number of entries evicted</li><li><strong><code>cache.eviction.weight</code></strong> (Counter) - Total weight of evicted entries (for size-based eviction)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="derived-metrics">Derived Metrics<a href="#derived-metrics" class="hash-link" aria-label="Direct link to Derived Metrics" title="Direct link to Derived Metrics">â€‹</a></h4><p>Calculate key performance indicators using Prometheus queries:</p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cache hit rate (should be &gt;80% for hot caches)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(cache_gets_total{result=&quot;hit&quot;}[5m])) by (cache) /</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(cache_gets_total[5m])) by (cache)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cache miss rate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1 - (cache_hit_rate)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Eviction rate (indicates cache pressure)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rate(cache_evictions_total[5m])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datahub-cache-configuration">DataHub Cache Configuration<a href="#datahub-cache-configuration" class="hash-link" aria-label="Direct link to DataHub Cache Configuration" title="Direct link to DataHub Cache Configuration">â€‹</a></h3><p>DataHub uses multiple cache layers, each automatically instrumented:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-entity-client-cache">1. Entity Client Cache<a href="#1-entity-client-cache" class="hash-link" aria-label="Direct link to 1. Entity Client Cache" title="Direct link to 1. Entity Client Cache">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">cache.client.entityClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maxBytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">104857600</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 100MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">entityAspectTTLSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">corpuser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">corpUserInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Short TTL for frequently changing data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">corpUserKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">300</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Longer TTL for stable data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">structuredProperty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">propertyDefinition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">300</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">structuredPropertyKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 1 day for very stable data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-usage-statistics-cache">2. Usage Statistics Cache<a href="#2-usage-statistics-cache" class="hash-link" aria-label="Direct link to 2. Usage Statistics Cache" title="Direct link to 2. Usage Statistics Cache">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">cache.client.usageClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maxBytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">52428800</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 50MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">defaultTTLSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 1 day</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Caches expensive usage calculations</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-search--lineage-cache">3. Search &amp; Lineage Cache<a href="#3-search--lineage-cache" class="hash-link" aria-label="Direct link to 3. Search &amp; Lineage Cache" title="Direct link to 3. Search &amp; Lineage Cache">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">cache.search.lineage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ttlSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 1 day</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-best-practices">Monitoring Best Practices<a href="#monitoring-best-practices" class="hash-link" aria-label="Direct link to Monitoring Best Practices" title="Direct link to Monitoring Best Practices">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="key-indicators-to-watch">Key Indicators to Watch<a href="#key-indicators-to-watch" class="hash-link" aria-label="Direct link to Key Indicators to Watch" title="Direct link to Key Indicators to Watch">â€‹</a></h4><ol><li><p><strong>Hit Rate by Cache Type</strong></p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Alert if hit rate drops below 70%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cache_hit_rate &lt; 0.7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Memory Pressure</strong></p><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># High eviction rate relative to puts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rate(cache_evictions_total[5m]) / rate(cache_puts_total[5m]) &gt; 0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="thread-pool-executor-monitoring-micrometer">Thread Pool Executor Monitoring (Micrometer)<a href="#thread-pool-executor-monitoring-micrometer" class="hash-link" aria-label="Direct link to Thread Pool Executor Monitoring (Micrometer)" title="Direct link to Thread Pool Executor Monitoring (Micrometer)">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-5">Overview<a href="#overview-5" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h3><p>Micrometer automatically instruments Java <code>ThreadPoolExecutor</code> instances, providing crucial visibility into concurrency
bottlenecks and resource utilization. For DataHub&#x27;s concurrent operations, this monitoring is essential for maintaining
performance under load.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-executor-metrics">Automatic Executor Metrics<a href="#automatic-executor-metrics" class="hash-link" aria-label="Direct link to Automatic Executor Metrics" title="Direct link to Automatic Executor Metrics">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pool-state-metrics">Pool State Metrics<a href="#pool-state-metrics" class="hash-link" aria-label="Direct link to Pool State Metrics" title="Direct link to Pool State Metrics">â€‹</a></h4><ul><li><strong><code>executor.pool.size</code></strong> (Gauge) - Current number of threads in pool</li><li><strong><code>executor.pool.core</code></strong> (Gauge) - Core (minimum) pool size</li><li><strong><code>executor.pool.max</code></strong> (Gauge) - Maximum allowed pool size</li><li><strong><code>executor.active</code></strong> (Gauge) - Threads actively executing tasks</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="queue-metrics">Queue Metrics<a href="#queue-metrics" class="hash-link" aria-label="Direct link to Queue Metrics" title="Direct link to Queue Metrics">â€‹</a></h4><ul><li><strong><code>executor.queued</code></strong> (Gauge) - Tasks waiting in queue</li><li><strong><code>executor.queue.remaining</code></strong> (Gauge) - Available queue capacity</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-metrics">Performance Metrics<a href="#performance-metrics" class="hash-link" aria-label="Direct link to Performance Metrics" title="Direct link to Performance Metrics">â€‹</a></h4><ul><li><strong><code>executor.completed</code></strong> (Counter) - Total completed tasks</li><li><strong><code>executor.seconds</code></strong> (Timer) - Task execution time distribution</li><li><strong><code>executor.rejected</code></strong> (Counter) - Tasks rejected due to saturation</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datahub-executor-configurations">DataHub Executor Configurations<a href="#datahub-executor-configurations" class="hash-link" aria-label="Direct link to DataHub Executor Configurations" title="Direct link to DataHub Executor Configurations">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-graphql-query-executor">1. GraphQL Query Executor<a href="#1-graphql-query-executor" class="hash-link" aria-label="Direct link to 1. GraphQL Query Executor" title="Direct link to 1. GraphQL Query Executor">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">graphQL.concurrency</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">separateThreadPool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">corePoolSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Base threads</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maxPoolSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Scale under load</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">keepAlive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">60</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Seconds before idle thread removal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Handles complex GraphQL query resolution</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-batch-processing-executors">2. Batch Processing Executors<a href="#2-batch-processing-executors" class="hash-link" aria-label="Direct link to 2. Batch Processing Executors" title="Direct link to 2. Batch Processing Executors">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">entityClient.restli</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">batchConcurrency</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Parallel batch processors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">batchQueueSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">500</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Task buffer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">batchThreadKeepAlive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">60</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ingest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">batchConcurrency</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">batchQueueSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-search--analytics-executors">3. Search &amp; Analytics Executors<a href="#3-search--analytics-executors" class="hash-link" aria-label="Direct link to 3. Search &amp; Analytics Executors" title="Direct link to 3. Search &amp; Analytics Executors">â€‹</a></h4><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">timeseriesAspectService.query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">concurrency</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Parallel query threads</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">queueSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">500</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Buffered queries</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="critical-monitoring-patterns">Critical Monitoring Patterns<a href="#critical-monitoring-patterns" class="hash-link" aria-label="Direct link to Critical Monitoring Patterns" title="Direct link to Critical Monitoring Patterns">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="saturation-detection">Saturation Detection<a href="#saturation-detection" class="hash-link" aria-label="Direct link to Saturation Detection" title="Direct link to Saturation Detection">â€‹</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Thread pool utilization (&gt;0.8 indicates pressure)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">executor_active / executor_pool_size &gt; 0.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Queue filling up (&gt;0.7 indicates backpressure)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">executor_queued / (executor_queued + executor_queue_remaining) &gt; 0.7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rejection--starvation">Rejection &amp; Starvation<a href="#rejection--starvation" class="hash-link" aria-label="Direct link to Rejection &amp; Starvation" title="Direct link to Rejection &amp; Starvation">â€‹</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Task rejections (should be zero)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rate(executor_rejected_total[1m]) &gt; 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Thread starvation (all threads busy for extended period)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">avg_over_time(executor_active[5m]) &gt;= executor_pool_core</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-analysis">Performance Analysis<a href="#performance-analysis" class="hash-link" aria-label="Direct link to Performance Analysis" title="Direct link to Performance Analysis">â€‹</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Average task execution time</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rate(executor_seconds_sum[5m]) / rate(executor_seconds_count[5m])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Task throughput by executor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rate(executor_completed_total[5m])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tuning-guidelines">Tuning Guidelines<a href="#tuning-guidelines" class="hash-link" aria-label="Direct link to Tuning Guidelines" title="Direct link to Tuning Guidelines">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="symptoms--solutions">Symptoms &amp; Solutions<a href="#symptoms--solutions" class="hash-link" aria-label="Direct link to Symptoms &amp; Solutions" title="Direct link to Symptoms &amp; Solutions">â€‹</a></h4><table><thead><tr><th>Symptom</th><th>Metric Pattern</th><th>Solution</th></tr></thead><tbody><tr><td>High latency</td><td><code>executor_queued</code> rising</td><td>Increase pool size</td></tr><tr><td>Rejections</td><td><code>executor_rejected</code> &gt; 0</td><td>Increase queue size or pool max</td></tr><tr><td>Memory pressure</td><td>Many idle threads</td><td>Reduce <code>keepAlive</code> time</td></tr><tr><td>CPU waste</td><td>Low <code>executor_active</code></td><td>Reduce core pool size</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="capacity-planning">Capacity Planning<a href="#capacity-planning" class="hash-link" aria-label="Direct link to Capacity Planning" title="Direct link to Capacity Planning">â€‹</a></h4><ol><li><strong>Measure baseline</strong>: Monitor under normal load</li><li><strong>Stress test</strong>: Identify saturation points</li><li><strong>Set alerts</strong>:<ul><li>Warning at 70% utilization</li><li>Critical at 90% utilization</li></ul></li><li><strong>Auto-scale</strong>: Consider dynamic pool sizing based on queue depth</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="distributed-tracing">Distributed Tracing<a href="#distributed-tracing" class="hash-link" aria-label="Direct link to Distributed Tracing" title="Direct link to Distributed Tracing">â€‹</a></h2><p>Traces let us track the life of a request across multiple components. Each trace is consisted of multiple spans, which
are units of work, containing various context about the work being done as well as time taken to finish the work. By
looking at the trace, we can more easily identify performance bottlenecks.</p><p>We enable tracing by using the <a href="https://github.com/open-telemetry/opentelemetry-java-instrumentation" target="_blank" rel="noopener noreferrer">OpenTelemetry java instrumentation library</a>.
This project provides a Java agent JAR that is attached to java applications. The agent injects bytecode to capture
telemetry from popular libraries.</p><p>Using the agent we are able to</p><ol><li>Plug and play different tracing tools based on the user&#x27;s setup: Jaeger, Zipkin, or other tools</li><li>Get traces for Kafka, JDBC, and Elasticsearch without any additional code</li><li>Track traces of any function with a simple <code>@WithSpan</code> annotation</li></ol><p>You can enable the agent by setting env variable <code>ENABLE_OTEL</code> to <code>true</code> for GMS and MAE/MCE consumers. In our
example <a href="https://github.com/datahub-project/datahub/blob/master/docker/monitoring/docker-compose.monitoring.yml" target="_blank" rel="noopener noreferrer">docker-compose</a>, we export metrics to a local Jaeger
instance by setting env variable <code>OTEL_TRACES_EXPORTER</code> to <code>jaeger</code>
and <code>OTEL_EXPORTER_JAEGER_ENDPOINT</code> to <code>http://jaeger-all-in-one:14250</code>, but you can easily change this behavior by
setting the correct env variables. Refer to
this <a href="https://github.com/open-telemetry/opentelemetry-java/blob/main/sdk-extensions/autoconfigure/README.md" target="_blank" rel="noopener noreferrer">doc</a> for
all configs.</p><p>Once the above is set up, you should be able to see a detailed trace as a request is sent to GMS. We added
the <code>@WithSpan</code> annotation in various places to make the trace more readable. You should start to see traces in the
tracing collector of choice. Our example <a href="https://github.com/datahub-project/datahub/blob/master/docker/monitoring/docker-compose.monitoring.yml" target="_blank" rel="noopener noreferrer">docker-compose</a> deploys
an instance of Jaeger with port 16686. The traces should be available at http://localhost:16686.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-note">Configuration Note<a href="#configuration-note" class="hash-link" aria-label="Direct link to Configuration Note" title="Direct link to Configuration Note">â€‹</a></h3><p>We recommend using either <code>grpc</code> or <code>http/protobuf</code>, configured using <code>OTEL_EXPORTER_OTLP_PROTOCOL</code>. Avoid using <code>http</code> will not work as expected due to the size of
the generated spans.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="micrometer">Micrometer<a href="#micrometer" class="hash-link" aria-label="Direct link to Micrometer" title="Direct link to Micrometer">â€‹</a></h2><p>DataHub is transitioning to Micrometer as its primary metrics framework, representing a significant upgrade in observability
capabilities. Micrometer is a vendor-neutral application metrics facade that provides a simple, consistent API for the most
popular monitoring systems, allowing you to instrument your JVM-based application code without vendor lock-in.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-micrometer">Why Micrometer?<a href="#why-micrometer" class="hash-link" aria-label="Direct link to Why Micrometer?" title="Direct link to Why Micrometer?">â€‹</a></h3><ol><li><p>Native Spring Integration</p><p>As DataHub uses Spring Boot, Micrometer provides seamless integration with:</p><ul><li>Auto-configuration of common metrics</li><li>Built-in metrics for HTTP requests, JVM, caches, and more</li><li>Spring Boot Actuator endpoints for metrics exposure</li><li>Automatic instrumentation of Spring components</li></ul></li><li><p>Multi-Backend Support</p><p>Unlike the legacy DropWizard approach that primarily targets JMX, Micrometer natively supports:</p><ul><li>Prometheus (recommended for cloud-native deployments)</li><li>JMX (for backward compatibility)</li><li>StatsD</li><li>CloudWatch</li><li>Datadog</li><li>New Relic</li><li>And many more...</li></ul></li><li><p>Dimensional Metrics</p><p>Micrometer embraces modern dimensional metrics with <strong>labels/tags</strong>, enabling:</p><ul><li>Rich querying and aggregation capabilities</li><li>Better cardinality control</li><li>More flexible dashboards and alerts</li><li>Natural integration with cloud-native monitoring systems</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="micrometer-transition-plan">Micrometer Transition Plan<a href="#micrometer-transition-plan" class="hash-link" aria-label="Direct link to Micrometer Transition Plan" title="Direct link to Micrometer Transition Plan">â€‹</a></h2><p>DataHub is undertaking a strategic transition from DropWizard metrics (exposed via JMX) to Micrometer, a modern vendor-neutral metrics facade.
This transition aims to provide better cloud-native monitoring capabilities while maintaining backward compatibility for existing
monitoring infrastructure.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-state">Current State<a href="#current-state" class="hash-link" aria-label="Direct link to Current State" title="Direct link to Current State">â€‹</a></h3><p>What We Have Now:</p><ul><li>Primary System: DropWizard metrics exposed through JMX</li><li>Collection Method: Prometheus-JMX exporter scrapes JMX metrics</li><li>Dashboards: Grafana dashboards consuming JMX-sourced metrics</li><li>Code Pattern: MetricUtils class for creating counters and timers</li><li>Integration: Basic Spring integration with manual metric creation</li></ul><p align="center"><img loading="lazy" width="80%" src="https://raw.githubusercontent.com/datahub-project/static-assets/0f6ae5ae889ee4e780504ca566670867acf975ff/imgs/advanced/monitoring/monitoring_current.svg" class="img_ev3q"></p><p>Limitations:</p><ul><li>JMX-centric approach limits monitoring backend options</li><li>No unified observability (separate instrumentation for metrics and traces)</li><li>No support for dimensional metrics and tags</li><li>Manual instrumentation required for most components</li><li>Legacy naming conventions without proper tagging</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transition-state">Transition State<a href="#transition-state" class="hash-link" aria-label="Direct link to Transition State" title="Direct link to Transition State">â€‹</a></h3><p>What We&#x27;re Building:</p><ul><li>Primary System: Micrometer with native Prometheus support</li><li>Collection Method: Direct Prometheus scraping via /actuator/prometheus</li><li>Unified Telemetry: Single instrumentation point for both metrics and traces</li><li>Modern Patterns: Dimensional metrics with rich tagging</li><li>Multi-Backend: Support for Prometheus, StatsD, CloudWatch, Datadog, etc.</li><li>Auto-Instrumentation: Automatic metrics for Spring components</li></ul><p align="center"><img loading="lazy" width="80%" src="https://raw.githubusercontent.com/datahub-project/static-assets/0f6ae5ae889ee4e780504ca566670867acf975ff/imgs/advanced/monitoring/monitoring_transition.svg" class="img_ev3q"></p><p>Key Decisions and Rationale:</p><ol><li><p>Dual Registry Approach</p><p><strong>Decision:</strong> Run both systems in parallel with tag-based routing</p><p><strong>Rationale:</strong></p><ul><li>Zero downtime or disruption</li><li>Gradual migration at component level</li><li>Easy rollback if issues arise</li></ul></li><li><p>Prometheus as Primary Target</p><p><strong>Decision:</strong> Focus on Prometheus for new metrics</p><p><strong>Rationale:</strong></p><ul><li>Industry standard for cloud-native applications</li><li>Rich query language and ecosystem</li><li>Better suited for dimensional metrics</li></ul></li><li><p>Observation API Adoption</p><p><strong>Decision:</strong> Promote Observation API for new instrumentation</p><p><strong>Rationale:</strong></p><ul><li>Single instrumentation for metrics + traces</li><li>Reduced code complexity</li><li>Consistent naming across telemetry types</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="future-state">Future State<a href="#future-state" class="hash-link" aria-label="Direct link to Future State" title="Direct link to Future State">â€‹</a></h3><p align="center"><img loading="lazy" width="80%" src="https://raw.githubusercontent.com/datahub-project/static-assets/0f6ae5ae889ee4e780504ca566670867acf975ff/imgs/advanced/monitoring/monitoring_future.svg" class="img_ev3q"></p><p>Once fully adopted, Micrometer will transform DataHub&#x27;s observability from a collection of separate tools into a unified platform.
This means developers can focus on building features while getting comprehensive telemetry &quot;for free.&quot;</p><p>Intelligent and Adaptive Monitoring</p><ul><li>Dynamic Instrumentation: Enable detailed metrics for specific entities or operations on-demand without code changes</li><li>Environment-Aware Metrics: Automatically route metrics to Prometheus in Kubernetes, CloudWatch in AWS, or Azure Monitor in Azure</li><li>Built-in SLO Tracking: Define Service Level Objectives declaratively and automatically track error budgets</li></ul><p>Developer and Operator Experience</p><ul><li>Adding @Observed to a method automatically generates latency percentiles, error rates, and distributed trace spans</li><li>Every service exposes golden signals (latency, traffic, errors, saturation) out-of-the-box</li><li>Business metrics (entity ingestion rates, search performance) seamlessly correlate with system metrics</li><li>Self-documenting telemetry where metrics, traces, and logs tell a coherent operational story</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dropwizard--jmx">DropWizard &amp; JMX<a href="#dropwizard--jmx" class="hash-link" aria-label="Direct link to DropWizard &amp; JMX" title="Direct link to DropWizard &amp; JMX">â€‹</a></h2><p>We originally decided to use <a href="https://metrics.dropwizard.io/4.2.0/" target="_blank" rel="noopener noreferrer">Dropwizard Metrics</a> to export custom metrics to JMX,
and then use <a href="https://github.com/prometheus/jmx_exporter" target="_blank" rel="noopener noreferrer">Prometheus-JMX exporter</a> to export all JMX metrics to
Prometheus. This allows our code base to be independent of the metrics collection tool, making it easy for people to use
their tool of choice. You can enable the agent by setting env variable <code>ENABLE_PROMETHEUS</code> to <code>true</code> for GMS and MAE/MCE
consumers. Refer to this example <a href="https://github.com/datahub-project/datahub/blob/master/docker/monitoring/docker-compose.monitoring.yml" target="_blank" rel="noopener noreferrer">docker-compose</a> for setting the
variables.</p><p>In our example <a href="https://github.com/datahub-project/datahub/blob/master/docker/monitoring/docker-compose.monitoring.yml" target="_blank" rel="noopener noreferrer">docker-compose</a>, we have configured prometheus to
scrape from 4318 ports of each container used by the JMX exporter to export metrics. We also configured grafana to
listen to prometheus and create useful dashboards. By default, we provide two
dashboards: <a href="https://grafana.com/grafana/dashboards/14845" target="_blank" rel="noopener noreferrer">JVM dashboard</a> and DataHub dashboard.</p><p>In the JVM dashboard, you can find detailed charts based on JVM metrics like CPU/memory/disk usage. In the DataHub
dashboard, you can find charts to monitor each endpoint and the kafka topics. Using the example implementation, go
to http://localhost:3001 to find the grafana dashboards! (Username: admin, PW: admin)</p><p>To make it easy to track various metrics within the code base, we created MetricUtils class. This util class creates a
central metric registry, sets up the JMX reporter, and provides convenient functions for setting up counters and timers.
You can run the following to create a counter and increment.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">metricUtils</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">counter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;metricName&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can run the following to time a block of code.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">try</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Timer</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 107)">Context</span><span class="token plain"> ignored</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">metricUtils</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;timerName&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">block of code</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-monitoring-through-docker-compose">Enable monitoring through docker-compose<a href="#enable-monitoring-through-docker-compose" class="hash-link" aria-label="Direct link to Enable monitoring through docker-compose" title="Direct link to Enable monitoring through docker-compose">â€‹</a></h4><p>We provide some example configuration for enabling monitoring in
this <a href="https://github.com/datahub-project/datahub/tree/master/docker/monitoring" target="_blank" rel="noopener noreferrer">directory</a>. Take a look at the docker-compose
files, which adds necessary env variables to existing containers, and spawns new containers (Jaeger, Prometheus,
Grafana).</p><p>You can add in the above docker-compose using the <code>-f &lt;&lt;path-to-compose-file&gt;&gt;</code> when running docker-compose commands.
For instance,</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -f quickstart/docker-compose.quickstart.yml </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -f monitoring/docker-compose.monitoring.yml </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  pull </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> -p datahub </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -f quickstart/docker-compose.quickstart.yml </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -f monitoring/docker-compose.monitoring.yml </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We set up quickstart.sh, dev.sh, and dev-without-neo4j.sh to add the above docker-compose when MONITORING=true. For
instance <code>MONITORING=true ./docker/quickstart.sh</code> will add the correct env variables to start collecting traces and
metrics, and also deploy Jaeger, Prometheus, and Grafana. We will soon support this as a flag during quickstart.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="health-check-endpoint">Health check endpoint<a href="#health-check-endpoint" class="hash-link" aria-label="Direct link to Health check endpoint" title="Direct link to Health check endpoint">â€‹</a></h2><p>For monitoring healthiness of your DataHub service, <code>/admin</code> endpoint can be used.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="slackUtm_uoBr"><div class="slackUtm_uoBr"><hr>Need more help? Join the conversation in <a href="https://datahub.com/slack?utm_source=docs&amp;utm_medium=footer&amp;utm_campaign=docs_footer&amp;utm_content=docs/advanced/monitoring">Slack!</a></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/datahub-project/datahub/blob/master/docs/advanced/monitoring.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_VsjB"></div></div></footer><div class="feedbackWrapper_mUHF"><div class="feedbackWidget_PX4d"><div class="feedbackButtons_wn3V"><strong>Is this page helpful?</strong><div><button class="feedbackButton_UgQs"><span role="img" aria-label="like" class="anticon anticon-like"><svg viewBox="64 64 896 896" focusable="false" data-icon="like" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"></path></svg></span></button><button class="feedbackButton_UgQs"><span role="img" aria-label="dislike" class="anticon anticon-dislike"><svg viewBox="64 64 896 896" focusable="false" data-icon="dislike" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M885.9 490.3c3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 00-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4 20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3 40.4-23.5 65.5-66.1 65.5-111 0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 01-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0133.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5 21.9 19a56.76 56.76 0 0119.6 43c0 19.1-11 37.5-28.8 48.4z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/advanced/db-retention"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configuring Database Retention</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/deploy/telemetry"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Telemetry</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#why-monitor-datahub" class="table-of-contents__link toc-highlight">Why Monitor DataHub?</a></li><li><a href="#observability-components" class="table-of-contents__link toc-highlight">Observability Components</a></li><li><a href="#graphql-instrumentation-micrometer" class="table-of-contents__link toc-highlight">GraphQL Instrumentation (Micrometer)</a><ul><li><a href="#overview-1" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#why-path-level-graphql-instrumentation-matters" class="table-of-contents__link toc-highlight">Why Path-Level GraphQL Instrumentation Matters</a></li><li><a href="#real-world-example" class="table-of-contents__link toc-highlight">Real-World Example</a></li><li><a href="#what-path-level-instrumentation-reveals" class="table-of-contents__link toc-highlight">What Path-Level Instrumentation Reveals</a></li><li><a href="#key-benefits" class="table-of-contents__link toc-highlight">Key Benefits</a></li><li><a href="#configuration-strategy" class="table-of-contents__link toc-highlight">Configuration Strategy</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#metrics-collected" class="table-of-contents__link toc-highlight">Metrics Collected</a></li><li><a href="#configuration-guide" class="table-of-contents__link toc-highlight">Configuration Guide</a></li><li><a href="#filtering-modes-explained" class="table-of-contents__link toc-highlight">Filtering Modes Explained</a></li><li><a href="#performance-considerations" class="table-of-contents__link toc-highlight">Performance Considerations</a></li><li><a href="#example-configurations" class="table-of-contents__link toc-highlight">Example Configurations</a></li><li><a href="#debugging-slow-queries" class="table-of-contents__link toc-highlight">Debugging Slow Queries</a></li><li><a href="#integration-with-monitoring-stack" class="table-of-contents__link toc-highlight">Integration with Monitoring Stack</a></li></ul></li><li><a href="#kafka-consumer-instrumentation-micrometer" class="table-of-contents__link toc-highlight">Kafka Consumer Instrumentation (Micrometer)</a><ul><li><a href="#overview-2" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#why-kafka-queue-time-monitoring-matters" class="table-of-contents__link toc-highlight">Why Kafka Queue Time Monitoring Matters</a></li><li><a href="#architecture-1" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#metrics-collected-1" class="table-of-contents__link toc-highlight">Metrics Collected</a></li></ul></li><li><a href="#datahub-request-hook-latency-instrumentation-micrometer" class="table-of-contents__link toc-highlight">DataHub Request Hook Latency Instrumentation (Micrometer)</a><ul><li><a href="#overview-3" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#why-hook-latency-monitoring-matters" class="table-of-contents__link toc-highlight">Why Hook Latency Monitoring Matters</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#metrics-collected-2" class="table-of-contents__link toc-highlight">Metrics Collected</a></li></ul></li><li><a href="#cache-monitoring-micrometer" class="table-of-contents__link toc-highlight">Cache Monitoring (Micrometer)</a><ul><li><a href="#overview-4" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#automatic-cache-metrics" class="table-of-contents__link toc-highlight">Automatic Cache Metrics</a></li><li><a href="#datahub-cache-configuration" class="table-of-contents__link toc-highlight">DataHub Cache Configuration</a></li><li><a href="#monitoring-best-practices" class="table-of-contents__link toc-highlight">Monitoring Best Practices</a></li></ul></li><li><a href="#thread-pool-executor-monitoring-micrometer" class="table-of-contents__link toc-highlight">Thread Pool Executor Monitoring (Micrometer)</a><ul><li><a href="#overview-5" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#automatic-executor-metrics" class="table-of-contents__link toc-highlight">Automatic Executor Metrics</a></li><li><a href="#datahub-executor-configurations" class="table-of-contents__link toc-highlight">DataHub Executor Configurations</a></li><li><a href="#critical-monitoring-patterns" class="table-of-contents__link toc-highlight">Critical Monitoring Patterns</a></li><li><a href="#tuning-guidelines" class="table-of-contents__link toc-highlight">Tuning Guidelines</a></li></ul></li><li><a href="#distributed-tracing" class="table-of-contents__link toc-highlight">Distributed Tracing</a><ul><li><a href="#configuration-note" class="table-of-contents__link toc-highlight">Configuration Note</a></li></ul></li><li><a href="#micrometer" class="table-of-contents__link toc-highlight">Micrometer</a><ul><li><a href="#why-micrometer" class="table-of-contents__link toc-highlight">Why Micrometer?</a></li></ul></li><li><a href="#micrometer-transition-plan" class="table-of-contents__link toc-highlight">Micrometer Transition Plan</a><ul><li><a href="#current-state" class="table-of-contents__link toc-highlight">Current State</a></li><li><a href="#transition-state" class="table-of-contents__link toc-highlight">Transition State</a></li><li><a href="#future-state" class="table-of-contents__link toc-highlight">Future State</a></li></ul></li><li><a href="#dropwizard--jmx" class="table-of-contents__link toc-highlight">DropWizard &amp; JMX</a></li><li><a href="#health-check-endpoint" class="table-of-contents__link toc-highlight">Health check endpoint</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/quickstart">Quickstart</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://datahub.com/slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC3qFQC5IiwR5fvWEqi_tJ5w" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/datahub-project" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/townhalls">Town Halls</a></li><li class="footer__item"><a href="https://datahub.com/resources/?2004611554=dh-stories" target="_blank" rel="noopener noreferrer" class="footer__link-item">Customer Stories<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://demo.datahub.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Demo</a></li><li class="footer__item"><a href="https://feature-requests.datahubproject.io/roadmap" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roadmap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">Contributing</a></li><li class="footer__item"><a href="https://github.com/datahub-project/datahub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://feature-requests.datahubproject.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Feature Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2015-2025 DataHub Project Authors.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3c1f9b85.js"></script>
<script src="/assets/js/main.e25b3457.js"></script>
</body>
</html>