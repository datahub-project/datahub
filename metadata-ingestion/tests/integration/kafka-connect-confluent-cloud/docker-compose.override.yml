# SPDX-License-Identifier: Apache-2.0
#
# This file is unmodified from its original version developed by Acryl Data, Inc.,
# and is now included as part of a repository maintained by the National Digital Twin Programme.
# All support, maintenance and further development of this code is now the responsibility
# of the National Digital Twin Programme.

---
services:
  confluent-cloud-mock:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: test_confluent_cloud_mock
    hostname: confluent-cloud-mock
    ports:
      - "8888:8888"
    environment:
      - FLASK_ENV=production
      - PORT=8888
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8888/health || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s
    restart: on-failure:3