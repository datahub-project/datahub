# =============================================================================
# SQL Mode (Default) - Direct database connection
# =============================================================================
source:
  type: hive-metastore
  config:
    # Hive metastore DB connection
    host_port: localhost:5432
    database: metastore

    # specify the schema where metastore tables reside
    schema_pattern:
      allow:
        - "^public"

    # credentials
    username: user # optional
    password: pass # optional

    #scheme: 'postgresql+psycopg2' # set this if metastore db is using postgres
    #scheme: 'mysql+pymysql' # set this if metastore db is using mysql, default if unset

    # set this to have advanced filters on what to ingest
    #views_where_clause_suffix: AND d."name" in ('db1')
    #tables_where_clause_suffix: AND d."name" in ('db1')

    # Storage Lineage Configuration (Optional)
    # Enables lineage between Hive tables and their underlying storage locations
    #emit_storage_lineage: false  # Set to true to enable storage lineage
    #hive_storage_lineage_direction: upstream  # Direction: 'upstream' (storage -> Hive) or 'downstream' (Hive -> storage)
    #include_column_lineage: true  # Set to false to disable column-level lineage
    #storage_platform_instance: "prod-hdfs"  # Optional: platform instance for storage URNs

sink:
  # sink configs

# =============================================================================
# Thrift Mode - HMS Thrift API connection (use when database access unavailable)
# =============================================================================
# source:
#   type: hive-metastore
#   config:
#     connection_type: thrift  # Enable Thrift mode
#     host_port: hms.company.com:9083
#
#     # Kerberos authentication (optional)
#     use_kerberos: true
#     kerberos_service_name: hive
#     # kerberos_hostname_override: hms-internal.company.com  # If using load balancer
#
#     # HMS 3.x catalog support (optional)
#     # catalog_name: spark_catalog
#     # include_catalog_name_in_ids: true
#
#     # Filtering (WHERE clauses NOT supported in Thrift mode)
#     database_pattern:
#       allow:
#         - "^prod_.*"
#       deny:
#         - "^test_.*"
#
#     # Storage lineage works the same as SQL mode
#     emit_storage_lineage: true
#
# sink:
#   # sink configs