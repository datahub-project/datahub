source:
  type: "google-sheets"
  config:
    # Required: path to service account credentials JSON file
    credentials: "${GOOGLE_SHEETS_CREDENTIALS}"

    # Optional: platform instance for the Google Sheets source
    platform_instance: "${PLATFORM_INSTANCE}" # optional

    # Optional: specify patterns to include/exclude sheets
    sheet_patterns:
      allow:
        - ".*" # Include all sheets by default
      deny:
        - "^test_.*" # Exclude sheets starting with "test_"

    # Optional: specify patterns to include/exclude folders
    folder_patterns:
      allow:
        - ".*" # Include all folders by default
      deny: [] # No exclusions by default

    # Optional: extract usage statistics from Drive Activity API
    extract_usage_stats: true
    usage_stats_lookback_days: 30 # Number of days to look back for usage statistics

    # Optional: extract labels from Google Drive as tags
    extract_tags: true

    # Optional: extract named ranges as custom properties
    extract_named_ranges: false

    # Optional: lineage extraction configuration
    extract_lineage_from_formulas: true
    parse_sql_for_lineage: true # Use sqlglot for SQL parsing
    enable_cross_platform_lineage: true
    extract_column_level_lineage: true
    convert_lineage_urns_to_lowercase: true # Recommended for consistency

    # Optional: map database hostnames to platform instances for cross-platform lineage
    # database_hostname_to_platform_instance_map:
    #   "bigquery.googleapis.com": "prod"
    #   "snowflake.acme.com": "prod"

    # Optional: scan shared drives in addition to 'My Drive'
    scan_shared_drives: false

    # Optional: filter which Shared Drives to scan by name (only when scan_shared_drives=true)
    shared_drive_patterns:
      allow:
        - "Engineering*" # Include drives starting with "Engineering"
        - "Product Team"
      deny:
        - "*Archive*" # Exclude any drive with "Archive" in name
        - "*Old*"

    # Optional: configure header row detection
    header_detection_mode: "first_row" # Options: "first_row" (default), "auto_detect", "none"
    header_row_index: null # Explicit 0-based row index (overrides header_detection_mode if set)
    skip_empty_leading_rows: true # Skip empty rows before applying header detection

    # Optional: treat individual sheets as datasets
    # If true: each sheet within a Google Sheets document becomes a separate dataset
    # If false: each Google Sheets document is a dataset with sheets as fields
    sheets_as_datasets: false

    # Optional: API request configuration
    max_retries: 3
    retry_delay: 1 # seconds
    requests_per_second: null # Rate limit API requests (null = no limit)

    # Optional: incremental ingestion
    enable_incremental_ingestion: true # Only process sheets modified since last run

    # Optional: enable data profiling
    profiling:
      enabled: false # Set to true to enable profiling
      max_rows: 10000 # Maximum number of rows to profile per sheet
      include_field_null_count: true
      include_field_min_value: true
      include_field_max_value: true
      include_field_mean_value: true
      include_field_median_value: true
      include_field_stddev_value: true
      include_field_quantiles: true
      include_field_distinct_value_frequencies: true
      include_field_histogram: true
      include_field_sample_values: true
      max_number_of_fields_to_profile: null # Set a limit or null for all columns

    # Optional: stateful ingestion for detecting stale entities
    stateful_ingestion:
      enabled: false
      remove_stale_metadata: true
      fail_safe_threshold: 100.0
      state_provider:
        type: datahub
        config: {}
# sink configs
