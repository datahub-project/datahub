source:
  type: snowflake
  config:
    # This option is recommended to be used to ingest all lineage on the first run.
    ignore_start_time_lineage: true

    # Coordinates
    account_id: "abc48144"
    warehouse: "COMPUTE_WH"

    # Credentials
    username: "${SNOWFLAKE_USER}"
    password: "${SNOWFLAKE_PASS}"
    role: "datahub_role"

    # (Optional) Uncomment and update this section to filter ingested datasets 
    # database_pattern:
    #   allow:
    #     - "^ACCOUNTING_DB$"
    #     - "^MARKETING_DB$"

    profiling:
      # Change to false to disable profiling
      enabled: true
      # This option is recommended to reduce profiling time and costs.
      turn_off_expensive_profiling_metrics: true

    # (Optional) Uncomment and update this section to filter profiled tables
    # profile_pattern:
    #   allow:
    #   - "ACCOUNTING_DB.*.*"
    #   - "MARKETING_DB.*.*"

    # (Optional) Ingest INTERNAL marketplace (private data sharing) listings as Data Products
    # NOTE: This is for INTERNAL marketplace only, not the public Snowflake Data Marketplace
    # include_internal_marketplace: true
    # internal_marketplace_listing_pattern:
    #   allow: [".*"]
    # internal_marketplace_owner_patterns:
    #   "^Customer.*": ["data-team"]
    #   "^Finance.*": ["finance-team"]
    # fetch_internal_marketplace_listing_details: false
    # marketplace_properties_as_structured_properties: false
    
    # (Optional) Map data products to domains using purchased database names
    # domain:
    #   "urn:li:domain:finance":
    #     allow: ["^FINANCE_.*", "^FIN_.*"]
    #   "Marketing":
    #     allow: ["^MARKETING_.*", "^MKT_.*"]
    
    # (REQUIRED for marketplace) Link imported databases to their source shares/listings
    # Without this, Data Products will be created but won't have any associated datasets
    # Run: SHOW SHARES; and SELECT DATABASE_NAME FROM SNOWFLAKE.ACCOUNT_USAGE.DATABASES WHERE TYPE='IMPORTED DATABASE';
    # shares:
    #   <SHARE_NAME>:
    #     database: "<SOURCE_DATABASE>"  # Database in the share
    #     platform_instance: null
    #     consumers:
    #       - database: "<IMPORTED_DATABASE>"  # Your purchased/imported database
    #         platform_instance: null

# Default sink is datahub-rest and doesn't need to be configured
# See https://docs.datahub.com/docs/metadata-ingestion/sink_docs/datahub for customization options
