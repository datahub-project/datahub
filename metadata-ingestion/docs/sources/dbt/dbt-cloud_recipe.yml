# SPDX-License-Identifier: Apache-2.0
#
# This file is unmodified from its original version developed by Acryl Data, Inc.,
# and is now included as part of a repository maintained by the National Digital Twin Programme.
# All support, maintenance and further development of this code is now the responsibility
# of the National Digital Twin Programme.

source:
  type: "dbt-cloud"
  config:
    token: ${DBT_CLOUD_TOKEN}

    # In the URL https://cloud.getdbt.com/next/deploy/107298/projects/175705/jobs/148094,
    # 107298 is the account_id, 175705 is the project_id, and 148094 is the job_id

    account_id: "${DBT_ACCOUNT_ID}" # set to your dbt cloud account id
    project_id: "${DBT_PROJECT_ID}" # set to your dbt cloud project id

    # Mode 1: Explicit Mode (specify a single job)
    job_id: "${DBT_JOB_ID}" # set to your dbt cloud job id
    run_id: # optional: set to a specific dbt cloud run id. Defaults to the latest run

    # Mode 2: Auto-Discovery Mode (automatically discover all eligible jobs)
    # Uncomment the section below to enable auto-discovery
    # Note: When auto_discovery is enabled, job_id can be omitted (will be ignored if provided)
    # and run_id is ignored (always uses the latest run)
    # auto_discovery:
    #   enabled: true
    #   job_id_pattern: # optional
    #     allow:
    #       - ".*"  # regex pattern to include jobs (default: include all)
    #     # deny:
    #     #   - "test.*"  # optional: regex pattern to exclude specific jobs

    target_platform: "${TARGET_PLATFORM_ID}" # e.g. bigquery/postgres/snowflake/etc.

# sink configs
