"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[51555],{45735:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>g,toc:()=>p});t(96540);var a=t(15680),i=t(53720),s=t(5400);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function o(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}const d={sidebar_position:27,title:"Incident",slug:"/generated/metamodel/entities/incident",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/metamodel/entities/incident.md"},c="Incident",g={unversionedId:"docs/generated/metamodel/entities/incident",id:"docs/generated/metamodel/entities/incident",title:"Incident",description:"Incidents represent data quality issues, operational problems, or any other type of issue that affects data assets in DataHub. They provide a structured way to track, manage, and resolve problems across datasets, dashboards, charts, data flows, data jobs, and schema fields. Incidents help teams maintain data reliability by documenting problems, assigning responsibility, tracking resolution progress, and maintaining an audit trail of data quality events.",source:"@site/genDocs/docs/generated/metamodel/entities/incident.md",sourceDirName:"docs/generated/metamodel/entities",slug:"/generated/metamodel/entities/incident",permalink:"/docs/generated/metamodel/entities/incident",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/generated/metamodel/entities/incident.md",tags:[],version:"current",sidebarPosition:27,frontMatter:{sidebar_position:27,title:"Incident",slug:"/generated/metamodel/entities/incident",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/metamodel/entities/incident.md"},sidebar:"overviewSidebar",previous:{title:"VersionSet",permalink:"/docs/generated/metamodel/entities/versionset"},next:{title:"DataHubRole",permalink:"/docs/generated/metamodel/entities/datahubrole"}},u={},p=[{value:"Identity",id:"identity",level:2},{value:"Important Capabilities",id:"important-capabilities",level:2},{value:"Incident Types",id:"incident-types",level:3},{value:"Incident Status and Lifecycle",id:"incident-status-and-lifecycle",level:3},{value:"Status State",id:"status-state",level:4},{value:"Lifecycle Stages",id:"lifecycle-stages",level:4},{value:"Priority Levels",id:"priority-levels",level:3},{value:"Assignees",id:"assignees",level:3},{value:"Affected Entities",id:"affected-entities",level:3},{value:"Incident Source",id:"incident-source",level:3},{value:"Temporal Tracking",id:"temporal-tracking",level:3},{value:"Tags",id:"tags",level:3},{value:"Code Examples",id:"code-examples",level:2},{value:"Create an Incident",id:"create-an-incident",level:3},{value:"Update Incident Status",id:"update-incident-status",level:3},{value:"Add Tags to an Incident",id:"add-tags-to-an-incident",level:3},{value:"Query Incident via REST API",id:"query-incident-via-rest-api",level:3},{value:"Integration Points",id:"integration-points",level:2},{value:"Relationship with Assertions",id:"relationship-with-assertions",level:3},{value:"Incidents Summary on Assets",id:"incidents-summary-on-assets",level:3},{value:"GraphQL Operations",id:"graphql-operations",level:3},{value:"Authorization",id:"authorization",level:3},{value:"Health Status",id:"health-status",level:3},{value:"Notable Exceptions",id:"notable-exceptions",level:2},{value:"Single vs. Multiple Affected Entities",id:"single-vs-multiple-affected-entities",level:3},{value:"Priority Field Type",id:"priority-field-type",level:3},{value:"Automatic vs. Manual Incidents",id:"automatic-vs-manual-incidents",level:3},{value:"Status Message Length",id:"status-message-length",level:3},{value:"Incident Retention",id:"incident-retention",level:3},{value:"Technical Reference Guide",id:"technical-reference-guide",level:2},{value:"Reading the Field Tables",id:"reading-the-field-tables",level:3},{value:"Aspects",id:"aspects",level:3},{value:"incidentInfo",id:"incidentinfo",level:4},{value:"globalTags",id:"globaltags",level:4},{value:"Common Types",id:"common-types",level:3},{value:"AuditStamp",id:"auditstamp",level:4},{value:"Relationships",id:"relationships",level:3},{value:"Outgoing",id:"outgoing",level:4},{value:"Incoming",id:"incoming",level:4},{value:"Global Metadata Model",id:"global-metadata-model",level:3}],m={toc:p},y="wrapper";function h(e){var{components:n}=e,t=o(e,["components"]);return(0,a.yg)(y,l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){r(e,n,t[n])}))}return e}({},m,t),{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"incident"},"Incident"),(0,a.yg)("p",null,"Incidents represent data quality issues, operational problems, or any other type of issue that affects data assets in DataHub. They provide a structured way to track, manage, and resolve problems across datasets, dashboards, charts, data flows, data jobs, and schema fields. Incidents help teams maintain data reliability by documenting problems, assigning responsibility, tracking resolution progress, and maintaining an audit trail of data quality events."),(0,a.yg)("h2",{id:"identity"},"Identity"),(0,a.yg)("p",null,"Incidents are uniquely identified by a generated UUID string. Unlike most other DataHub entities that derive their identity from external systems, incidents are created within DataHub and assigned a unique identifier at creation time."),(0,a.yg)("p",null,"The URN structure for an incident is:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"urn:li:incident:<uuid>\n")),(0,a.yg)("p",null,"Example:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"urn:li:incident:a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d\n")),(0,a.yg)("p",null,"The UUID is automatically generated by the system when an incident is raised, ensuring global uniqueness across all incidents in the DataHub instance."),(0,a.yg)("h2",{id:"important-capabilities"},"Important Capabilities"),(0,a.yg)("h3",{id:"incident-types"},"Incident Types"),(0,a.yg)("p",null,"Incidents can be categorized by type to help teams understand the nature of the problem. DataHub supports several predefined incident types as well as custom types:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"FRESHNESS"),": Triggered when data is not updated within expected time windows. Often raised by freshness assertions that detect stale data."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"VOLUME"),": Raised when data volume falls outside expected ranges (too much or too little data). Typically generated by volume assertions."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"FIELD"),": Indicates issues with specific field values, such as null values, invalid formats, or values outside acceptable ranges. Associated with field-level assertions."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"SQL"),": Triggered by SQL-based assertions that validate data using custom queries."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"DATA_SCHEMA"),": Raised when schema changes are detected, such as column additions, removals, or type changes."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"OPERATIONAL"),": General operational incidents such as pipeline failures, permission issues, or system errors."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"CUSTOM"),": User-defined incident types for organization-specific problems. When using CUSTOM type, you must provide a ",(0,a.yg)("inlineCode",{parentName:"li"},"customType")," string to describe the incident category.")),(0,a.yg)("h3",{id:"incident-status-and-lifecycle"},"Incident Status and Lifecycle"),(0,a.yg)("p",null,"Incidents follow a lifecycle from creation through resolution, tracked through status and stage fields:"),(0,a.yg)("h4",{id:"status-state"},"Status State"),(0,a.yg)("p",null,"The top-level state indicates whether an incident is active or resolved:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"ACTIVE"),": The incident is ongoing and requires attention or action."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"RESOLVED"),": The incident has been addressed and is no longer active.")),(0,a.yg)("h4",{id:"lifecycle-stages"},"Lifecycle Stages"),(0,a.yg)("p",null,"Incidents can be assigned to specific stages that represent where they are in the resolution process:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"TRIAGE"),": The impact and priority of the incident is being actively assessed. This is typically the first stage for newly reported incidents."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"INVESTIGATION"),": The root cause of the incident is being investigated by the assigned team."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"WORK_IN_PROGRESS"),": The incident is in the remediation stage, with active work happening to resolve the issue."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"FIXED"),": The incident has been resolved through corrective action (completed remediation)."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"NO_ACTION_REQUIRED"),": The incident is resolved with no action required, for example if it was a false positive, expected behavior, or resolved itself.")),(0,a.yg)("p",null,"The status also includes a ",(0,a.yg)("inlineCode",{parentName:"p"},"message")," field for providing context about the current state and a ",(0,a.yg)("inlineCode",{parentName:"p"},"lastUpdated")," timestamp tracking when the status was last modified."),(0,a.yg)("h3",{id:"priority-levels"},"Priority Levels"),(0,a.yg)("p",null,"Incidents can be assigned a priority to help teams triage and focus on the most critical issues:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"CRITICAL")," (priority 0): Severe issues requiring immediate attention that significantly impact business operations or data quality."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"HIGH")," (priority 1): Important issues that should be addressed promptly but are not immediately blocking."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"MEDIUM")," (priority 2): Moderate issues that should be addressed in the normal course of work."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"LOW")," (priority 3): Minor issues that can be addressed when time permits.")),(0,a.yg)("p",null,"The priority field is stored as an integer (0-3) in the data model, allowing for programmatic sorting and filtering."),(0,a.yg)("h3",{id:"assignees"},"Assignees"),(0,a.yg)("p",null,"Incidents can be assigned to one or more users or groups responsible for investigating and resolving the issue. Each assignee includes:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"actor"),": The URN of the user (corpUser) or group (corpGroup) assigned to the incident."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"assignedAt"),": An audit stamp capturing who made the assignment and when it occurred.")),(0,a.yg)("p",null,"Multiple assignees can collaborate on resolving a single incident, making it easy to involve cross-functional teams."),(0,a.yg)("h3",{id:"affected-entities"},"Affected Entities"),(0,a.yg)("p",null,"A key feature of incidents is the ability to link them to one or more affected data assets. The ",(0,a.yg)("inlineCode",{parentName:"p"},"entities")," field contains an array of URNs referencing the assets impacted by the incident. Supported entity types include:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"dataset"),": Tables, views, streams, or other data collections"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"chart"),": Data visualizations"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"dashboard"),": Dashboard pages containing multiple charts"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"dataFlow"),": Pipelines or workflows"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"dataJob"),": Individual tasks or jobs within a pipeline"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"schemaField"),": Specific fields/columns within a dataset")),(0,a.yg)("p",null,"This linkage allows users to see all incidents affecting a particular asset and understand the scope of an incident across multiple assets."),(0,a.yg)("h3",{id:"incident-source"},"Incident Source"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"source")," field tracks how the incident was created:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"MANUAL"),": The incident was manually created by a user through the UI or API."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"ASSERTION_FAILURE"),": The incident was automatically raised by a failed assertion. In this case, the ",(0,a.yg)("inlineCode",{parentName:"li"},"sourceUrn")," field contains the URN of the assertion that triggered the incident.")),(0,a.yg)("p",null,"This distinction helps teams understand which incidents require manual investigation versus those generated by automated monitoring."),(0,a.yg)("h3",{id:"temporal-tracking"},"Temporal Tracking"),(0,a.yg)("p",null,"Incidents maintain detailed temporal information:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"startedAt"),": The time when the incident actually began (may be earlier than when it was reported)."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"created"),": An audit stamp tracking who created the incident and when it was first reported."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"lastUpdated"),": An audit stamp on the status tracking the most recent status change.")),(0,a.yg)("p",null,"This temporal data helps teams understand incident timelines, calculate mean time to detection (MTTD), and mean time to resolution (MTTR)."),(0,a.yg)("h3",{id:"tags"},"Tags"),(0,a.yg)("p",null,"Like other DataHub entities, incidents can be tagged using the ",(0,a.yg)("inlineCode",{parentName:"p"},"globalTags")," aspect. Tags help categorize and filter incidents, making it easier to find related issues or analyze incident patterns by category."),(0,a.yg)("h2",{id:"code-examples"},"Code Examples"),(0,a.yg)("h3",{id:"create-an-incident"},"Create an Incident"),(0,a.yg)("p",null,"The following example demonstrates creating a new incident and associating it with a dataset that has a data quality issue."),(0,a.yg)("details",null,(0,a.yg)("summary",null,"Python SDK: Create a basic incident"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/incident_create.py\n# metadata-ingestion/examples/library/incident_create.py\nimport logging\nimport os\nimport uuid\n\nimport datahub.emitter.mce_builder as builder\nimport datahub.metadata.schema_classes as models\nfrom datahub.emitter.mcp import MetadataChangeProposalWrapper\nfrom datahub.emitter.rest_emitter import DatahubRestEmitter\nfrom datahub.metadata.urns import IncidentUrn\n\nlog = logging.getLogger(__name__)\nlogging.basicConfig(level=logging.INFO)\n\n# Configuration\ngms_endpoint = os.getenv("DATAHUB_GMS_URL", "http://localhost:8080")\ntoken = os.getenv("DATAHUB_GMS_TOKEN")\nemitter = DatahubRestEmitter(gms_server=gms_endpoint, token=token)\n\n# Generate a unique incident ID\nincident_id = str(uuid.uuid4())\nincident_urn = IncidentUrn(incident_id)\n\n# Create the dataset URN that this incident affects\ndataset_urn = builder.make_dataset_urn(\n    platform="snowflake", name="analytics.sales_fact", env="PROD"\n)\n\n# Get the current actor URN for audit stamps\nactor_urn = builder.make_user_urn("datahub")\naudit_stamp = models.AuditStampClass(\n    time=int(builder.get_sys_time() * 1000),\n    actor=actor_urn,\n)\n\n# Create the incident info aspect\nincident_info = models.IncidentInfoClass(\n    type=models.IncidentTypeClass.FRESHNESS,\n    title="Sales data not updated in 48 hours",\n    description="The sales_fact table has not been refreshed since 2023-10-15. Expected daily updates are missing, which may impact downstream reporting and dashboards.",\n    entities=[dataset_urn],\n    status=models.IncidentStatusClass(\n        state=models.IncidentStateClass.ACTIVE,\n        stage=models.IncidentStageClass.TRIAGE,\n        message="Investigating potential pipeline failure",\n        lastUpdated=audit_stamp,\n    ),\n    priority=0,  # CRITICAL priority (0=CRITICAL, 1=HIGH, 2=MEDIUM, 3=LOW)\n    source=models.IncidentSourceClass(type=models.IncidentSourceTypeClass.MANUAL),\n    created=audit_stamp,\n)\n\n# Create and emit the metadata change proposal\nmetadata_change_proposal = MetadataChangeProposalWrapper(\n    entityUrn=str(incident_urn),\n    aspect=incident_info,\n)\n\nemitter.emit(metadata_change_proposal)\nlog.info(f"Created incident {incident_urn} for dataset {dataset_urn}")\nlog.info(\n    f"Incident details: type={incident_info.type}, priority={incident_info.priority}, status={incident_info.status.state}"\n)\n\n'))),(0,a.yg)("h3",{id:"update-incident-status"},"Update Incident Status"),(0,a.yg)("p",null,"As incidents progress through their lifecycle, you'll need to update their status to reflect the current state and stage."),(0,a.yg)("details",null,(0,a.yg)("summary",null,"Python SDK: Update incident status and stage"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/incident_update_status.py\n# metadata-ingestion/examples/library/incident_update_status.py\nimport logging\n\nimport datahub.emitter.mce_builder as builder\nimport datahub.metadata.schema_classes as models\nfrom datahub.emitter.mcp import MetadataChangeProposalWrapper\nfrom datahub.emitter.rest_emitter import DatahubRestEmitter\nfrom datahub.ingestion.graph.client import DatahubClientConfig, DataHubGraph\nfrom datahub.metadata.urns import IncidentUrn\n\nlog = logging.getLogger(__name__)\nlogging.basicConfig(level=logging.INFO)\n\n# Configuration\ngms_endpoint = "http://localhost:8080"\nemitter = DatahubRestEmitter(gms_server=gms_endpoint, extra_headers={})\ngraph = DataHubGraph(DatahubClientConfig(server=gms_endpoint))\n\n# Specify the incident to update (use the incident ID from incident_create.py)\nincident_id = "a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d"\nincident_urn = IncidentUrn(incident_id)\n\n# Retrieve the current incident info to preserve other fields\ncurrent_incident_info = graph.get_aspect(\n    entity_urn=str(incident_urn),\n    aspect_type=models.IncidentInfoClass,\n)\n\nif not current_incident_info:\n    raise ValueError(f"Incident {incident_urn} not found")\n\n# Get the current actor URN for audit stamps\nactor_urn = builder.make_user_urn("jdoe")\naudit_stamp = models.AuditStampClass(\n    time=int(builder.get_sys_time() * 1000),\n    actor=actor_urn,\n)\n\n# Update the status to reflect progress in resolving the incident\ncurrent_incident_info.status = models.IncidentStatusClass(\n    state=models.IncidentStateClass.ACTIVE,\n    stage=models.IncidentStageClass.WORK_IN_PROGRESS,\n    message="Pipeline has been restarted. Monitoring for successful completion.",\n    lastUpdated=audit_stamp,\n)\n\n# Optionally update priority if severity assessment changed\ncurrent_incident_info.priority = (\n    1  # HIGH priority (0=CRITICAL, 1=HIGH, 2=MEDIUM, 3=LOW)\n)\n\n# Optionally assign team members to work on the incident\nassignee1 = models.IncidentAssigneeClass(\n    actor=builder.make_user_urn("jdoe"),\n    assignedAt=audit_stamp,\n)\nassignee2 = models.IncidentAssigneeClass(\n    actor=builder.make_user_urn("asmith"),\n    assignedAt=audit_stamp,\n)\ncurrent_incident_info.assignees = [assignee1, assignee2]\n\n# Create and emit the metadata change proposal\nmetadata_change_proposal = MetadataChangeProposalWrapper(\n    entityUrn=str(incident_urn),\n    aspect=current_incident_info,\n)\n\nemitter.emit(metadata_change_proposal)\nlog.info(\n    f"Updated incident {incident_urn} status to {current_incident_info.status.state}"\n)\nlog.info(\n    f"Status details: stage={current_incident_info.status.stage}, message={current_incident_info.status.message}"\n)\nlog.info(f"Priority updated to {current_incident_info.priority}")\nlog.info(f"Assigned to {len(current_incident_info.assignees)} team members")\n\n'))),(0,a.yg)("h3",{id:"add-tags-to-an-incident"},"Add Tags to an Incident"),(0,a.yg)("p",null,"Tags can be added to incidents to categorize them by team, system, severity, or any other organizational dimension."),(0,a.yg)("details",null,(0,a.yg)("summary",null,"Python SDK: Add a tag to an incident"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/incident_add_tag.py\n# metadata-ingestion/examples/library/incident_add_tag.py\nimport logging\n\nimport datahub.emitter.mce_builder as builder\nimport datahub.metadata.schema_classes as models\nfrom datahub.emitter.mcp import MetadataChangeProposalWrapper\nfrom datahub.emitter.rest_emitter import DatahubRestEmitter\nfrom datahub.ingestion.graph.client import DatahubClientConfig, DataHubGraph\nfrom datahub.metadata.urns import IncidentUrn\n\nlog = logging.getLogger(__name__)\nlogging.basicConfig(level=logging.INFO)\n\n# Configuration\ngms_endpoint = "http://localhost:8080"\nemitter = DatahubRestEmitter(gms_server=gms_endpoint, extra_headers={})\ngraph = DataHubGraph(DatahubClientConfig(server=gms_endpoint))\n\n# Specify the incident to tag (use the incident ID from incident_create.py)\nincident_id = "a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d"\nincident_urn = IncidentUrn(incident_id)\n\n# Create the tag URN\ntag_urn = builder.make_tag_urn("data-quality")\n\n# Get the current actor URN for audit stamps\nactor_urn = builder.make_user_urn("datahub")\naudit_stamp = models.AuditStampClass(\n    time=int(builder.get_sys_time() * 1000),\n    actor=actor_urn,\n)\n\n# Read current tags to preserve existing ones\ncurrent_tags = graph.get_aspect(\n    entity_urn=str(incident_urn),\n    aspect_type=models.GlobalTagsClass,\n)\n\n# Create tag association\ntag_association = models.TagAssociationClass(\n    tag=tag_urn,\n    context="incident_categorization",\n)\n\nif current_tags:\n    # Check if tag already exists\n    tag_exists = any(existing_tag.tag == tag_urn for existing_tag in current_tags.tags)\n    if not tag_exists:\n        current_tags.tags.append(tag_association)\n        updated_tags = current_tags\n    else:\n        log.info(f"Tag {tag_urn} already exists on incident {incident_urn}")\n        updated_tags = current_tags\nelse:\n    # No existing tags, create new GlobalTags aspect\n    updated_tags = models.GlobalTagsClass(tags=[tag_association])\n\n# Create and emit the metadata change proposal\nmetadata_change_proposal = MetadataChangeProposalWrapper(\n    entityUrn=str(incident_urn),\n    aspect=updated_tags,\n)\n\nemitter.emit(metadata_change_proposal)\nlog.info(f"Added tag {tag_urn} to incident {incident_urn}")\nlog.info(f"Incident now has {len(updated_tags.tags)} tag(s)")\n\n'))),(0,a.yg)("h3",{id:"query-incident-via-rest-api"},"Query Incident via REST API"),(0,a.yg)("p",null,"After creating incidents, you can retrieve them using the DataHub REST API to integrate with external monitoring or ticketing systems."),(0,a.yg)("details",null,(0,a.yg)("summary",null,"Query incident using REST API"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/incident_query_rest_api.py\n# metadata-ingestion/examples/library/incident_query_rest_api.py\nimport logging\nimport os\n\nimport requests\n\nimport datahub.metadata.schema_classes as models\nfrom datahub.ingestion.graph.client import DatahubClientConfig, DataHubGraph\nfrom datahub.metadata.urns import IncidentUrn\n\nlog = logging.getLogger(__name__)\nlogging.basicConfig(level=logging.INFO)\n\n# Configuration\ngms_endpoint = os.getenv("DATAHUB_GMS_URL", "http://localhost:8080")\ntoken = os.getenv("DATAHUB_GMS_TOKEN")\ngraph = DataHubGraph(DatahubClientConfig(server=gms_endpoint, token=token))\n\n# Specify the incident to query (use the incident ID from incident_create.py)\nincident_id = "a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d"\nincident_urn = IncidentUrn(incident_id)\n\n# Query the incident info aspect\nincident_info = graph.get_aspect(\n    entity_urn=str(incident_urn),\n    aspect_type=models.IncidentInfoClass,\n)\n\nif incident_info:\n    log.info(f"Incident: {incident_urn}")\n    log.info(f"  Type: {incident_info.type}")\n    log.info(f"  Title: {incident_info.title}")\n    log.info(f"  Description: {incident_info.description}")\n    log.info(f"  Priority: {incident_info.priority}")\n    log.info(f"  Status State: {incident_info.status.state}")\n    log.info(f"  Status Stage: {incident_info.status.stage}")\n    log.info(f"  Status Message: {incident_info.status.message}")\n    log.info(f"  Affected Entities: {len(incident_info.entities)}")\n    for entity_urn in incident_info.entities:\n        log.info(f"    - {entity_urn}")\n\n    if incident_info.assignees:\n        log.info(f"  Assignees: {len(incident_info.assignees)}")\n        for assignee in incident_info.assignees:\n            log.info(f"    - {assignee.actor}")\n\n    if incident_info.source:\n        log.info(f"  Source Type: {incident_info.source.type}")\n        if incident_info.source.sourceUrn:\n            log.info(f"  Source URN: {incident_info.source.sourceUrn}")\n\n    log.info(\n        f"  Created: {incident_info.created.time} by {incident_info.created.actor}"\n    )\n    log.info(\n        f"  Last Updated: {incident_info.status.lastUpdated.time} by {incident_info.status.lastUpdated.actor}"\n    )\nelse:\n    log.warning(f"Incident {incident_urn} not found")\n\n# Query the tags aspect\ntags = graph.get_aspect(\n    entity_urn=str(incident_urn),\n    aspect_type=models.GlobalTagsClass,\n)\n\nif tags:\n    log.info(f"  Tags: {len(tags.tags)}")\n    for tag_association in tags.tags:\n        log.info(f"    - {tag_association.tag}")\n\n# Alternative: Use the REST API directly with requests\n# This approach is useful for integration with external systems\n\n# Query incident entity using the REST API\nheaders = {"Content-Type": "application/json"}\nif token:\n    headers["Authorization"] = f"Bearer {token}"\n\nresponse = requests.get(\n    f"{gms_endpoint}/entities/{incident_urn}",\n    headers=headers,\n)\n\nif response.status_code == 200:\n    entity_data = response.json()\n    log.info("\\nREST API Response:")\n    log.info(f"  Entity URN: {entity_data.get(\'urn\')}")\n    log.info(f"  Aspects: {list(entity_data.get(\'aspects\', {}).keys())}")\nelse:\n    log.error(f"Failed to query incident via REST API: {response.status_code}")\n\n'))),(0,a.yg)("h2",{id:"integration-points"},"Integration Points"),(0,a.yg)("h3",{id:"relationship-with-assertions"},"Relationship with Assertions"),(0,a.yg)("p",null,"Incidents are tightly integrated with DataHub's assertion framework. When assertions (data quality checks) fail and are configured to raise incidents, they automatically create incident entities. These incidents:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Reference the assertion that triggered them via the ",(0,a.yg)("inlineCode",{parentName:"li"},"sourceUrn")," field"),(0,a.yg)("li",{parentName:"ul"},"Inherit the type from the assertion (FRESHNESS, VOLUME, FIELD, SQL, DATA_SCHEMA)"),(0,a.yg)("li",{parentName:"ul"},"Link to the assets being monitored by the assertion"),(0,a.yg)("li",{parentName:"ul"},"Can be configured at the assertion level to control whether failures generate incidents")),(0,a.yg)("p",null,"This integration provides automatic incident creation for monitored data quality checks."),(0,a.yg)("h3",{id:"incidents-summary-on-assets"},"Incidents Summary on Assets"),(0,a.yg)("p",null,"DataHub entities that can have incidents (datasets, dashboards, charts, dataFlows, dataJobs, schemaFields) include an ",(0,a.yg)("inlineCode",{parentName:"p"},"incidentsSummary")," aspect. This aspect provides:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"A count of active incidents affecting the entity"),(0,a.yg)("li",{parentName:"ul"},"A count of resolved incidents"),(0,a.yg)("li",{parentName:"ul"},"The priority breakdown of active incidents"),(0,a.yg)("li",{parentName:"ul"},"Quick access to incident details without querying the incident entities directly")),(0,a.yg)("p",null,"This summary appears in the UI on asset pages, giving users immediate visibility into data quality issues."),(0,a.yg)("h3",{id:"graphql-operations"},"GraphQL Operations"),(0,a.yg)("p",null,"The DataHub GraphQL API provides several operations for working with incidents:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"raiseIncident"),": Creates a new incident with specified type, priority, status, and affected entities"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"updateIncident"),": Updates incident properties including title, description, status, priority, assignees, and affected entities"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"updateIncidentStatus"),": Specifically updates the status state and stage of an incident"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"entityIncidents"),": Queries all incidents affecting a particular entity")),(0,a.yg)("p",null,"These operations are used by the DataHub UI and can be called directly by external applications."),(0,a.yg)("h3",{id:"authorization"},"Authorization"),(0,a.yg)("p",null,"Incident operations respect DataHub's authorization model. Users must have the ",(0,a.yg)("inlineCode",{parentName:"p"},"EDIT_ENTITY_INCIDENTS")," privilege on an entity to:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Create incidents affecting that entity"),(0,a.yg)("li",{parentName:"ul"},"Update incidents linked to that entity"),(0,a.yg)("li",{parentName:"ul"},"Change the status of incidents affecting that entity")),(0,a.yg)("p",null,"This ensures that only users with appropriate permissions can manage incidents for sensitive data assets."),(0,a.yg)("h3",{id:"health-status"},"Health Status"),(0,a.yg)("p",null,"Incidents factor into the overall health status of DataHub entities. Assets with active CRITICAL or HIGH priority incidents may be marked as unhealthy in the UI, helping users quickly identify problematic data assets."),(0,a.yg)("h2",{id:"notable-exceptions"},"Notable Exceptions"),(0,a.yg)("h3",{id:"single-vs-multiple-affected-entities"},"Single vs. Multiple Affected Entities"),(0,a.yg)("p",null,"While the data model supports incidents affecting multiple entities (via the ",(0,a.yg)("inlineCode",{parentName:"p"},"entities")," array), some GraphQL resolvers currently have limitations when working with multi-entity incidents. Specifically, the ",(0,a.yg)("inlineCode",{parentName:"p"},"UpdateIncidentStatusResolver")," currently only checks authorization against the first entity in the array. This is noted in the code as a TODO for future enhancement."),(0,a.yg)("p",null,"When creating incidents, it's recommended to:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Use multiple entities when they're all affected by the same root cause (e.g., all downstream datasets affected by an upstream data quality issue)"),(0,a.yg)("li",{parentName:"ul"},"Be aware that users need appropriate permissions on all affected entities to update the incident"),(0,a.yg)("li",{parentName:"ul"},"Consider the UI implications of multi-entity incidents when displaying incident details")),(0,a.yg)("h3",{id:"priority-field-type"},"Priority Field Type"),(0,a.yg)("p",null,"The priority field is stored as an integer (0-3) rather than as an enum in the PDL model. This was noted in the schema comments as a potential area for future improvement. The GraphQL layer provides an enum interface (CRITICAL, HIGH, MEDIUM, LOW) that maps to these integer values, but the underlying storage uses integers."),(0,a.yg)("p",null,"When working with the low-level SDK, use the integer values:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"0 = CRITICAL"),(0,a.yg)("li",{parentName:"ul"},"1 = HIGH"),(0,a.yg)("li",{parentName:"ul"},"2 = MEDIUM"),(0,a.yg)("li",{parentName:"ul"},"3 = LOW")),(0,a.yg)("h3",{id:"automatic-vs-manual-incidents"},"Automatic vs. Manual Incidents"),(0,a.yg)("p",null,"Incidents created automatically by assertion failures cannot have their ",(0,a.yg)("inlineCode",{parentName:"p"},"source")," field changed to MANUAL, and vice versa. The source field is set at creation time and reflects the origin of the incident. This distinction is important for reporting and analytics, as it helps teams understand the effectiveness of automated monitoring versus manual incident reporting."),(0,a.yg)("h3",{id:"status-message-length"},"Status Message Length"),(0,a.yg)("p",null,"While there is no explicit length limit on the status ",(0,a.yg)("inlineCode",{parentName:"p"},"message")," field in the schema, UI components may truncate very long messages. It's recommended to keep status messages concise (under 500 characters) and use the incident ",(0,a.yg)("inlineCode",{parentName:"p"},"description")," field for longer explanations."),(0,a.yg)("h3",{id:"incident-retention"},"Incident Retention"),(0,a.yg)("p",null,"Incidents are not automatically deleted when their affected entities are removed. This preserves the historical record of data quality issues even after assets are deprecated or deleted. However, this can lead to orphaned incidents that reference non-existent entities. It's recommended to implement cleanup processes for incidents linked to deleted assets if this becomes an issue in your organization."),(0,a.yg)("h2",{id:"technical-reference-guide"},"Technical Reference Guide"),(0,a.yg)("p",null,"The sections above provide an overview of how to use this entity. The following sections provide detailed technical information about how metadata is stored and represented in DataHub."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Aspects")," are the individual pieces of metadata that can be attached to an entity. Each aspect contains specific information (like ownership, tags, or properties) and is stored as a separate record, allowing for flexible and incremental metadata updates."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Relationships")," show how this entity connects to other entities in the metadata graph. These connections are derived from the fields within each aspect and form the foundation of DataHub's knowledge graph."),(0,a.yg)("h3",{id:"reading-the-field-tables"},"Reading the Field Tables"),(0,a.yg)("p",null,"Each aspect's field table includes an ",(0,a.yg)("strong",{parentName:"p"},"Annotations")," column that provides additional metadata about how fields are used:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"\u26a0\ufe0f Deprecated"),": This field is deprecated and may be removed in a future version. Check the description for the recommended alternative"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Searchable"),": This field is indexed and can be searched in DataHub's search interface"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Searchable (fieldname)"),": When the field name in parentheses is shown, it indicates the field is indexed under a different name in the search index. For example, ",(0,a.yg)("inlineCode",{parentName:"li"},"dashboardTool")," is indexed as ",(0,a.yg)("inlineCode",{parentName:"li"},"tool")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"\u2192 RelationshipName"),": This field creates a relationship to another entity. The arrow indicates this field contains a reference (URN) to another entity, and the name indicates the type of relationship (e.g., ",(0,a.yg)("inlineCode",{parentName:"li"},"\u2192 Contains"),", ",(0,a.yg)("inlineCode",{parentName:"li"},"\u2192 OwnedBy"),")")),(0,a.yg)("p",null,"Fields with complex types (like ",(0,a.yg)("inlineCode",{parentName:"p"},"Edge"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"AuditStamp"),") link to their definitions in the ",(0,a.yg)("a",{parentName:"p",href:"#common-types"},"Common Types")," section below."),(0,a.yg)("h3",{id:"aspects"},"Aspects"),(0,a.yg)("h4",{id:"incidentinfo"},"incidentInfo"),(0,a.yg)("p",null,"Information about an incident raised on an asset."),(0,a.yg)(i.A,{mdxType:"Tabs"},(0,a.yg)(s.A,{value:"fields",label:"Fields",default:!0,mdxType:"TabItem"},(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Field"),(0,a.yg)("th",{parentName:"tr",align:null},"Type"),(0,a.yg)("th",{parentName:"tr",align:null},"Required"),(0,a.yg)("th",{parentName:"tr",align:null},"Description"),(0,a.yg)("th",{parentName:"tr",align:null},"Annotations"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"type"),(0,a.yg)("td",{parentName:"tr",align:null},"IncidentType"),(0,a.yg)("td",{parentName:"tr",align:null},"\u2713"),(0,a.yg)("td",{parentName:"tr",align:null},"The type of incident"),(0,a.yg)("td",{parentName:"tr",align:null},"Searchable")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"customType"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"An optional custom incident type. Present only if type is 'CUSTOM'."),(0,a.yg)("td",{parentName:"tr",align:null},"Searchable")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"title"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"Optional title associated with the incident"),(0,a.yg)("td",{parentName:"tr",align:null})),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"description"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"Optional description associated with the incident"),(0,a.yg)("td",{parentName:"tr",align:null})),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"entities"),(0,a.yg)("td",{parentName:"tr",align:null},"string[]"),(0,a.yg)("td",{parentName:"tr",align:null},"\u2713"),(0,a.yg)("td",{parentName:"tr",align:null},"A reference to the entity associated with the incident."),(0,a.yg)("td",{parentName:"tr",align:null},"Searchable, \u2192 IncidentOn")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"priority"),(0,a.yg)("td",{parentName:"tr",align:null},"int"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"A numeric severity or priority for the incident. On the UI we will translate this into something ..."),(0,a.yg)("td",{parentName:"tr",align:null},"Searchable")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"assignees"),(0,a.yg)("td",{parentName:"tr",align:null},"IncidentAssignee[]"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"The parties assigned with resolving the incident"),(0,a.yg)("td",{parentName:"tr",align:null})),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"status"),(0,a.yg)("td",{parentName:"tr",align:null},"IncidentStatus"),(0,a.yg)("td",{parentName:"tr",align:null},"\u2713"),(0,a.yg)("td",{parentName:"tr",align:null},"The current status of an incident, i.e. active or inactive."),(0,a.yg)("td",{parentName:"tr",align:null})),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"source"),(0,a.yg)("td",{parentName:"tr",align:null},"IncidentSource"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"The source of an incident, i.e. how it was generated."),(0,a.yg)("td",{parentName:"tr",align:null})),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"startedAt"),(0,a.yg)("td",{parentName:"tr",align:null},"long"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"The time at which the incident actually started (may be before the date it was raised)."),(0,a.yg)("td",{parentName:"tr",align:null},"Searchable")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"created"),(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"#auditstamp"},"AuditStamp")),(0,a.yg)("td",{parentName:"tr",align:null},"\u2713"),(0,a.yg)("td",{parentName:"tr",align:null},"The time at which the request was initially created"),(0,a.yg)("td",{parentName:"tr",align:null},"Searchable"))))),(0,a.yg)(s.A,{value:"raw",label:"Raw Schema",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},'{\n  "type": "record",\n  "Aspect": {\n    "name": "incidentInfo"\n  },\n  "name": "IncidentInfo",\n  "namespace": "com.linkedin.incident",\n  "fields": [\n    {\n      "Searchable": {\n        "addToFilters": true,\n        "filterNameOverride": "Type"\n      },\n      "type": {\n        "type": "enum",\n        "symbolDocs": {\n          "CUSTOM": "A custom type of incident",\n          "DATA_SCHEMA": "A Data Schema assertion has failed, triggering the incident.\\nRaised on entities where assertions are configured to generate incidents.",\n          "FIELD": "A Field Assertion has failed, triggering the incident.\\nRaised on entities where assertions are configured to generate incidents.",\n          "FRESHNESS": "An Freshness Assertion has failed, triggering the incident.\\nRaised on entities where assertions are configured to generate incidents.",\n          "OPERATIONAL": "A misc. operational incident, e.g. failure to materialize a dataset.",\n          "SQL": "A raw SQL-statement based assertion has failed, triggering the incident.\\nRaised on entities where assertions are configured to generate incidents.",\n          "VOLUME": "An Volume Assertion has failed, triggering the incident.\\nRaised on entities where assertions are configured to generate incidents."\n        },\n        "name": "IncidentType",\n        "namespace": "com.linkedin.incident",\n        "symbols": [\n          "FRESHNESS",\n          "VOLUME",\n          "FIELD",\n          "SQL",\n          "DATA_SCHEMA",\n          "OPERATIONAL",\n          "CUSTOM"\n        ],\n        "doc": "A type of asset incident"\n      },\n      "name": "type",\n      "doc": "The type of incident"\n    },\n    {\n      "Searchable": {\n        "addToFilters": true,\n        "filterNameOverride": "Other Type"\n      },\n      "type": [\n        "null",\n        "string"\n      ],\n      "name": "customType",\n      "default": null,\n      "doc": "An optional custom incident type. Present only if type is \'CUSTOM\'."\n    },\n    {\n      "type": [\n        "null",\n        "string"\n      ],\n      "name": "title",\n      "default": null,\n      "doc": "Optional title associated with the incident"\n    },\n    {\n      "type": [\n        "null",\n        "string"\n      ],\n      "name": "description",\n      "default": null,\n      "doc": "Optional description associated with the incident"\n    },\n    {\n      "Relationship": {\n        "/*": {\n          "entityTypes": [\n            "dataset",\n            "chart",\n            "dashboard",\n            "dataFlow",\n            "dataJob",\n            "schemaField"\n          ],\n          "name": "IncidentOn"\n        }\n      },\n      "Searchable": {\n        "/*": {\n          "fieldType": "URN"\n        }\n      },\n      "type": {\n        "type": "array",\n        "items": "string"\n      },\n      "name": "entities",\n      "doc": "A reference to the entity associated with the incident."\n    },\n    {\n      "Searchable": {\n        "addToFilters": true,\n        "filterNameOverride": "Priority"\n      },\n      "type": [\n        "null",\n        "int"\n      ],\n      "name": "priority",\n      "default": null,\n      "doc": "A numeric severity or priority for the incident. On the UI we will translate this into something easy to understand.\\nCurrently supported: 0 - CRITICAL, 1 - HIGH, 2 - MED, 3 - LOW\\n(We probably should have modeled as an enum)"\n    },\n    {\n      "type": [\n        "null",\n        {\n          "type": "array",\n          "items": {\n            "type": "record",\n            "name": "IncidentAssignee",\n            "namespace": "com.linkedin.incident",\n            "fields": [\n              {\n                "Searchable": {\n                  "addToFilters": true,\n                  "fieldName": "assignees",\n                  "filterNameOverride": "Assignee"\n                },\n                "java": {\n                  "class": "com.linkedin.common.urn.Urn"\n                },\n                "type": "string",\n                "name": "actor",\n                "doc": "The user or group assigned to the incident."\n              },\n              {\n                "type": {\n                  "type": "record",\n                  "name": "AuditStamp",\n                  "namespace": "com.linkedin.common",\n                  "fields": [\n                    {\n                      "type": "long",\n                      "name": "time",\n                      "doc": "When did the resource/association/sub-resource move into the specific lifecycle stage represented by this AuditEvent."\n                    },\n                    {\n                      "java": {\n                        "class": "com.linkedin.common.urn.Urn"\n                      },\n                      "type": "string",\n                      "name": "actor",\n                      "doc": "The entity (e.g. a member URN) which will be credited for moving the resource/association/sub-resource into the specific lifecycle stage. It is also the one used to authorize the change."\n                    },\n                    {\n                      "java": {\n                        "class": "com.linkedin.common.urn.Urn"\n                      },\n                      "type": [\n                        "null",\n                        "string"\n                      ],\n                      "name": "impersonator",\n                      "default": null,\n                      "doc": "The entity (e.g. a service URN) which performs the change on behalf of the Actor and must be authorized to act as the Actor."\n                    },\n                    {\n                      "type": [\n                        "null",\n                        "string"\n                      ],\n                      "name": "message",\n                      "default": null,\n                      "doc": "Additional context around how DataHub was informed of the particular change. For example: was the change created by an automated process, or manually."\n                    }\n                  ],\n                  "doc": "Data captured on a resource/association/sub-resource level giving insight into when that resource/association/sub-resource moved into a particular lifecycle stage, and who acted to move it into that specific lifecycle stage."\n                },\n                "name": "assignedAt",\n                "doc": "The time & actor responsible for assiging the assignee."\n              }\n            ],\n            "doc": "The incident assignee type.\\nThis is in a record so that we can add additional fields if we need to later (e.g.\\nthe type of the assignee."\n          }\n        }\n      ],\n      "name": "assignees",\n      "default": null,\n      "doc": "The parties assigned with resolving the incident"\n    },\n    {\n      "type": {\n        "type": "record",\n        "name": "IncidentStatus",\n        "namespace": "com.linkedin.incident",\n        "fields": [\n          {\n            "Searchable": {\n              "addToFilters": true,\n              "filterNameOverride": "Status"\n            },\n            "type": {\n              "type": "enum",\n              "symbolDocs": {\n                "ACTIVE": "The incident is ongoing, or active.",\n                "RESOLVED": "The incident is resolved."\n              },\n              "name": "IncidentState",\n              "namespace": "com.linkedin.incident",\n              "symbols": [\n                "ACTIVE",\n                "RESOLVED"\n              ]\n            },\n            "name": "state",\n            "doc": "The top-level state of the incident, whether it\'s active or resolved."\n          },\n          {\n            "Searchable": {\n              "addToFilters": true,\n              "filterNameOverride": "Stage"\n            },\n            "type": [\n              "null",\n              {\n                "type": "enum",\n                "symbolDocs": {\n                  "FIXED": "The incident is in the resolved as completed stage.",\n                  "INVESTIGATION": "The incident root cause is being investigated.",\n                  "NO_ACTION_REQUIRED": "The incident is in the resolved with no action required state, e.g. the\\nincident was a false positive, or was expected.",\n                  "TRIAGE": "The impact and priority of the incident is being actively assessed.",\n                  "WORK_IN_PROGRESS": "The incident is in the remediation stage."\n                },\n                "name": "IncidentStage",\n                "namespace": "com.linkedin.incident",\n                "symbols": [\n                  "TRIAGE",\n                  "INVESTIGATION",\n                  "WORK_IN_PROGRESS",\n                  "FIXED",\n                  "NO_ACTION_REQUIRED"\n                ]\n              }\n            ],\n            "name": "stage",\n            "default": null,\n            "doc": "The lifecycle stage for the incident - Null means no stage was assigned yet.\\nIn the future, we may add CUSTOM here with a customStage string field for user-defined stages."\n          },\n          {\n            "type": [\n              "null",\n              "string"\n            ],\n            "name": "message",\n            "default": null,\n            "doc": "Optional message associated with the incident"\n          },\n          {\n            "Searchable": {\n              "/time": {\n                "fieldName": "lastUpdated",\n                "fieldType": "COUNT"\n              }\n            },\n            "type": "com.linkedin.common.AuditStamp",\n            "name": "lastUpdated",\n            "doc": "The time at which the request was initially created"\n          }\n        ],\n        "doc": "Information about an incident raised on an asset"\n      },\n      "name": "status",\n      "doc": "The current status of an incident, i.e. active or inactive."\n    },\n    {\n      "type": [\n        "null",\n        {\n          "type": "record",\n          "Aspect": {\n            "name": "incidentSource"\n          },\n          "name": "IncidentSource",\n          "namespace": "com.linkedin.incident",\n          "fields": [\n            {\n              "Searchable": {\n                "addToFilters": true,\n                "filterNameOverride": "Source"\n              },\n              "type": {\n                "type": "enum",\n                "symbolDocs": {\n                  "ASSERTION_FAILURE": "An assertion has failed, triggering the incident.",\n                  "MANUAL": "Manually created incident, via UI or API."\n                },\n                "name": "IncidentSourceType",\n                "namespace": "com.linkedin.incident",\n                "symbols": [\n                  "MANUAL",\n                  "ASSERTION_FAILURE"\n                ]\n              },\n              "name": "type",\n              "doc": "Message associated with the incident"\n            },\n            {\n              "Searchable": {\n                "fieldType": "URN"\n              },\n              "java": {\n                "class": "com.linkedin.common.urn.Urn"\n              },\n              "type": [\n                "null",\n                "string"\n              ],\n              "name": "sourceUrn",\n              "default": null,\n              "doc": "Reference to an URN related to the source of an incident."\n            }\n          ],\n          "doc": "Information about the source of an incident raised on an asset."\n        }\n      ],\n      "name": "source",\n      "default": null,\n      "doc": "The source of an incident, i.e. how it was generated."\n    },\n    {\n      "Searchable": {\n        "/time": {\n          "fieldName": "startedAt",\n          "fieldType": "COUNT"\n        }\n      },\n      "type": [\n        "null",\n        "long"\n      ],\n      "name": "startedAt",\n      "default": null,\n      "doc": "The time at which the incident actually started (may be before the date it was raised)."\n    },\n    {\n      "Searchable": {\n        "/time": {\n          "fieldName": "created",\n          "fieldType": "COUNT"\n        }\n      },\n      "type": "com.linkedin.common.AuditStamp",\n      "name": "created",\n      "doc": "The time at which the request was initially created"\n    }\n  ],\n  "doc": "Information about an incident raised on an asset."\n}\n')))),(0,a.yg)("h4",{id:"globaltags"},"globalTags"),(0,a.yg)("p",null,"Tag aspect used for applying tags to an entity"),(0,a.yg)(i.A,{mdxType:"Tabs"},(0,a.yg)(s.A,{value:"fields",label:"Fields",default:!0,mdxType:"TabItem"},(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Field"),(0,a.yg)("th",{parentName:"tr",align:null},"Type"),(0,a.yg)("th",{parentName:"tr",align:null},"Required"),(0,a.yg)("th",{parentName:"tr",align:null},"Description"),(0,a.yg)("th",{parentName:"tr",align:null},"Annotations"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"tags"),(0,a.yg)("td",{parentName:"tr",align:null},"TagAssociation[]"),(0,a.yg)("td",{parentName:"tr",align:null},"\u2713"),(0,a.yg)("td",{parentName:"tr",align:null},"Tags associated with a given entity"),(0,a.yg)("td",{parentName:"tr",align:null},"Searchable, \u2192 TaggedWith"))))),(0,a.yg)(s.A,{value:"raw",label:"Raw Schema",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},'{\n  "type": "record",\n  "Aspect": {\n    "name": "globalTags"\n  },\n  "name": "GlobalTags",\n  "namespace": "com.linkedin.common",\n  "fields": [\n    {\n      "Relationship": {\n        "/*/tag": {\n          "entityTypes": [\n            "tag"\n          ],\n          "name": "TaggedWith"\n        }\n      },\n      "Searchable": {\n        "/*/tag": {\n          "addToFilters": true,\n          "boostScore": 0.5,\n          "fieldName": "tags",\n          "fieldType": "URN",\n          "filterNameOverride": "Tagged With",\n          "hasValuesFieldName": "hasTags",\n          "queryByDefault": true,\n          "searchTier": 2\n        }\n      },\n      "type": {\n        "type": "array",\n        "items": {\n          "type": "record",\n          "name": "TagAssociation",\n          "namespace": "com.linkedin.common",\n          "fields": [\n            {\n              "java": {\n                "class": "com.linkedin.common.urn.TagUrn"\n              },\n              "type": "string",\n              "name": "tag",\n              "doc": "Urn of the applied tag"\n            },\n            {\n              "type": [\n                "null",\n                "string"\n              ],\n              "name": "context",\n              "default": null,\n              "doc": "Additional context about the association"\n            },\n            {\n              "Searchable": {\n                "/actor": {\n                  "fieldName": "tagAttributionActors",\n                  "fieldType": "URN",\n                  "queryByDefault": false\n                },\n                "/source": {\n                  "fieldName": "tagAttributionSources",\n                  "fieldType": "URN",\n                  "queryByDefault": false\n                },\n                "/time": {\n                  "fieldName": "tagAttributionDates",\n                  "fieldType": "DATETIME",\n                  "queryByDefault": false\n                }\n              },\n              "type": [\n                "null",\n                {\n                  "type": "record",\n                  "name": "MetadataAttribution",\n                  "namespace": "com.linkedin.common",\n                  "fields": [\n                    {\n                      "type": "long",\n                      "name": "time",\n                      "doc": "When this metadata was updated."\n                    },\n                    {\n                      "java": {\n                        "class": "com.linkedin.common.urn.Urn"\n                      },\n                      "type": "string",\n                      "name": "actor",\n                      "doc": "The entity (e.g. a member URN) responsible for applying the assocated metadata. This can\\neither be a user (in case of UI edits) or the datahub system for automation."\n                    },\n                    {\n                      "java": {\n                        "class": "com.linkedin.common.urn.Urn"\n                      },\n                      "type": [\n                        "null",\n                        "string"\n                      ],\n                      "name": "source",\n                      "default": null,\n                      "doc": "The DataHub source responsible for applying the associated metadata. This will only be filled out\\nwhen a DataHub source is responsible. This includes the specific metadata test urn, the automation urn."\n                    },\n                    {\n                      "type": {\n                        "type": "map",\n                        "values": "string"\n                      },\n                      "name": "sourceDetail",\n                      "default": {},\n                      "doc": "The details associated with why this metadata was applied. For example, this could include\\nthe actual regex rule, sql statement, ingestion pipeline ID, etc."\n                    }\n                  ],\n                  "doc": "Information about who, why, and how this metadata was applied"\n                }\n              ],\n              "name": "attribution",\n              "default": null,\n              "doc": "Information about who, why, and how this metadata was applied"\n            }\n          ],\n          "doc": "Properties of an applied tag. For now, just an Urn. In the future we can extend this with other properties, e.g.\\npropagation parameters."\n        }\n      },\n      "name": "tags",\n      "doc": "Tags associated with a given entity"\n    }\n  ],\n  "doc": "Tag aspect used for applying tags to an entity"\n}\n')))),(0,a.yg)("h3",{id:"common-types"},"Common Types"),(0,a.yg)("p",null,"These types are used across multiple aspects in this entity."),(0,a.yg)("h4",{id:"auditstamp"},"AuditStamp"),(0,a.yg)("p",null,"Data captured on a resource/association/sub-resource level giving insight into when that resource/association/sub-resource moved into a particular lifecycle stage, and who acted to move it into that specific lifecycle stage."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Fields:")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"time")," (long): When did the resource/association/sub-resource move into the specific lifecyc..."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"actor")," (string): The entity (e.g. a member URN) which will be credited for moving the resource..."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"impersonator")," (string?): The entity (e.g. a service URN) which performs the change on behalf of the Ac..."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"message")," (string?): Additional context around how DataHub was informed of the particular change. ...")),(0,a.yg)("h3",{id:"relationships"},"Relationships"),(0,a.yg)("h4",{id:"outgoing"},"Outgoing"),(0,a.yg)("p",null,"These are the relationships stored in this entity's aspects"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"IncidentOn"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Dataset via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentInfo.entities")),(0,a.yg)("li",{parentName:"ul"},"Chart via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentInfo.entities")),(0,a.yg)("li",{parentName:"ul"},"Dashboard via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentInfo.entities")),(0,a.yg)("li",{parentName:"ul"},"DataFlow via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentInfo.entities")),(0,a.yg)("li",{parentName:"ul"},"DataJob via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentInfo.entities")),(0,a.yg)("li",{parentName:"ul"},"SchemaField via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentInfo.entities")))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"TaggedWith"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Tag via ",(0,a.yg)("inlineCode",{parentName:"li"},"globalTags.tags"))))),(0,a.yg)("h4",{id:"incoming"},"Incoming"),(0,a.yg)("p",null,"These are the relationships stored in other entity's aspects"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"ResolvedIncidents"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Dataset via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.resolvedIncidentDetails")),(0,a.yg)("li",{parentName:"ul"},"DataJob via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.resolvedIncidentDetails")),(0,a.yg)("li",{parentName:"ul"},"DataFlow via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.resolvedIncidentDetails")),(0,a.yg)("li",{parentName:"ul"},"Chart via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.resolvedIncidentDetails")),(0,a.yg)("li",{parentName:"ul"},"Dashboard via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.resolvedIncidentDetails")))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"ActiveIncidents"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Dataset via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.activeIncidentDetails")),(0,a.yg)("li",{parentName:"ul"},"DataJob via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.activeIncidentDetails")),(0,a.yg)("li",{parentName:"ul"},"DataFlow via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.activeIncidentDetails")),(0,a.yg)("li",{parentName:"ul"},"Chart via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.activeIncidentDetails")),(0,a.yg)("li",{parentName:"ul"},"Dashboard via ",(0,a.yg)("inlineCode",{parentName:"li"},"incidentsSummary.activeIncidentDetails"))))),(0,a.yg)("h3",{id:"global-metadata-model"},(0,a.yg)("a",{parentName:"h3",href:"https://github.com/datahub-project/static-assets/raw/main/imgs/datahub-metadata-model.png"},"Global Metadata Model")),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://github.com/datahub-project/static-assets/raw/main/imgs/datahub-metadata-model.png",alt:"Global Graph"})))}h.isMDXComponent=!0}}]);