"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[25623],{7653:(e,t,r)=>{r.d(t,{A:()=>a});const a={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"}},4732:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(89379),n=r(96540),o=r(7653),s=r(89990),i=function(e,t){return n.createElement(s.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:o.A}))};const l=n.forwardRef(i)},15680:(e,t,r)=>{r.d(t,{xA:()=>c,yg:()=>y});var a=r(96540);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),u=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=u(r),p=n,y=d["".concat(l,".").concat(p)]||d[p]||b[p]||o;return r?a.createElement(y,s(s({ref:t},c),{},{components:r})):a.createElement(y,s({ref:t},c))}));function y(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:n,s[1]=i;for(var u=2;u<o;u++)s[u]=r[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}p.displayName="MDXCreateElement"},43655:(e,t,r)=>{r.d(t,{A:()=>h});var a=r(96540),n=r(20053);const o="availabilityCard_P5od",s="managedIcon_AxXO",i="platform_wqXv",l="platformAvailable_Y8lN";var u=r(4732),c=r(89379);const d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var b=r(89990),p=function(e,t){return a.createElement(b.A,(0,c.A)((0,c.A)({},e),{},{ref:t,icon:d}))};const y=a.forwardRef(p);const m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"};var f=function(e,t){return a.createElement(b.A,(0,c.A)((0,c.A)({},e),{},{ref:t,icon:m}))};const g=a.forwardRef(f),h=({saasOnly:e,ossOnly:t})=>a.createElement("div",{className:(0,n.A)(o,"card")},a.createElement("strong",null,"Feature Availability"),a.createElement("div",null,a.createElement("span",{className:(0,n.A)(i,!e&&l)},"Self-Hosted DataHub ",e?a.createElement(u.A,null):a.createElement(y,null))),a.createElement("div",null,a.createElement(g,{className:s}),a.createElement("span",{className:(0,n.A)(i,!t&&l)},"DataHub Cloud ",t?a.createElement(u.A,null):a.createElement(y,null))))},28756:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>b});r(96540);var a=r(15680),n=r(43655);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const l={description:"Learn how to attribute queries to DataHub Cloud Observe to better track costs",title:"Assertion Query Attribution",slug:"/managed-datahub/observe/assertion-query-attribution",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/observe/assertion-query-attribution.md"},u="Assertion Query Attribution",c={unversionedId:"docs/managed-datahub/observe/assertion-query-attribution",id:"docs/managed-datahub/observe/assertion-query-attribution",title:"Assertion Query Attribution",description:"Learn how to attribute queries to DataHub Cloud Observe to better track costs",source:"@site/genDocs/docs/managed-datahub/observe/assertion-query-attribution.md",sourceDirName:"docs/managed-datahub/observe",slug:"/managed-datahub/observe/assertion-query-attribution",permalink:"/docs/managed-datahub/observe/assertion-query-attribution",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/observe/assertion-query-attribution.md",tags:[],version:"current",frontMatter:{description:"Learn how to attribute queries to DataHub Cloud Observe to better track costs",title:"Assertion Query Attribution",slug:"/managed-datahub/observe/assertion-query-attribution",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/observe/assertion-query-attribution.md"},sidebar:"overviewSidebar",previous:{title:"Assertion Notes",permalink:"/docs/managed-datahub/observe/assertion-notes"},next:{title:"Open Data Quality Assertions Specification",permalink:"/docs/assertions/open-assertions-spec"}},d={},b=[{value:"SQL Comments",id:"sql-comments",level:2},{value:"Snowflake Query Tag",id:"snowflake-query-tag",level:2},{value:"BigQuery Job Labels",id:"bigquery-job-labels",level:2}],p={toc:b},y="wrapper";function m(e){var{components:t}=e,r=i(e,["components"]);return(0,a.yg)(y,s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){o(e,t,r[t])}))}return e}({},p,r),{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"assertion-query-attribution"},"Assertion Query Attribution"),(0,a.yg)(n.A,{saasOnly:!0,mdxType:"FeatureAvailability"}),(0,a.yg)("p",null,"For certain Assertions, like Freshness and Volume, DataHub will issue queries against your Data Warehouse (ex. Snowflake) to determine if that assertion passed or failed. This can result in many additional queries against your warehouse every day, depending on how many assertions you have set up. In order to help you track and understand all of the queries coming from DataHub Cloud Observe, tagging has been added to issued queries."),(0,a.yg)("h2",{id:"sql-comments"},"SQL Comments"),(0,a.yg)("p",null,"For all platforms, a SQL comment is added to the top of all queries indicating the query source is DataHub and also including the URN of the assertion that issued the query. For example:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-sql"},"/* query_source=datahub_observe assertion_urn=urn:li:assertion:507e3dec-8fed-4809-9cdd-cf2a4a06a249 */\nSELECT *\nFROM users\n")),(0,a.yg)("h2",{id:"snowflake-query-tag"},"Snowflake Query Tag"),(0,a.yg)("p",null,"For queries issued against Snowflake, a ",(0,a.yg)("a",{parentName:"p",href:"https://select.dev/posts/snowflake-query-tags"},"Snowflake Query Tag")," is added to the SQL statement."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-sql"},'ALTER SESSION SET query_tag=\'{"query_source": "datahub_observe", "assertion_urn": "urn:li:assertion:507e3dec-8fed-4809-9cdd-cf2a4a06a249"}\'\n')),(0,a.yg)("h2",{id:"bigquery-job-labels"},"BigQuery Job Labels"),(0,a.yg)("p",null,"BigQuery support attribution through ",(0,a.yg)("a",{parentName:"p",href:"https://docs.cloud.google.com/bigquery/docs/adding-labels#job-label"},"job labels")," which are automatically included in your billing data. Unfortunately, due to length and character limits on labels, the assertion URN is not included in the job label."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'labels = {"datahub_observe": "true"}\n')))}m.isMDXComponent=!0}}]);