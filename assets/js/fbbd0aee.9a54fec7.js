"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[68990],{27977:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>g,contentTitle:()=>p,default:()=>h,frontMatter:()=>c,metadata:()=>d,toc:()=>u});n(96540);var t=n(15680),i=n(53720),l=n(5400);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function s(e,a){return a=null!=a?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):function(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})),e}function o(e,a){if(null==e)return{};var n,t,i=function(e,a){if(null==e)return{};var n,t,i={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||(i[n]=e[n]);return i}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const c={sidebar_position:28,title:"Fabric OneLake",slug:"/generated/ingestion/sources/fabric-onelake",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/fabric-onelake.md"},p="Fabric OneLake",d={unversionedId:"docs/generated/ingestion/sources/fabric-onelake",id:"docs/generated/ingestion/sources/fabric-onelake",title:"Fabric OneLake",description:"This connector extracts metadata from Microsoft Fabric OneLake, including workspaces, lakehouses, warehouses, schemas, and tables.",source:"@site/genDocs/docs/generated/ingestion/sources/fabric-onelake.md",sourceDirName:"docs/generated/ingestion/sources",slug:"/generated/ingestion/sources/fabric-onelake",permalink:"/docs/generated/ingestion/sources/fabric-onelake",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/fabric-onelake.md",tags:[],version:"current",sidebarPosition:28,frontMatter:{sidebar_position:28,title:"Fabric OneLake",slug:"/generated/ingestion/sources/fabric-onelake",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/fabric-onelake.md"},sidebar:"overviewSidebar",previous:{title:"Excel",permalink:"/docs/generated/ingestion/sources/excel"},next:{title:"Feast",permalink:"/docs/generated/ingestion/sources/feast"}},g={},u=[{value:"Quick Start",id:"quick-start",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Important Capabilities",id:"important-capabilities",level:3},{value:"CLI based Ingestion",id:"cli-based-ingestion",level:3},{value:"Starter Recipe",id:"starter-recipe",level:3},{value:"Config Details",id:"config-details",level:3},{value:"Concept Mapping",id:"concept-mapping",level:2},{value:"Hierarchy Structure",id:"hierarchy-structure",level:3},{value:"Platform Instance as Tenant",id:"platform-instance-as-tenant",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Required Permissions",id:"required-permissions",level:3},{value:"Granting Permissions",id:"granting-permissions",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Basic Recipe",id:"basic-recipe",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:3},{value:"Using Managed Identity",id:"using-managed-identity",level:3},{value:"Using Azure CLI (Local Development)",id:"using-azure-cli-local-development",level:3},{value:"Schema Extraction",id:"schema-extraction",level:2},{value:"Prerequisites for Schema Extraction",id:"prerequisites-for-schema-extraction",level:3},{value:"1. ODBC Driver Manager",id:"1-odbc-driver-manager",level:4},{value:"2. Microsoft ODBC Driver for SQL Server",id:"2-microsoft-odbc-driver-for-sql-server",level:4},{value:"3. Verify Installation",id:"3-verify-installation",level:4},{value:"4. Permissions",id:"4-permissions",level:4},{value:"5. Python Dependencies",id:"5-python-dependencies",level:4},{value:"Configuration",id:"configuration-1",level:3},{value:"How It Works",id:"how-it-works",level:3},{value:"Important Notes",id:"important-notes",level:3},{value:"Known Limitations",id:"known-limitations",level:3},{value:"Disabling Schema Extraction",id:"disabling-schema-extraction",level:3},{value:"Schemas-Enabled vs Schemas-Disabled Lakehouses",id:"schemas-enabled-vs-schemas-disabled-lakehouses",level:2},{value:"Stateful Ingestion",id:"stateful-ingestion",level:2},{value:"References",id:"references",level:2},{value:"Azure Authentication",id:"azure-authentication",level:3},{value:"Fabric Concepts",id:"fabric-concepts",level:3},{value:"Code Coordinates",id:"code-coordinates",level:3}],m={toc:u},y="wrapper";function h(e){var{components:a}=e,n=o(e,["components"]);return(0,t.yg)(y,s(function(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{},t=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(a){r(e,a,n[a])}))}return e}({},m,n),{components:a,mdxType:"MDXLayout"}),(0,t.yg)("h1",{id:"fabric-onelake"},"Fabric OneLake"),(0,t.yg)("h1",{id:"microsoft-fabric-onelake-connector"},"Microsoft Fabric OneLake Connector"),(0,t.yg)("p",null,"This connector extracts metadata from Microsoft Fabric OneLake, including workspaces, lakehouses, warehouses, schemas, and tables."),(0,t.yg)("h2",{id:"quick-start"},"Quick Start"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Set up authentication")," - Configure Azure credentials (see ",(0,t.yg)("a",{parentName:"li",href:"#prerequisites"},"Prerequisites"),")"),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Grant permissions")," - Ensure your identity has ",(0,t.yg)("inlineCode",{parentName:"li"},"Workspace.Read.All")," and workspace access"),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Configure recipe")," - Use ",(0,t.yg)("inlineCode",{parentName:"li"},"fabric-onelake_recipe.yml")," as a template"),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Run ingestion")," - Execute ",(0,t.yg)("inlineCode",{parentName:"li"},"datahub ingest -c fabric-onelake_recipe.yml"))),(0,t.yg)("h2",{id:"key-features"},"Key Features"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Workspace, Lakehouse, Warehouse, and Schema containers"),(0,t.yg)("li",{parentName:"ul"},"Table datasets with proper subtypes"),(0,t.yg)("li",{parentName:"ul"},"Automatic detection and handling of schemas-enabled and schemas-disabled lakehouses"),(0,t.yg)("li",{parentName:"ul"},"Pattern-based filtering for workspaces, lakehouses, warehouses, and tables"),(0,t.yg)("li",{parentName:"ul"},"Stateful ingestion for stale entity removal"),(0,t.yg)("li",{parentName:"ul"},"Multiple authentication methods (Service Principal, Managed Identity, Azure CLI, DefaultAzureCredential)\n",(0,t.yg)("img",{parentName:"li",src:"https://img.shields.io/badge/support%20status-testing-lightgrey",alt:"Testing"}))),(0,t.yg)("h3",{id:"important-capabilities"},"Important Capabilities"),(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:null},"Capability"),(0,t.yg)("th",{parentName:"tr",align:null},"Status"),(0,t.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"Asset Containers"),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"/docs/metadata-ingestion/docs/dev_guides/stateful#stale-entity-removal"},"Detect Deleted Entities")),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default via stateful ingestion.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"/docs/platform-instances"},"Platform Instance")),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"Schema Metadata"),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default.")))),(0,t.yg)("p",null,"Extracts metadata from Microsoft Fabric OneLake."),(0,t.yg)("h3",{id:"cli-based-ingestion"},"CLI based Ingestion"),(0,t.yg)("h3",{id:"starter-recipe"},"Starter Recipe"),(0,t.yg)("p",null,"Check out the following recipe to get started with ingestion! See ",(0,t.yg)("a",{parentName:"p",href:"#config-details"},"below")," for full configuration options."),(0,t.yg)("p",null,"For general pointers on writing and running a recipe, see our ",(0,t.yg)("a",{parentName:"p",href:"/docs/metadata-ingestion#recipes"},"main recipe guide"),"."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'# Example recipe for Microsoft Fabric OneLake source\n\nsource:\n  type: fabric-onelake\n  config:\n    # Authentication (using service principal)\n    credential:\n      authentication_method: service_principal\n      client_id: ${AZURE_CLIENT_ID}\n      client_secret: ${AZURE_CLIENT_SECRET}\n      tenant_id: ${AZURE_TENANT_ID}\n    \n    # Optional: Platform instance (use as tenant identifier)\n    # This groups all workspaces under a tenant-level container\n    # platform_instance: "contoso-tenant"\n    \n    # Optional: Environment\n    # env: PROD\n    \n    # Optional: Filter workspaces by name pattern\n    # workspace_pattern:\n    #   allow:\n    #     - ".*"  # Allow all workspaces by default\n    #   deny: []\n    \n    # Optional: Filter lakehouses by name pattern\n    # lakehouse_pattern:\n    #   allow:\n    #     - ".*"  # Allow all lakehouses by default\n    #   deny: []\n    \n    # Optional: Filter warehouses by name pattern\n    # warehouse_pattern:\n    #   allow:\n    #     - ".*"  # Allow all warehouses by default\n    #   deny: []\n    \n    # Optional: Filter tables by name pattern\n    # Format: \'schema.table\' or just \'table\' for default schema\n    # table_pattern:\n    #   allow:\n    #     - ".*"  # Allow all tables by default\n    #   deny: []\n    \n    # Feature flags\n    extract_lakehouses: true\n    extract_warehouses: true\n    extract_schemas: true  # Set to false to skip schema containers\n    \n    # Optional: API timeout (seconds)\n    # api_timeout: 30\n    \n    # Optional: Stateful ingestion for stale entity removal\n    # stateful_ingestion:\n    #   enabled: true\n    #   remove_stale_metadata: true\n    \n    # Optional: Schema extraction configuration\n    # extract_schema:\n    #   enabled: true  # Enable schema extraction (default: true)\n    #   method: sql_analytics_endpoint\n    \n    # Optional: SQL Analytics Endpoint configuration\n    # sql_endpoint:\n    #   enabled: true  # Enable SQL endpoint connection (default: true)\n    #   odbc_driver: "ODBC Driver 18 for SQL Server"  # ODBC driver name (default: "ODBC Driver 18 for SQL Server")\n    #   encrypt: "yes"  # Enable encryption (default: "yes")\n    #   trust_server_certificate: "no"  # Trust server certificate (default: "no")\n    #   query_timeout: 30  # Timeout for SQL queries in seconds (default: 30)\n\nsink:\n  type: datahub-rest\n  config:\n    server: "http://localhost:8080"\n\n')),(0,t.yg)("h3",{id:"config-details"},"Config Details"),(0,t.yg)(i.A,{mdxType:"Tabs"},(0,t.yg)(l.A,{value:"options",label:"Options",default:!0,mdxType:"TabItem"},(0,t.yg)("p",null,"Note that a ",(0,t.yg)("inlineCode",{parentName:"p"},".")," is used to denote nested fields in the YAML recipe."),(0,t.yg)("div",{className:"config-table"},(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:"left"},"Field"),(0,t.yg)("th",{parentName:"tr",align:"left"},"Description"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"api_timeout"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Timeout for REST API calls in seconds. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"30")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"convert_urns_to_lowercase"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to convert dataset urns to lowercase. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"extract_lakehouses"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to extract lakehouses and their tables. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"extract_schemas"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to extract schema containers. If False, tables will be directly under lakehouse/warehouse containers. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"extract_warehouses"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to extract warehouses and their tables. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"platform_instance"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"The instance of the platform that all assets produced by this recipe belong to. This should be unique within the platform. See ",(0,t.yg)("a",{parentName:"td",href:"https://docs.datahub.com/docs/platform-instances/"},"https://docs.datahub.com/docs/platform-instances/")," for more details. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"env"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"The environment that all assets produced by this connector belong to ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"PROD")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"credential"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"AzureCredentialConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Unified Azure authentication configuration. ",(0,t.yg)("br",null),"  ",(0,t.yg)("br",null)," This class provides a reusable authentication configuration that can be ",(0,t.yg)("br",null)," composed into any Azure connector's configuration. It supports multiple ",(0,t.yg)("br",null)," authentication methods and returns a TokenCredential that works with ",(0,t.yg)("br",null)," any Azure SDK client. ",(0,t.yg)("br",null),"  ",(0,t.yg)("br",null)," Example usage in a connector config: ",(0,t.yg)("br",null),"     class MyAzureConnectorConfig(ConfigModel): ",(0,t.yg)("br",null),"         credential: AzureCredentialConfig = Field( ",(0,t.yg)("br",null),"             default_factory=AzureCredentialConfig, ",(0,t.yg)("br",null),'             description="Azure authentication configuration" ',(0,t.yg)("br",null),"         ) ",(0,t.yg)("br",null),"         subscription_id: str = Field(...)")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"credential."),(0,t.yg)("span",{className:"path-main"},"authentication_method"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"Enum"))),(0,t.yg)("td",{parentName:"tr",align:"left"},'One of: "default", "service_principal", "managed_identity", "cli"')),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"credential."),(0,t.yg)("span",{className:"path-main"},"client_id"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Azure Application (client) ID. Required for service_principal authentication. Find this in Azure Portal > App registrations > Your app > Overview. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"credential."),(0,t.yg)("span",{className:"path-main"},"client_secret"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string(password), null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Azure client secret. Required for service_principal authentication. Create in Azure Portal > App registrations > Your app > Certificates & secrets. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"credential."),(0,t.yg)("span",{className:"path-main"},"exclude_cli_credential"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"When using 'default' authentication, exclude Azure CLI credential. Useful in production to avoid accidentally using developer credentials. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"credential."),(0,t.yg)("span",{className:"path-main"},"exclude_environment_credential"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"When using 'default' authentication, exclude environment variables. Environment variables checked: AZURE_CLIENT_ID, AZURE_CLIENT_SECRET, AZURE_TENANT_ID. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"credential."),(0,t.yg)("span",{className:"path-main"},"exclude_managed_identity_credential"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"When using 'default' authentication, exclude managed identity. Useful during local development when managed identity is not available. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"credential."),(0,t.yg)("span",{className:"path-main"},"managed_identity_client_id"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Client ID for user-assigned managed identity. Leave empty to use system-assigned managed identity. Only used when authentication_method is 'managed_identity'. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"credential."),(0,t.yg)("span",{className:"path-main"},"tenant_id"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Azure tenant (directory) ID. Required for service_principal authentication. Find this in Azure Portal > Microsoft Entra ID > Overview. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"extract_schema"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"ExtractSchemaConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Configuration for schema extraction.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"extract_schema."),(0,t.yg)("span",{className:"path-main"},"enabled"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Enable schema extraction ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"extract_schema."),(0,t.yg)("span",{className:"path-main"},"method"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Schema extraction method. Currently only 'sql_analytics_endpoint' is supported. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"sql","_","analytics","_","endpoint")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"lakehouse_pattern"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"AllowDenyPattern"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"A class to store allow deny regexes")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"lakehouse_pattern."),(0,t.yg)("span",{className:"path-main"},"ignoreCase"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of boolean, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to ignore case sensitivity during pattern matching. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"sql_endpoint"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of SqlEndpointConfig, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"SQL Analytics Endpoint configuration for schema extraction. Required when extract_schema.enabled=True and extract_schema.method='sql_analytics_endpoint'.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"sql_endpoint."),(0,t.yg)("span",{className:"path-main"},"enabled"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Enable SQL Analytics Endpoint connection ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"sql_endpoint."),(0,t.yg)("span",{className:"path-main"},"encrypt"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"Enum"))),(0,t.yg)("td",{parentName:"tr",align:"left"},'One of: "yes", "no", "mandatory", "optional", "strict" ',(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"yes")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"sql_endpoint."),(0,t.yg)("span",{className:"path-main"},"odbc_driver"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"ODBC driver name for SQL Server connections. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"ODBC Driver 18 for SQL Server")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"sql_endpoint."),(0,t.yg)("span",{className:"path-main"},"query_timeout"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Timeout for SQL queries in seconds ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"30")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"sql_endpoint."),(0,t.yg)("span",{className:"path-main"},"trust_server_certificate"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"Enum"))),(0,t.yg)("td",{parentName:"tr",align:"left"},'One of: "yes", "no" ',(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"no")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"table_pattern"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"AllowDenyPattern"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"A class to store allow deny regexes")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"table_pattern."),(0,t.yg)("span",{className:"path-main"},"ignoreCase"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of boolean, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to ignore case sensitivity during pattern matching. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"warehouse_pattern"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"AllowDenyPattern"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"A class to store allow deny regexes")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"warehouse_pattern."),(0,t.yg)("span",{className:"path-main"},"ignoreCase"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of boolean, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to ignore case sensitivity during pattern matching. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"workspace_pattern"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"AllowDenyPattern"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"A class to store allow deny regexes")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"workspace_pattern."),(0,t.yg)("span",{className:"path-main"},"ignoreCase"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of boolean, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to ignore case sensitivity during pattern matching. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"stateful_ingestion"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of StatefulStaleMetadataRemovalConfig, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Configuration for stateful ingestion and stale entity removal. When enabled, tracks ingested entities and removes those that no longer exist in Fabric. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"stateful_ingestion."),(0,t.yg)("span",{className:"path-main"},"enabled"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether or not to enable stateful ingest. Default: True if a pipeline_name is set and either a datahub-rest sink or ",(0,t.yg)("inlineCode",{parentName:"td"},"datahub_api")," is specified, otherwise False ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"stateful_ingestion."),(0,t.yg)("span",{className:"path-main"},"fail_safe_threshold"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"number"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Prevents large amount of soft deletes & the state from committing from accidental changes to the source configuration if the relative change percent in entities compared to the previous state is above the 'fail_safe_threshold'. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"75.0")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"stateful_ingestion."),(0,t.yg)("span",{className:"path-main"},"remove_stale_metadata"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Soft-deletes the entities present in the last successful run but missing in the current run with stateful_ingestion enabled. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))))))),(0,t.yg)(l.A,{value:"schema",label:"Schema",mdxType:"TabItem"},(0,t.yg)("p",null,"The ",(0,t.yg)("a",{parentName:"p",href:"https://json-schema.org/"},"JSONSchema")," for this configuration is inlined below."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-javascript"},'{\n  "$defs": {\n    "AllowDenyPattern": {\n      "additionalProperties": false,\n      "description": "A class to store allow deny regexes",\n      "properties": {\n        "allow": {\n          "default": [\n            ".*"\n          ],\n          "description": "List of regex patterns to include in ingestion",\n          "items": {\n            "type": "string"\n          },\n          "title": "Allow",\n          "type": "array"\n        },\n        "deny": {\n          "default": [],\n          "description": "List of regex patterns to exclude from ingestion.",\n          "items": {\n            "type": "string"\n          },\n          "title": "Deny",\n          "type": "array"\n        },\n        "ignoreCase": {\n          "anyOf": [\n            {\n              "type": "boolean"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": true,\n          "description": "Whether to ignore case sensitivity during pattern matching.",\n          "title": "Ignorecase"\n        }\n      },\n      "title": "AllowDenyPattern",\n      "type": "object"\n    },\n    "AzureAuthenticationMethod": {\n      "description": "Supported Azure authentication methods.\\n\\n- DEFAULT: Uses DefaultAzureCredential which auto-detects credentials from\\n  environment variables, managed identity, Azure CLI, etc.\\n- SERVICE_PRINCIPAL: Uses client ID, client secret, and tenant ID\\n- MANAGED_IDENTITY: Uses Azure Managed Identity (system or user-assigned)\\n- CLI: Uses Azure CLI credential (requires `az login`)",\n      "enum": [\n        "default",\n        "service_principal",\n        "managed_identity",\n        "cli"\n      ],\n      "title": "AzureAuthenticationMethod",\n      "type": "string"\n    },\n    "AzureCredentialConfig": {\n      "additionalProperties": false,\n      "description": "Unified Azure authentication configuration.\\n\\nThis class provides a reusable authentication configuration that can be\\ncomposed into any Azure connector\'s configuration. It supports multiple\\nauthentication methods and returns a TokenCredential that works with\\nany Azure SDK client.\\n\\nExample usage in a connector config:\\n    class MyAzureConnectorConfig(ConfigModel):\\n        credential: AzureCredentialConfig = Field(\\n            default_factory=AzureCredentialConfig,\\n            description=\\"Azure authentication configuration\\"\\n        )\\n        subscription_id: str = Field(...)",\n      "properties": {\n        "authentication_method": {\n          "$ref": "#/$defs/AzureAuthenticationMethod",\n          "default": "default",\n          "description": "Authentication method to use. Options: \'default\' (auto-detects from environment), \'service_principal\' (client ID + secret + tenant), \'managed_identity\' (Azure Managed Identity), \'cli\' (Azure CLI credential). Recommended: Use \'default\' which tries multiple methods automatically."\n        },\n        "client_id": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Azure Application (client) ID. Required for service_principal authentication. Find this in Azure Portal > App registrations > Your app > Overview.",\n          "title": "Client Id"\n        },\n        "client_secret": {\n          "anyOf": [\n            {\n              "format": "password",\n              "type": "string",\n              "writeOnly": true\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Azure client secret. Required for service_principal authentication. Create in Azure Portal > App registrations > Your app > Certificates & secrets.",\n          "title": "Client Secret"\n        },\n        "tenant_id": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Azure tenant (directory) ID. Required for service_principal authentication. Find this in Azure Portal > Microsoft Entra ID > Overview.",\n          "title": "Tenant Id"\n        },\n        "managed_identity_client_id": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Client ID for user-assigned managed identity. Leave empty to use system-assigned managed identity. Only used when authentication_method is \'managed_identity\'.",\n          "title": "Managed Identity Client Id"\n        },\n        "exclude_cli_credential": {\n          "default": false,\n          "description": "When using \'default\' authentication, exclude Azure CLI credential. Useful in production to avoid accidentally using developer credentials.",\n          "title": "Exclude Cli Credential",\n          "type": "boolean"\n        },\n        "exclude_environment_credential": {\n          "default": false,\n          "description": "When using \'default\' authentication, exclude environment variables. Environment variables checked: AZURE_CLIENT_ID, AZURE_CLIENT_SECRET, AZURE_TENANT_ID.",\n          "title": "Exclude Environment Credential",\n          "type": "boolean"\n        },\n        "exclude_managed_identity_credential": {\n          "default": false,\n          "description": "When using \'default\' authentication, exclude managed identity. Useful during local development when managed identity is not available.",\n          "title": "Exclude Managed Identity Credential",\n          "type": "boolean"\n        }\n      },\n      "title": "AzureCredentialConfig",\n      "type": "object"\n    },\n    "ExtractSchemaConfig": {\n      "additionalProperties": false,\n      "description": "Configuration for schema extraction.",\n      "properties": {\n        "enabled": {\n          "default": true,\n          "description": "Enable schema extraction",\n          "title": "Enabled",\n          "type": "boolean"\n        },\n        "method": {\n          "const": "sql_analytics_endpoint",\n          "default": "sql_analytics_endpoint",\n          "description": "Schema extraction method. Currently only \'sql_analytics_endpoint\' is supported.",\n          "title": "Method",\n          "type": "string"\n        }\n      },\n      "title": "ExtractSchemaConfig",\n      "type": "object"\n    },\n    "SqlEndpointConfig": {\n      "additionalProperties": false,\n      "description": "Configuration for SQL Analytics Endpoint schema extraction.\\n\\nReferences:\\n- https://learn.microsoft.com/en-us/fabric/data-warehouse/warehouse-connectivity\\n- https://learn.microsoft.com/en-us/fabric/data-warehouse/connect-to-fabric-data-warehouse\\n- https://learn.microsoft.com/en-us/fabric/data-warehouse/what-is-the-sql-analytics-endpoint-for-a-lakehouse\\n- https://learn.microsoft.com/en-us/sql/connect/odbc/dsn-connection-string-attribute?view=sql-server-ver17#encrypt",\n      "properties": {\n        "enabled": {\n          "default": true,\n          "description": "Enable SQL Analytics Endpoint connection",\n          "title": "Enabled",\n          "type": "boolean"\n        },\n        "odbc_driver": {\n          "default": "ODBC Driver 18 for SQL Server",\n          "description": "ODBC driver name for SQL Server connections.",\n          "title": "Odbc Driver",\n          "type": "string"\n        },\n        "encrypt": {\n          "default": "yes",\n          "description": "Enable encryption for SQL Server connections. Valid values: \'yes\'/\'mandatory\' (enable encryption, default in ODBC Driver 18.0+), \'no\'/\'optional\' (disable encryption), or \'strict\' (ODBC Driver 18.0+, TDS 8.0 protocol only, always verifies server certificate). See: https://learn.microsoft.com/en-us/sql/connect/odbc/dsn-connection-string-attribute?view=sql-server-ver17#encrypt",\n          "enum": [\n            "yes",\n            "no",\n            "mandatory",\n            "optional",\n            "strict"\n          ],\n          "title": "Encrypt",\n          "type": "string"\n        },\n        "trust_server_certificate": {\n          "default": "no",\n          "description": "Trust server certificate without validation. Set to \'yes\' only if certificate validation fails. When \'encrypt=strict\', this setting is ignored and certificate validation is always performed. See: https://learn.microsoft.com/en-us/sql/connect/odbc/dsn-connection-string-attribute?view=sql-server-ver17",\n          "enum": [\n            "yes",\n            "no"\n          ],\n          "title": "Trust Server Certificate",\n          "type": "string"\n        },\n        "query_timeout": {\n          "default": 30,\n          "description": "Timeout for SQL queries in seconds",\n          "maximum": 300,\n          "minimum": 1,\n          "title": "Query Timeout",\n          "type": "integer"\n        }\n      },\n      "title": "SqlEndpointConfig",\n      "type": "object"\n    },\n    "StatefulStaleMetadataRemovalConfig": {\n      "additionalProperties": false,\n      "description": "Base specialized config for Stateful Ingestion with stale metadata removal capability.",\n      "properties": {\n        "enabled": {\n          "default": false,\n          "description": "Whether or not to enable stateful ingest. Default: True if a pipeline_name is set and either a datahub-rest sink or `datahub_api` is specified, otherwise False",\n          "title": "Enabled",\n          "type": "boolean"\n        },\n        "remove_stale_metadata": {\n          "default": true,\n          "description": "Soft-deletes the entities present in the last successful run but missing in the current run with stateful_ingestion enabled.",\n          "title": "Remove Stale Metadata",\n          "type": "boolean"\n        },\n        "fail_safe_threshold": {\n          "default": 75.0,\n          "description": "Prevents large amount of soft deletes & the state from committing from accidental changes to the source configuration if the relative change percent in entities compared to the previous state is above the \'fail_safe_threshold\'.",\n          "maximum": 100.0,\n          "minimum": 0.0,\n          "title": "Fail Safe Threshold",\n          "type": "number"\n        }\n      },\n      "title": "StatefulStaleMetadataRemovalConfig",\n      "type": "object"\n    }\n  },\n  "additionalProperties": false,\n  "description": "Configuration for Fabric OneLake source.\\n\\nThis connector extracts metadata from Microsoft Fabric OneLake including:\\n- Workspaces as Containers\\n- Lakehouses as Containers\\n- Warehouses as Containers\\n- Schemas as Containers\\n- Tables as Datasets with schema metadata\\n\\nNote on Tenant/Platform Instance:\\nThe Fabric REST API does not expose tenant-level endpoints or operations.\\nAll API operations are performed at the workspace level. To represent tenant-level\\norganization in DataHub, users should set the `platform_instance` configuration\\nfield to their tenant identifier (e.g., \\"contoso-tenant\\"). This will be included\\nin all container and dataset URNs, effectively grouping all workspaces under the\\nspecified platform instance/tenant.",\n  "properties": {\n    "convert_urns_to_lowercase": {\n      "default": false,\n      "description": "Whether to convert dataset urns to lowercase.",\n      "title": "Convert Urns To Lowercase",\n      "type": "boolean"\n    },\n    "env": {\n      "default": "PROD",\n      "description": "The environment that all assets produced by this connector belong to",\n      "title": "Env",\n      "type": "string"\n    },\n    "platform_instance": {\n      "anyOf": [\n        {\n          "type": "string"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "The instance of the platform that all assets produced by this recipe belong to. This should be unique within the platform. See https://docs.datahub.com/docs/platform-instances/ for more details.",\n      "title": "Platform Instance"\n    },\n    "stateful_ingestion": {\n      "anyOf": [\n        {\n          "$ref": "#/$defs/StatefulStaleMetadataRemovalConfig"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "Configuration for stateful ingestion and stale entity removal. When enabled, tracks ingested entities and removes those that no longer exist in Fabric."\n    },\n    "credential": {\n      "$ref": "#/$defs/AzureCredentialConfig",\n      "description": "Azure authentication configuration. Supports service principal, managed identity, Azure CLI, or auto-detection (DefaultAzureCredential). See AzureCredentialConfig for detailed options."\n    },\n    "workspace_pattern": {\n      "$ref": "#/$defs/AllowDenyPattern",\n      "default": {\n        "allow": [\n          ".*"\n        ],\n        "deny": [],\n        "ignoreCase": true\n      },\n      "description": "Regex patterns to filter workspaces by name. Example: allow=[\'prod-.*\'], deny=[\'.*-test\']"\n    },\n    "lakehouse_pattern": {\n      "$ref": "#/$defs/AllowDenyPattern",\n      "default": {\n        "allow": [\n          ".*"\n        ],\n        "deny": [],\n        "ignoreCase": true\n      },\n      "description": "Regex patterns to filter lakehouses by name. Applied to all workspaces matching workspace_pattern."\n    },\n    "warehouse_pattern": {\n      "$ref": "#/$defs/AllowDenyPattern",\n      "default": {\n        "allow": [\n          ".*"\n        ],\n        "deny": [],\n        "ignoreCase": true\n      },\n      "description": "Regex patterns to filter warehouses by name. Applied to all workspaces matching workspace_pattern."\n    },\n    "table_pattern": {\n      "$ref": "#/$defs/AllowDenyPattern",\n      "default": {\n        "allow": [\n          ".*"\n        ],\n        "deny": [],\n        "ignoreCase": true\n      },\n      "description": "Regex patterns to filter tables by name. Format: \'schema.table\' or just \'table\' for default schema."\n    },\n    "extract_lakehouses": {\n      "default": true,\n      "description": "Whether to extract lakehouses and their tables.",\n      "title": "Extract Lakehouses",\n      "type": "boolean"\n    },\n    "extract_warehouses": {\n      "default": true,\n      "description": "Whether to extract warehouses and their tables.",\n      "title": "Extract Warehouses",\n      "type": "boolean"\n    },\n    "extract_schemas": {\n      "default": true,\n      "description": "Whether to extract schema containers. If False, tables will be directly under lakehouse/warehouse containers.",\n      "title": "Extract Schemas",\n      "type": "boolean"\n    },\n    "api_timeout": {\n      "default": 30,\n      "description": "Timeout for REST API calls in seconds.",\n      "maximum": 300,\n      "minimum": 1,\n      "title": "Api Timeout",\n      "type": "integer"\n    },\n    "extract_schema": {\n      "$ref": "#/$defs/ExtractSchemaConfig",\n      "description": "Configuration for schema extraction from tables."\n    },\n    "sql_endpoint": {\n      "anyOf": [\n        {\n          "$ref": "#/$defs/SqlEndpointConfig"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "description": "SQL Analytics Endpoint configuration for schema extraction. Required when extract_schema.enabled=True and extract_schema.method=\'sql_analytics_endpoint\'."\n    }\n  },\n  "title": "FabricOneLakeSourceConfig",\n  "type": "object"\n}\n')))),(0,t.yg)("h1",{id:"microsoft-fabric-onelake"},"Microsoft Fabric OneLake"),(0,t.yg)("p",null,"This connector extracts metadata from Microsoft Fabric OneLake, including workspaces, lakehouses, warehouses, schemas, and tables."),(0,t.yg)("h2",{id:"concept-mapping"},"Concept Mapping"),(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:null},"Microsoft Fabric"),(0,t.yg)("th",{parentName:"tr",align:null},"DataHub Entity"),(0,t.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"Workspace")),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"Container")," (subtype: ",(0,t.yg)("inlineCode",{parentName:"td"},"Fabric Workspace"),")"),(0,t.yg)("td",{parentName:"tr",align:null},"Top-level organizational unit")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"Lakehouse")),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"Container")," (subtype: ",(0,t.yg)("inlineCode",{parentName:"td"},"Fabric Lakehouse"),")"),(0,t.yg)("td",{parentName:"tr",align:null},"Contains schemas and tables")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"Warehouse")),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"Container")," (subtype: ",(0,t.yg)("inlineCode",{parentName:"td"},"Fabric Warehouse"),")"),(0,t.yg)("td",{parentName:"tr",align:null},"Contains schemas and tables")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"Schema")),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"Container")," (subtype: ",(0,t.yg)("inlineCode",{parentName:"td"},"Fabric Schema"),")"),(0,t.yg)("td",{parentName:"tr",align:null},"Logical grouping within lakehouse/warehouse")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"Table")),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"Dataset")),(0,t.yg)("td",{parentName:"tr",align:null},"Tables within schemas")))),(0,t.yg)("h3",{id:"hierarchy-structure"},"Hierarchy Structure"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"Platform (fabric-onelake)\n\u2514\u2500\u2500 Workspace (Container)\n    \u251c\u2500\u2500 Lakehouse (Container)\n    \u2502   \u2514\u2500\u2500 Schema (Container)\n    \u2502       \u2514\u2500\u2500 Table (Dataset)\n    \u2514\u2500\u2500 Warehouse (Container)\n        \u2514\u2500\u2500 Schema (Container)\n            \u2514\u2500\u2500 Table/View (Dataset)\n")),(0,t.yg)("h3",{id:"platform-instance-as-tenant"},"Platform Instance as Tenant"),(0,t.yg)("p",null,"The Fabric REST API does not expose tenant-level endpoints. To represent tenant-level organization in DataHub, set the ",(0,t.yg)("inlineCode",{parentName:"p"},"platform_instance"),' configuration field to your tenant identifier (e.g., "contoso-tenant"). This will be included in all container and dataset URNs, effectively grouping all workspaces under the specified platform instance/tenant.'),(0,t.yg)("h2",{id:"prerequisites"},"Prerequisites"),(0,t.yg)("h3",{id:"authentication"},"Authentication"),(0,t.yg)("p",null,"The connector supports multiple Azure authentication methods:"),(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:null},"Method"),(0,t.yg)("th",{parentName:"tr",align:null},"Best For"),(0,t.yg)("th",{parentName:"tr",align:null},"Configuration"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"Service Principal")),(0,t.yg)("td",{parentName:"tr",align:null},"Production environments"),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"authentication_method: service_principal"))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"Managed Identity")),(0,t.yg)("td",{parentName:"tr",align:null},"Azure-hosted deployments (VMs, AKS, App Service)"),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"authentication_method: managed_identity"))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"Azure CLI")),(0,t.yg)("td",{parentName:"tr",align:null},"Local development"),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"authentication_method: cli")," (run ",(0,t.yg)("inlineCode",{parentName:"td"},"az login")," first)")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("strong",{parentName:"td"},"DefaultAzureCredential")),(0,t.yg)("td",{parentName:"tr",align:null},"Flexible environments"),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},"authentication_method: default"))))),(0,t.yg)("p",null,"For service principal setup, see ",(0,t.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-register-app"},"Register an application with Microsoft Entra ID"),"."),(0,t.yg)("h3",{id:"required-permissions"},"Required Permissions"),(0,t.yg)("p",null,"The connector requires ",(0,t.yg)("strong",{parentName:"p"},"read-only access")," to Fabric workspaces and their contents. The authenticated identity (service principal, managed identity, or user) must have:"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Workspace-Level Permissions:")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Workspace.Read.All")," or ",(0,t.yg)("strong",{parentName:"li"},"Workspace.ReadWrite.All")," (Microsoft Entra delegated scope)"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Viewer")," role or higher in the Fabric workspaces you want to ingest")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"API Permissions:"),"\nThe service principal or user must have the following Microsoft Entra API permissions:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"Workspace.Read.All")," (delegated) - Required to list and read workspace metadata"),(0,t.yg)("li",{parentName:"ul"},"Or ",(0,t.yg)("inlineCode",{parentName:"li"},"Workspace.ReadWrite.All")," (delegated) - Provides read and write access")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Token Audiences:"),"\nThe connector uses two different token audiences depending on the operation:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Fabric REST API")," (",(0,t.yg)("inlineCode",{parentName:"li"},"https://api.fabric.microsoft.com"),"): Uses Power BI API scope (",(0,t.yg)("inlineCode",{parentName:"li"},"https://analysis.windows.net/powerbi/api/.default"),") for listing workspaces, lakehouses, warehouses, and basic table metadata"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"OneLake Delta Table APIs")," (",(0,t.yg)("inlineCode",{parentName:"li"},"https://onelake.table.fabric.microsoft.com"),"): Uses Storage audience (",(0,t.yg)("inlineCode",{parentName:"li"},"https://storage.azure.com/.default"),") for accessing schemas and tables in ",(0,t.yg)("strong",{parentName:"li"},"schemas-enabled lakehouses"))),(0,t.yg)("p",null,"The connector automatically handles both token audiences. For schemas-enabled lakehouses, it will use OneLake Delta Table APIs with Storage audience tokens. For schemas-disabled lakehouses, it uses the standard Fabric REST API."),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"OneLake Data Access Permissions:"),"\nFor schemas-enabled lakehouses, you may also need OneLake data access permissions:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"If OneLake security is enabled on your lakehouse, ensure your identity has ",(0,t.yg)("strong",{parentName:"li"},"Read")," or ",(0,t.yg)("strong",{parentName:"li"},"ReadWrite")," permissions on the lakehouse item"),(0,t.yg)("li",{parentName:"ul"},"These permissions are separate from workspace roles and are managed in the Fabric portal under the lakehouse's security settings")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Note:")," The connector automatically detects whether a lakehouse has schemas enabled and uses the appropriate API endpoint and token audience. No additional configuration is required."),(0,t.yg)("p",null,"For detailed information on permissions, see:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/rest/api/fabric/articles/api-permissions"},"Fabric REST API Permissions")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/admin/roles"},"Workspace Roles and Permissions")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/onelake/security/data-access-control-model"},"OneLake Data Access Control"))),(0,t.yg)("h3",{id:"granting-permissions"},"Granting Permissions"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"For Service Principal:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Register an application in Microsoft Entra ID (Azure AD)"),(0,t.yg)("li",{parentName:"ol"},"Grant API permissions:",(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Navigate to ",(0,t.yg)("strong",{parentName:"li"},"Azure Portal")," > ",(0,t.yg)("strong",{parentName:"li"},"App registrations")," > Your app > ",(0,t.yg)("strong",{parentName:"li"},"API permissions")),(0,t.yg)("li",{parentName:"ul"},"Add permission: ",(0,t.yg)("strong",{parentName:"li"},"Power BI Service")," > ",(0,t.yg)("strong",{parentName:"li"},"Delegated permissions")," > ",(0,t.yg)("inlineCode",{parentName:"li"},"Workspace.Read.All")),(0,t.yg)("li",{parentName:"ul"},"Click ",(0,t.yg)("strong",{parentName:"li"},"Grant admin consent")," (if you have admin rights)"))),(0,t.yg)("li",{parentName:"ol"},"Assign workspace roles:",(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"In Fabric portal, navigate to each workspace"),(0,t.yg)("li",{parentName:"ul"},"Go to ",(0,t.yg)("strong",{parentName:"li"},"Workspace settings")," > ",(0,t.yg)("strong",{parentName:"li"},"Access")),(0,t.yg)("li",{parentName:"ul"},"Add your service principal and assign ",(0,t.yg)("strong",{parentName:"li"},"Viewer")," role or higher")))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"For Managed Identity:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Enable system-assigned managed identity on your Azure resource (VM, AKS, App Service, etc.)"),(0,t.yg)("li",{parentName:"ol"},"Assign the managed identity to Fabric workspaces with ",(0,t.yg)("strong",{parentName:"li"},"Viewer")," role or higher"),(0,t.yg)("li",{parentName:"ol"},"The connector will automatically use the managed identity for authentication")),(0,t.yg)("h2",{id:"configuration"},"Configuration"),(0,t.yg)("h3",{id:"basic-recipe"},"Basic Recipe"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: fabric-onelake\n  config:\n    # Authentication (using service principal)\n    credential:\n      authentication_method: service_principal\n      client_id: ${AZURE_CLIENT_ID}\n      client_secret: ${AZURE_CLIENT_SECRET}\n      tenant_id: ${AZURE_TENANT_ID}\n\n    # Optional: Platform instance (use as tenant identifier)\n    # platform_instance: "contoso-tenant"\n\n    # Optional: Environment\n    # env: PROD\n\n    # Optional: Filter workspaces by name pattern\n    # workspace_pattern:\n    #   allow:\n    #     - "prod-.*"\n    #   deny:\n    #     - ".*-test"\n\n    # Optional: Filter lakehouses by name pattern\n    # lakehouse_pattern:\n    #   allow:\n    #     - ".*"\n    #   deny: []\n\n    # Optional: Filter warehouses by name pattern\n    # warehouse_pattern:\n    #   allow:\n    #     - ".*"\n    #   deny: []\n\n    # Optional: Filter tables by name pattern\n    # table_pattern:\n    #   allow:\n    #     - ".*"\n    #   deny: []\n\nsink:\n  type: datahub-rest\n  config:\n    server: "http://localhost:8080"\n')),(0,t.yg)("h3",{id:"advanced-configuration"},"Advanced Configuration"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: fabric-onelake\n  config:\n    credential:\n      authentication_method: service_principal\n      client_id: ${AZURE_CLIENT_ID}\n      client_secret: ${AZURE_CLIENT_SECRET}\n      tenant_id: ${AZURE_TENANT_ID}\n\n    # Platform instance (represents tenant)\n    platform_instance: "contoso-tenant"\n\n    # Environment\n    env: PROD\n\n    # Filtering\n    workspace_pattern:\n      allow:\n        - "prod-.*"\n        - "shared-.*"\n      deny:\n        - ".*-test"\n        - ".*-dev"\n\n    lakehouse_pattern:\n      allow:\n        - ".*"\n      deny:\n        - ".*-backup"\n\n    warehouse_pattern:\n      allow:\n        - ".*"\n      deny: []\n\n    table_pattern:\n      allow:\n        - ".*"\n      deny:\n        - ".*_temp"\n        - ".*_backup"\n\n    # Feature flags\n    extract_lakehouses: true\n    extract_warehouses: true\n    extract_schemas: true # Set to false to skip schema containers\n\n    # API timeout (seconds)\n    api_timeout: 30\n\n    # Stateful ingestion (optional)\n    stateful_ingestion:\n      enabled: true\n      remove_stale_metadata: true\n\nsink:\n  type: datahub-rest\n  config:\n    server: "http://localhost:8080"\n')),(0,t.yg)("h3",{id:"using-managed-identity"},"Using Managed Identity"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: fabric-onelake\n  config:\n    credential:\n      authentication_method: managed_identity\n      # For user-assigned managed identity, specify client_id\n      # client_id: ${MANAGED_IDENTITY_CLIENT_ID}\n\n    platform_instance: "contoso-tenant"\n    env: PROD\n\nsink:\n  type: datahub-rest\n  config:\n    server: "http://localhost:8080"\n')),(0,t.yg)("h3",{id:"using-azure-cli-local-development"},"Using Azure CLI (Local Development)"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: fabric-onelake\n  config:\n    credential:\n      authentication_method: cli\n      # Run \'az login\' first\n\n    platform_instance: "contoso-tenant"\n    env: DEV\n\nsink:\n  type: datahub-rest\n  config:\n    server: "http://localhost:8080"\n')),(0,t.yg)("h2",{id:"schema-extraction"},"Schema Extraction"),(0,t.yg)("p",null,"Schema extraction (column metadata) is supported via the SQL Analytics Endpoint. This feature extracts column names, data types, nullability, and ordinal positions from tables in both Lakehouses and Warehouses."),(0,t.yg)("h3",{id:"prerequisites-for-schema-extraction"},"Prerequisites for Schema Extraction"),(0,t.yg)("p",null,"Schema extraction via SQL Analytics Endpoint requires ODBC drivers to be installed on the system."),(0,t.yg)("h4",{id:"1-odbc-driver-manager"},"1. ODBC Driver Manager"),(0,t.yg)("p",null,"First, install the ODBC driver manager (UnixODBC) on your system:"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Ubuntu/Debian:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"sudo apt-get update\nsudo apt-get install -y unixodbc unixodbc-dev\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"RHEL/CentOS/Fedora:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"# RHEL/CentOS 7/8\nsudo yum install -y unixODBC unixODBC-devel\n\n# Fedora / RHEL 9+\nsudo dnf install -y unixODBC unixODBC-devel\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"macOS:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"brew install unixodbc\n")),(0,t.yg)("h4",{id:"2-microsoft-odbc-driver-for-sql-server"},"2. Microsoft ODBC Driver for SQL Server"),(0,t.yg)("p",null,"Install the Microsoft ODBC Driver 18 for SQL Server (required for connecting to Fabric SQL Analytics Endpoint):"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Ubuntu 20.04/22.04:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"curl https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -\ncurl https://packages.microsoft.com/config/ubuntu/$(lsb_release -rs)/prod.list | sudo tee /etc/apt/sources.list.d/mssql-release.list\nsudo apt-get update\nsudo ACCEPT_EULA=Y apt-get install -y msodbcsql18\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"RHEL/CentOS 7/8:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"sudo curl -o /etc/yum.repos.d/mssql-release.repo https://packages.microsoft.com/config/rhel/$(rpm -E %{rhel})/mssql-release.repo\nsudo ACCEPT_EULA=Y yum install -y msodbcsql18\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"RHEL 9 / Fedora:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"sudo curl -o /etc/yum.repos.d/mssql-release.repo https://packages.microsoft.com/config/rhel/9/mssql-release.repo\nsudo ACCEPT_EULA=Y dnf install -y msodbcsql18\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"macOS:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"brew tap microsoft/mssql-release https://github.com/Microsoft/homebrew-mssql-release\nbrew update\nHOMEBREW_ACCEPT_EULA=Y brew install msodbcsql18 mssql-tools18\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Windows:"),"\nDownload and install from ",(0,t.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server"},"Microsoft ODBC Driver for SQL Server"),"."),(0,t.yg)("h4",{id:"3-verify-installation"},"3. Verify Installation"),(0,t.yg)("p",null,"After installation, verify that the ODBC driver is available:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"odbcinst -q -d\n")),(0,t.yg)("p",null,"You should see ",(0,t.yg)("inlineCode",{parentName:"p"},"ODBC Driver 18 for SQL Server")," in the list."),(0,t.yg)("h4",{id:"4-permissions"},"4. Permissions"),(0,t.yg)("p",null,"Your Azure identity must have access to query the SQL Analytics Endpoint (same permissions as accessing the endpoint via SQL tools)."),(0,t.yg)("h4",{id:"5-python-dependencies"},"5. Python Dependencies"),(0,t.yg)("p",null,"The ",(0,t.yg)("inlineCode",{parentName:"p"},"fabric-onelake")," extra includes ",(0,t.yg)("inlineCode",{parentName:"p"},"sqlalchemy")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"pyodbc")," dependencies. Install them with:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"pip install 'acryl-datahub[fabric-onelake]'\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Note:")," If you encounter ",(0,t.yg)("inlineCode",{parentName:"p"},"libodbc.so.2: cannot open shared object file")," errors, ensure the ODBC driver manager is installed (step 1 above)."),(0,t.yg)("h3",{id:"configuration-1"},"Configuration"),(0,t.yg)("p",null,"Schema extraction is enabled by default. You can configure it as follows:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: fabric-onelake\n  config:\n    credential:\n      authentication_method: service_principal\n      client_id: ${AZURE_CLIENT_ID}\n      client_secret: ${AZURE_CLIENT_SECRET}\n      tenant_id: ${AZURE_TENANT_ID}\n\n    # Schema extraction configuration\n    extract_schema:\n      enabled: true # Enable schema extraction (default: true)\n      method: sql_analytics_endpoint # Currently only this method is supported\n\n    # SQL Analytics Endpoint configuration\n    sql_endpoint:\n      enabled: true # Enable SQL endpoint connection (default: true)\n      # Optional: ODBC connection options\n      # odbc_driver: "ODBC Driver 18 for SQL Server"  # Default: "ODBC Driver 18 for SQL Server"\n      # encrypt: "yes"  # Enable encryption (default: "yes")\n      # trust_server_certificate: "no"  # Trust server certificate (default: "no")\n      query_timeout: 30 # Timeout for SQL queries in seconds (default: 30)\n')),(0,t.yg)("h3",{id:"how-it-works"},"How It Works"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Endpoint Discovery"),": The SQL Analytics Endpoint URL is automatically fetched from the Fabric API for each Lakehouse/Warehouse. The endpoint format is ",(0,t.yg)("inlineCode",{parentName:"li"},"<unique-identifier>.datawarehouse.fabric.microsoft.com")," and cannot be constructed from workspace_id alone."),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Authentication"),": Uses the same Azure credentials configured for REST API access with Azure AD token injection"),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Connection"),": Connects to the SQL Analytics Endpoint using ODBC with the discovered endpoint URL"),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Query"),": Queries ",(0,t.yg)("inlineCode",{parentName:"li"},"INFORMATION_SCHEMA.COLUMNS")," to extract column metadata (required for schema extraction)"),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Type Mapping"),": SQL Server data types are automatically mapped to DataHub types using the standard type mapping system")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"References:")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/data-warehouse/what-is-the-sql-analytics-endpoint-for-a-lakehouse"},"What is the SQL analytics endpoint for a lakehouse?")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/data-warehouse/warehouse-connectivity"},"Warehouse connectivity in Microsoft Fabric")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/data-warehouse/connect-to-fabric-data-warehouse"},"Connect to Fabric Data Warehouse"))),(0,t.yg)("h3",{id:"important-notes"},"Important Notes"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Endpoint URL Discovery"),": The SQL Analytics Endpoint URL is automatically fetched from the Fabric API for each Lakehouse/Warehouse. The endpoint format is ",(0,t.yg)("inlineCode",{parentName:"li"},"<unique-identifier>.datawarehouse.fabric.microsoft.com")," and cannot be constructed from workspace_id alone. If the endpoint URL cannot be retrieved from the API, schema extraction will fail for that item."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"No Fallback"),": Unlike legacy Power BI Premium endpoints, Fabric SQL Analytics Endpoints do not support fallback connection strings. The endpoint must be obtained from the API.")),(0,t.yg)("h3",{id:"known-limitations"},"Known Limitations"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Metadata Sync Delays"),": The SQL Analytics Endpoint may have delays in reflecting schema changes. New columns or schema modifications may take minutes to hours to appear."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Missing Tables"),": Some tables may not be visible in the SQL endpoint due to:",(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Unsupported data types"),(0,t.yg)("li",{parentName:"ul"},"Permission issues"),(0,t.yg)("li",{parentName:"ul"},"Table count limits in very large databases"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Graceful Degradation"),": If schema extraction fails for a table, the table will still be ingested without column metadata (no ingestion failure)")),(0,t.yg)("h3",{id:"disabling-schema-extraction"},"Disabling Schema Extraction"),(0,t.yg)("p",null,"To disable schema extraction and ingest tables without column metadata:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"source:\n  type: fabric-onelake\n  config:\n    extract_schema:\n      enabled: false\n")),(0,t.yg)("h2",{id:"schemas-enabled-vs-schemas-disabled-lakehouses"},"Schemas-Enabled vs Schemas-Disabled Lakehouses"),(0,t.yg)("p",null,"The connector automatically handles both schemas-enabled and schemas-disabled lakehouses:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Schemas-Enabled Lakehouses"),": The connector uses OneLake Delta Table APIs to list schemas first, then tables within each schema. This requires Storage audience tokens (",(0,t.yg)("inlineCode",{parentName:"li"},"https://storage.azure.com/.default"),")."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Schemas-Disabled Lakehouses"),": The connector uses the standard Fabric REST API ",(0,t.yg)("inlineCode",{parentName:"li"},"/tables")," endpoint, which lists all tables. Tables without an explicit schema are automatically assigned to the ",(0,t.yg)("inlineCode",{parentName:"li"},"dbo")," schema in DataHub. This uses Power BI API scope tokens.")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Important"),": All tables in DataHub will have a schema in their URN, even for schemas-disabled lakehouses. Tables without an explicit schema are normalized to use the ",(0,t.yg)("inlineCode",{parentName:"p"},"dbo")," schema by default. This ensures consistent URN structure across all Fabric entities."),(0,t.yg)("p",null,"The connector automatically detects the lakehouse type and uses the appropriate API endpoint. No configuration changes are needed."),(0,t.yg)("h2",{id:"stateful-ingestion"},"Stateful Ingestion"),(0,t.yg)("p",null,"The connector supports stateful ingestion to track ingested entities and remove stale metadata. Enable it with:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"stateful_ingestion:\n  enabled: true\n  remove_stale_metadata: true\n")),(0,t.yg)("p",null,"When enabled, the connector will:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Track all ingested workspaces, lakehouses, warehouses, schemas, and tables"),(0,t.yg)("li",{parentName:"ul"},"Remove entities from DataHub that no longer exist in Fabric"),(0,t.yg)("li",{parentName:"ul"},"Maintain state across ingestion runs")),(0,t.yg)("h2",{id:"references"},"References"),(0,t.yg)("h3",{id:"azure-authentication"},"Azure Authentication"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-register-app"},"Register an application with Microsoft Entra ID")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/python/api/overview/azure/identity-readme"},"Azure Identity Library")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/entra/identity-platform/app-objects-and-service-principals"},"Service Principal Authentication")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/overview"},"Managed Identities"))),(0,t.yg)("h3",{id:"fabric-concepts"},"Fabric Concepts"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/get-started/microsoft-fabric-overview"},"Microsoft Fabric Overview")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/data-engineering/onelake-overview"},"OneLake Overview")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/get-started/workspaces"},"Workspaces in Fabric")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/data-engineering/lakehouse-overview"},"Lakehouses in Fabric")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/fabric/data-warehouse/warehouse-overview"},"Warehouses in Fabric"))),(0,t.yg)("h3",{id:"code-coordinates"},"Code Coordinates"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Class Name: ",(0,t.yg)("inlineCode",{parentName:"li"},"datahub.ingestion.source.fabric.onelake.source.FabricOneLakeSource")),(0,t.yg)("li",{parentName:"ul"},"Browse on ",(0,t.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/source/fabric/onelake/source.py"},"GitHub"))),(0,t.yg)("h2",null,"Questions"),(0,t.yg)("p",null,"If you've got any questions on configuring ingestion for Fabric OneLake, feel free to ping us on ",(0,t.yg)("a",{parentName:"p",href:"https://datahub.com/slack"},"our Slack"),"."))}h.isMDXComponent=!0}}]);