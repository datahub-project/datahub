"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[8239],{15680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>g});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,g=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return a?n.createElement(g,l(l({ref:t},p),{},{components:a})):n.createElement(g,l({ref:t},p))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},13231:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>c,toc:()=>d});a(96540);var n=a(15680);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const i={title:"Logical Models",slug:"/features/feature-guides/logical-models/overview",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/features/feature-guides/logical-models/overview.md"},s="Logical Models",c={unversionedId:"docs/features/feature-guides/logical-models/overview",id:"docs/features/feature-guides/logical-models/overview",title:"Logical Models",description:"Currently we only support datasets and by extension schema fields for logical models. No other entity types are supported.",source:"@site/genDocs/docs/features/feature-guides/logical-models/overview.md",sourceDirName:"docs/features/feature-guides/logical-models",slug:"/features/feature-guides/logical-models/overview",permalink:"/docs/features/feature-guides/logical-models/overview",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/features/feature-guides/logical-models/overview.md",tags:[],version:"current",frontMatter:{title:"Logical Models",slug:"/features/feature-guides/logical-models/overview",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/features/feature-guides/logical-models/overview.md"},sidebar:"overviewSidebar",previous:{title:"OpenLineage",permalink:"/docs/lineage/openlineage"},next:{title:"Logical Models",permalink:"/docs/features/feature-guides/logical-models/overview"}},p={},d=[{value:"What is a Logical Model",id:"what-is-a-logical-model",level:2},{value:"How It Looks",id:"how-it-looks",level:2},{value:"Creating Logical Models",id:"creating-logical-models",level:2},{value:"Create Dataset in &quot;logical&quot; Platform",id:"create-dataset-in-logical-platform",level:3},{value:"Create Dataset in Custom Platform",id:"create-dataset-in-custom-platform",level:3},{value:"Linking Logical Models",id:"linking-logical-models",level:2},{value:"OpenAPI",id:"openapi",level:3},{value:"Python SDK",id:"python-sdk",level:3}],u={toc:d},m="wrapper";function g(e){var{components:t}=e,a=l(e,["components"]);return(0,n.yg)(m,o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){r(e,t,a[t])}))}return e}({},u,a),{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"logical-models"},"Logical Models"),(0,n.yg)("admonition",{title:"Supported Entity Types",type:"note"},(0,n.yg)("p",{parentName:"admonition"},"Currently we only support datasets and by extension schema fields for logical models. No other entity types are supported.")),(0,n.yg)("h2",{id:"what-is-a-logical-model"},"What is a Logical Model"),(0,n.yg)("p",null,"A logical model represents the concept and structure of a database table, without being tied to any single physical instantiation in some source system. Like any DataHub dataset entity, a logical model describes its columns, including data types and descriptions, and can be attributed with other metadata like tags, terms, owners, and custom properties. But unlike physical datasets, logical models do not represent a table in a source system that actually exists, in which data is stored and can be queried."),(0,n.yg)("p",null,"Logical models are useful for those who have multiple tables that represent the same type or shape of data, or store the same data. This is common for multi-cloud data ecosystems, in which the same table may be replicated across several cloud providers, e.g. Snowflake, Redshift, and BigQuery. It is also useful in cases where multiple replicas exist in a single system, such as gold/silver/bronze layers. Logical models should be linked to each physical representation to expose this relationship in DataHub. DataHub Cloud customers can take advantage further with ",(0,n.yg)("a",{parentName:"p",href:"/docs/features/feature-guides/logical-models/centralized-management"},"Centralized Management"),", in which every physical child's metadata can be managed at the logical model level."),(0,n.yg)("h2",{id:"how-it-looks"},"How It Looks"),(0,n.yg)("admonition",{title:"Feature Flag",type:"note"},(0,n.yg)("p",{parentName:"admonition"},"The environment variable ",(0,n.yg)("inlineCode",{parentName:"p"},"LOGICAL_MODELS_ENABLED")," must be set to ",(0,n.yg)("inlineCode",{parentName:"p"},"true")," on ",(0,n.yg)("inlineCode",{parentName:"p"},"datahub-gms")," for logical models to be viewed in the UI.")),(0,n.yg)("p",null,"For example, suppose there exists a ",(0,n.yg)("inlineCode",{parentName:"p"},"Users")," table Snowflake, an ",(0,n.yg)("inlineCode",{parentName:"p"},"AllUsers")," table in BigQuery, and a ",(0,n.yg)("inlineCode",{parentName:"p"},"UsersAttributes")," table Apache Hive. These three tables may have different names and slightly different structures, but logically represent the same data: a table of users, with certain information (columns) for each user. We create a logical table called ",(0,n.yg)("inlineCode",{parentName:"p"},"Users")," and link it to each physical child:"),(0,n.yg)("p",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"60px"}},(0,n.yg)("img",{width:"40%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/logical/relationship-diagram.png"})),(0,n.yg)("p",null,"Once the relationships are ",(0,n.yg)("a",{parentName:"p",href:"#creating-logical-models"},"created"),", they will show up in the entity sidebar for both logical parents and their physical children:"),(0,n.yg)("p",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"60px"}},(0,n.yg)("img",{width:"40%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/logical/logical-parent.png"}),(0,n.yg)("img",{width:"40%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/logical/physical-child.png"})),(0,n.yg)("p",null,"Columns on the logical parent and physical children can be linked as well:"),(0,n.yg)("p",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"60px"}},(0,n.yg)("img",{width:"40%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/logical/logical-parent-column.png"}),(0,n.yg)("img",{width:"40%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/logical/physical-child-column.png"})),(0,n.yg)("h2",{id:"creating-logical-models"},"Creating Logical Models"),(0,n.yg)("p",null,"Logical models are created like any DataHub dataset. We recommend using the Python SDK."),(0,n.yg)("admonition",{title:"Logical Model Platform",type:"note"},(0,n.yg)("p",{parentName:"admonition"},"All DataHub datasets require a platform, representing where the dataset exists. If your logical models are stored in a system users are familiar with, we recommend creating a custom platform for that system and providing a custom icon. Otherwise, we recommend using the platform ",(0,n.yg)("inlineCode",{parentName:"p"},"logical"),", which has a special default icon.")),(0,n.yg)("h3",{id:"create-dataset-in-logical-platform"},'Create Dataset in "logical" Platform'),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'    from datahub.sdk import DataHubClient, Dataset\n    client = DataHubClient.from_env()\n    dataset = Dataset(\n        platform="logical",\n        name=logical_model_name,\n        description=logical_model_description,\n        schema=[\n            # tuples of (field name / field path, data type, description)\n            (\n                "zipcode",\n                "varchar(50)",\n                "This is the zipcode of the address. Specified using extended form and limited to addresses in the United States",\n            ),\n            ("street", "varchar(100)", "Street corresponding to the address"),\n            ("date_column", "date", "Date of the last sale date for this property"),\n        ],\n    )\n    client.entities.upsert(dataset)\n')),(0,n.yg)("h3",{id:"create-dataset-in-custom-platform"},"Create Dataset in Custom Platform"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'    # Create custom platform with custom logo\n    from datahub.sdk import DataHubClient\n    from datahub.emitter.mcp import MetadataChangeProposalWrapper\n    from datahub.metadata.schema_classes import DataPlatformInfoClass, PlatformTypeClass\n    from datahub.metadata.urns import DataPlatformUrn\n\n    urn = DataPlatformUrn("<platformName>").urn()\n    aspect = DataPlatformInfoClass(\n        name="<platformName>",\n        type=PlatformTypeClass.OTHERS,\n        datasetNameDelimiter=".",\n        logoUrl="<url>"\n    )\n    client = DataHubClient.from_env()\n    client._graph.emit(MetadataChangeProposalWrapper(entityUrn=urn, aspect=aspect))\n\n    # Create dataset in custom platform\n    from datahub.sdk import DataHubClient, Dataset\n    client = DataHubClient.from_env()\n    dataset = Dataset(\n        platform="<platformName>",\n        ...  # See above\n    )\n    client.entities.upsert(dataset)\n')),(0,n.yg)("h2",{id:"linking-logical-models"},"Linking Logical Models"),(0,n.yg)("p",null,"At its core, the logical -> physical relationship is created by the ",(0,n.yg)("a",{parentName:"p",href:"/docs/generated/metamodel/entities/dataset#logicalparent"},(0,n.yg)("inlineCode",{parentName:"a"},"LogicalParent"))," aspect. To link columns, this aspect must also be created on each child schmea field entity. However, for ease of use, we recommend the OpenAPI endpoint."),(0,n.yg)("h3",{id:"openapi"},"OpenAPI"),(0,n.yg)("p",null,"The OpenAPI endpoint creates a logical -> physical relationship for a single logical-physical pair, as well as the column-level relationships between their columns, if specified."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \'http://localhost:8080/openapi/v3/logical/<physical_child_urn>/relationship/physicalInstanceOf/<logical_model_urn>\' \\\n  -H \'accept: application/json\' \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "<logical_column_name_0>": "<physical_column_name_0>",\n    "<logical_column_name_1>": "<physical_column_name_1>",\n    "<logical_column_name_2>": "<physical_column_name_2>"\n  }\'\n')),(0,n.yg)("p",null,"These relationships can also be removed (as of DataHub Cloud v0.3.15):"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"curl -X DELETE 'http://localhost:8080/openapi/v3/logical/<physical_child_urn>/relationship/physicalInstanceOf' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json'\n")),(0,n.yg)("h3",{id:"python-sdk"},"Python SDK"),(0,n.yg)("p",null,"The Python SDK can also query the same endpoint:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'    from datahub.sdk import DataHubClient\n    client = DataHubClient.from_env()\n    url = f"{client._graph.config.server}/openapi/v3/logical/{child_urn}/relationship/physicalInstanceOf/{parent_urn}"\n    client._graph._post_generic(url, {column.parent_name: column.child_name for column in columns})\n')),(0,n.yg)("p",null,"Or it can create a single relationship by emitting the ",(0,n.yg)("inlineCode",{parentName:"p"},"LogicalParent")," aspect."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},"    from datahub.sdk import DataHubClient\n    from datahub.emitter.mcp import MetadataChangeProposalWrapper\n    from datahub.metadata.schema_classes import EdgeClass, LogicalParentClass\n    client = DataHubClient.from_env()\n\n    client._graph.emit(MetadataChangeProposalWrapper(entityUrn=child_urn, aspect=LogicalParentClass(parent=EdgeClass(destinationUrn=parent_urn))))\n")),(0,n.yg)("p",null,"The relationship can also be removed:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},"    from datahub.sdk import DataHubClient\n    from datahub.emitter.mcp import MetadataChangeProposalWrapper\n    from datahub.metadata.schema_classes import EdgeClass, LogicalParentClass\n    client = DataHubClient.from_env()\n\n    client._graph.emit(MetadataChangeProposalWrapper(entityUrn=child_urn, aspect=LogicalParentClass(parent=None)))\n")))}g.isMDXComponent=!0}}]);