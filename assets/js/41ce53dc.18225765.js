"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[70397],{15680:(e,t,a)=>{a.d(t,{xA:()=>s,yg:()=>f});var r=a(96540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),d=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=d(e.components);return r.createElement(p.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=d(a),u=n,f=c["".concat(p,".").concat(u)]||c[u]||m[u]||o;return a?r.createElement(f,i(i({ref:t},s),{},{components:a})):r.createElement(f,i({ref:t},s))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:n,i[1]=l;for(var d=2;d<o;d++)i[d]=a[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},61691:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>f,frontMatter:()=>l,metadata:()=>d,toc:()=>c});a(96540);var r=a(15680);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}const l={title:"What is a metadata delta?",slug:"/what/delta",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/what/delta.md"},p="What is a metadata delta?",d={unversionedId:"docs/what/delta",id:"docs/what/delta",title:"What is a metadata delta?",description:"Rest.li supports partial update natively without needing explicitly defined models.",source:"@site/genDocs/docs/what/delta.md",sourceDirName:"docs/what",slug:"/what/delta",permalink:"/docs/what/delta",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/what/delta.md",tags:[],version:"current",frontMatter:{title:"What is a metadata delta?",slug:"/what/delta",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/what/delta.md"}},s={},c=[],m={toc:c},u="wrapper";function f(e){var{components:t}=e,a=i(e,["components"]);return(0,r.yg)(u,o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){n(e,t,a[t])}))}return e}({},m,a),{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"what-is-a-metadata-delta"},"What is a metadata delta?"),(0,r.yg)("p",null,"Rest.li supports ",(0,r.yg)("a",{parentName:"p",href:"https://linkedin.github.io/rest.li/user_guide/restli_server#partial_update"},"partial update")," natively without needing explicitly defined models.\nHowever, the granularity of update is always limited to each field in a PDL model.\nThere are cases where the update need to happen at an even finer grain, e.g. adding or removing items from an array."),(0,r.yg)("p",null,"To this end, we\u2019re proposing the following entity-specific metadata delta model that allows atomic partial updates at any desired granularity.\nNote that:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Just like metadata ",(0,r.yg)("a",{parentName:"li",href:"/docs/what/aspect"},"aspects"),", we\u2019re not imposing any limit on the partial update model, as long as it\u2019s a valid PDL record.\nThis is because the rest.li endpoint will have the logic that performs the corresponding partial update based on the information in the model.\nThat said, it\u2019s common to have fields that denote the list of items to be added or removed (e.g. ",(0,r.yg)("inlineCode",{parentName:"li"},"membersToAdd")," & ",(0,r.yg)("inlineCode",{parentName:"li"},"membersToRemove")," from below)"),(0,r.yg)("li",{parentName:"ol"},"Similar to metadata ",(0,r.yg)("a",{parentName:"li",href:"/docs/what/snapshot"},"snapshots"),", entity that supports metadata delta will add an entity-specific metadata delta\n(e.g. ",(0,r.yg)("inlineCode",{parentName:"li"},"GroupDelta")," from below) that unions all supported partial update models."),(0,r.yg)("li",{parentName:"ol"},"The entity-specific metadata delta is then added to the global ",(0,r.yg)("inlineCode",{parentName:"li"},"Delta")," typeref, which is added as part of ",(0,r.yg)("a",{parentName:"li",href:"/docs/what/mxe#metadata-change-event-mce"},"Metadata Change Event")," and used during ",(0,r.yg)("a",{parentName:"li",href:"/docs/architecture/metadata-ingestion"},"Metadata Ingestion"),".")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"namespace com.linkedin.group\n\nimport com.linkedin.common.CorpuserUrn\n\n/**\n * A metadata delta for a specific group entity\n */\nrecord MembershipPartialUpdate {\n\n  /** List of members to be added to the group */\n  membersToAdd: array[CorpuserUrn]\n\n  /** List of members to be removed from the group */\n  membersToRemove: array[CorpuserUrn]\n}\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"namespace com.linkedin.metadata.delta\n\nimport com.linkedin.common.CorpGroupUrn\nimport com.linkedin.group.MembershipPartialUpdate\n\n/**\n * A metadata delta for a specific group entity\n */\nrecord GroupDelta {\n\n  /** URN for the entity the metadata delta is associated with */\n  urn: CorpGroupUrn\n\n  /** The specific type of metadata delta to apply */\n  delta: union[MembershipPartialUpdate]\n}\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"namespace com.linkedin.metadata.delta\n\n/**\n * A union of all supported metadata delta types.\n */\ntyperef Delta = union[GroupDelta]\n")))}f.isMDXComponent=!0}}]);