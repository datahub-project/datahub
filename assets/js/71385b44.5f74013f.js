"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[11083],{15680:(e,t,n)=>{n.d(t,{xA:()=>g,yg:()=>d});var a=n(96540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},g=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,g=i(e,["components","mdxType","originalType","parentName"]),c=u(n),m=o,d=c["".concat(s,".").concat(m)]||c[m]||p[m]||r;return n?a.createElement(d,l(l({ref:t},g),{},{components:n})):a.createElement(d,l({ref:t},g))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:o,l[1]=i;for(var u=2;u<r;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},59649:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>u,toc:()=>c});n(96540);var a=n(15680);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const i={title:"LangChain Integration",slug:"/dev-guides/agent-context/langchain",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/dev-guides/agent-context/langchain.md"},s="LangChain Integration",u={unversionedId:"docs/dev-guides/agent-context/langchain",id:"docs/dev-guides/agent-context/langchain",title:"LangChain Integration",description:"\ud83d\udcda Navigation: \u2190 Back to Agent Context Kit | Snowflake Integration \u2192",source:"@site/genDocs/docs/dev-guides/agent-context/langchain.md",sourceDirName:"docs/dev-guides/agent-context",slug:"/dev-guides/agent-context/langchain",permalink:"/docs/dev-guides/agent-context/langchain",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/dev-guides/agent-context/langchain.md",tags:[],version:"current",frontMatter:{title:"LangChain Integration",slug:"/dev-guides/agent-context/langchain",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/dev-guides/agent-context/langchain.md"},sidebar:"overviewSidebar",previous:{title:"Agent Context Kit",permalink:"/docs/dev-guides/agent-context/agent-context"},next:{title:"Snowflake Intelligence Integration",permalink:"/docs/dev-guides/agent-context/snowflake"}},g={},c=[{value:"What Problem Does This Solve?",id:"what-problem-does-this-solve",level:2},{value:"What You Can Build",id:"what-you-can-build",level:3},{value:"Overview",id:"overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"Basic Setup",id:"basic-setup",level:3},{value:"Complete Working Example",id:"complete-working-example",level:2},{value:"Example Output",id:"example-output",level:3},{value:"Advanced Usage",id:"advanced-usage",level:2},{value:"Using with Memory",id:"using-with-memory",level:3},{value:"Filtering Tools",id:"filtering-tools",level:3},{value:"Custom Tool Configuration",id:"custom-tool-configuration",level:3},{value:"More Examples",id:"more-examples",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Tool Execution Errors",id:"tool-execution-errors",level:3},{value:"Agent Not Using Tools",id:"agent-not-using-tools",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Import Errors",id:"import-errors",level:3},{value:"Getting Help",id:"getting-help",level:3}],p={toc:c},m="wrapper";function d(e){var{components:t}=e,n=l(e,["components"]);return(0,a.yg)(m,r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){o(e,t,n[t])}))}return e}({},p,n),{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"langchain-integration"},"LangChain Integration"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},(0,a.yg)("strong",{parentName:"p"},"\ud83d\udcda Navigation"),": ",(0,a.yg)("a",{parentName:"p",href:"/docs/dev-guides/agent-context/agent-context"},"\u2190 Back to Agent Context Kit")," | ",(0,a.yg)("a",{parentName:"p",href:"/docs/dev-guides/agent-context/snowflake"},"Snowflake Integration \u2192"))),(0,a.yg)("h2",{id:"what-problem-does-this-solve"},"What Problem Does This Solve?"),(0,a.yg)("p",null,"LangChain is a popular framework for building AI agent applications, but agents often struggle with data questions because they:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Don't have access to your organization's data catalog"),(0,a.yg)("li",{parentName:"ul"},"Hallucinate table names, schemas, and relationships"),(0,a.yg)("li",{parentName:"ul"},"Can't discover data ownership or documentation"),(0,a.yg)("li",{parentName:"ul"},"Have no context about data quality or lineage")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"The LangChain integration")," provides pre-built LangChain tools that give your agents direct access to DataHub metadata, enabling them to answer data questions accurately using real metadata from your organization."),(0,a.yg)("h3",{id:"what-you-can-build"},"What You Can Build"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Data Discovery Chatbot"),': "Show me all datasets about customers in the marketing domain"'),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Schema Explorer"),': "What columns exist in the user_events table and what do they mean?"'),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Lineage Tracer"),': "What dashboards use data from this raw table?"'),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Documentation Assistant"),": \"Find the business definition of 'monthly recurring revenue'\""),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Compliance Helper"),': "List all tables with PII and their owners"')),(0,a.yg)("h2",{id:"overview"},"Overview"),(0,a.yg)("p",null,"The LangChain optional add-on lets you connect DataHub's context tools directly to your LangChain Agent."),(0,a.yg)("h2",{id:"installation"},"Installation"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"pip install datahub-agent-context[langchain]\n")),(0,a.yg)("h3",{id:"prerequisites"},"Prerequisites"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Python 3.10 or higher"),(0,a.yg)("li",{parentName:"ul"},"LangChain (",(0,a.yg)("inlineCode",{parentName:"li"},"pip install langchain langchain-openai"),")"),(0,a.yg)("li",{parentName:"ul"},"DataHub instance with access token"),(0,a.yg)("li",{parentName:"ul"},"OpenAI API key (or other LLM provider)")),(0,a.yg)("h2",{id:"quick-start"},"Quick Start"),(0,a.yg)("h3",{id:"basic-setup"},"Basic Setup"),(0,a.yg)("p",null,"Build AI agents with pre-built LangChain tools:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'from datahub.sdk.main_client import DataHubClient\nfrom datahub_agent_context.langchain_tools import build_langchain_tools\n\n# Initialize DataHub client from environment (recommended)\nclient = DataHubClient.from_env()\n# Or specify server and token explicitly:\n# client = DataHubClient(server="http://localhost:8080", token="YOUR_TOKEN")\n\n# Build all tools (read-only by default)\ntools = build_langchain_tools(client, include_mutations=False)\n\n# Or include mutation tools for tagging, descriptions, etc.\ntools = build_langchain_tools(client, include_mutations=True)\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Note"),": ",(0,a.yg)("inlineCode",{parentName:"p"},"include_mutations=False")," provides read-only tools (search, get entities, lineage). Set to ",(0,a.yg)("inlineCode",{parentName:"p"},"True")," to enable tools that modify metadata (add tags, update descriptions, etc.)."),(0,a.yg)("h2",{id:"complete-working-example"},"Complete Working Example"),(0,a.yg)("p",null,"Here's a full example of a DataHub-powered LangChain agent:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'from datahub.sdk.main_client import DataHubClient\nfrom datahub_agent_context.langchain_tools import build_langchain_tools\nfrom langchain_openai import ChatOpenAI\nfrom langchain.agents import AgentExecutor, create_tool_calling_agent\nfrom langchain.prompts import ChatPromptTemplate\n\n# Initialize DataHub client\nclient = DataHubClient.from_env()\n# Or: client = DataHubClient(server="http://localhost:8080", token="YOUR_TOKEN")\n\n# Build DataHub tools (read-only)\ntools = build_langchain_tools(client, include_mutations=False)\n\n# Initialize LLM\nllm = ChatOpenAI(\n    model="gpt-4",\n    temperature=0,\n    openai_api_key="YOUR_OPENAI_KEY"\n)\n\n# Create agent prompt\nprompt = ChatPromptTemplate.from_messages([\n    ("system", """You are a helpful data catalog assistant with access to DataHub metadata.\n\n    Use the available tools to:\n    - Search for datasets, dashboards, and other data assets\n    - Get detailed entity information including schemas and descriptions\n    - Trace data lineage to understand data flow\n    - Find documentation and business glossary terms\n\n    Always provide URNs when referencing entities so users can find them in DataHub.\n    Be concise but thorough in your explanations."""),\n    ("human", "{input}"),\n    ("placeholder", "{agent_scratchpad}"),\n])\n\n# Create agent\nagent = create_tool_calling_agent(llm, tools, prompt)\nagent_executor = AgentExecutor(\n    agent=agent,\n    tools=tools,\n    verbose=True,\n    handle_parsing_errors=True\n)\n\n# Use the agent\ndef ask_datahub(question: str):\n    """Ask a question about your data catalog."""\n    result = agent_executor.invoke({"input": question})\n    return result["output"]\n\n# Example queries\nif __name__ == "__main__":\n    # Find datasets\n    print(ask_datahub("Find all datasets about customers"))\n\n    # Get schema information\n    print(ask_datahub("What columns are in the user_events dataset?"))\n\n    # Trace lineage\n    print(ask_datahub("Show me the upstream sources for the revenue dashboard"))\n\n    # Find documentation\n    print(ask_datahub("What\'s the business definition of \'churn rate\'?"))\n')),(0,a.yg)("h3",{id:"example-output"},"Example Output"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"User: Find all datasets about customers\n\nAgent: I found 3 datasets related to customers:\n\n1. **customer_profiles** (urn:li:dataset:(urn:li:dataPlatform:snowflake,prod.analytics.customer_profiles,PROD))\n   - Description: Core customer profile data including demographics and preferences\n   - Platform: Snowflake\n   - Domain: Marketing\n\n2. **customer_transactions** (urn:li:dataset:(urn:li:dataPlatform:postgres,transactions.customer_orders,PROD))\n   - Description: Historical customer purchase transactions\n   - Platform: PostgreSQL\n   - Domain: Finance\n\n3. **customer_360** (urn:li:dataset:(urn:li:dataPlatform:bigquery,analytics.customer_360,PROD))\n   - Description: Unified customer view combining profile, transactions, and interactions\n   - Platform: BigQuery\n   - Domain: Analytics\n\nYou can view these in DataHub at: https://your-datahub.acryl.io\n")),(0,a.yg)("h2",{id:"advanced-usage"},"Advanced Usage"),(0,a.yg)("h3",{id:"using-with-memory"},"Using with Memory"),(0,a.yg)("p",null,"Add conversation memory to your agent:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'from langchain.memory import ConversationBufferMemory\n\nmemory = ConversationBufferMemory(\n    memory_key="chat_history",\n    return_messages=True\n)\n\nagent_executor = AgentExecutor(\n    agent=agent,\n    tools=tools,\n    memory=memory,\n    verbose=True\n)\n')),(0,a.yg)("h3",{id:"filtering-tools"},"Filtering Tools"),(0,a.yg)("p",null,"Include only specific tool categories:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},"from datahub_agent_context.langchain_tools import (\n    build_search_tools,\n    build_entity_tools,\n    build_lineage_tools\n)\n\n# Only search and entity tools\nsearch_tools = build_search_tools(client)\nentity_tools = build_entity_tools(client)\ntools = search_tools + entity_tools\n")),(0,a.yg)("h3",{id:"custom-tool-configuration"},"Custom Tool Configuration"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},"# Configure specific tools\ntools = build_langchain_tools(\n    client,\n    include_mutations=False,\n    max_search_results=20,  # Increase search result limit\n    max_lineage_depth=5      # Deeper lineage traversal\n)\n")),(0,a.yg)("h2",{id:"more-examples"},"More Examples"),(0,a.yg)("p",null,"Complete examples are available in the datahub-project repo:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/datahub-agent-context/examples/langchain/basic_agent.py"},"Basic Agent")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/datahub-agent-context/examples/langchain/simple_search.py"},"Simple Search"))),(0,a.yg)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,a.yg)("h3",{id:"tool-execution-errors"},"Tool Execution Errors"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Problem"),": Agent tries to use tools but gets errors"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Solutions"),":"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Verify DataHub connection: Test ",(0,a.yg)("inlineCode",{parentName:"li"},"client.config")," is correctly set"),(0,a.yg)("li",{parentName:"ul"},"Check tool availability: Print ",(0,a.yg)("inlineCode",{parentName:"li"},"[tool.name for tool in tools]")," to see available tools"),(0,a.yg)("li",{parentName:"ul"},"Enable verbose mode: Set ",(0,a.yg)("inlineCode",{parentName:"li"},"verbose=True")," in AgentExecutor to see tool calls"),(0,a.yg)("li",{parentName:"ul"},"Validate token permissions: Ensure token has read access (and write access if using mutations)")),(0,a.yg)("h3",{id:"agent-not-using-tools"},"Agent Not Using Tools"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Problem"),": Agent responds without calling DataHub tools"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Solutions"),":"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Improve system prompt: Explicitly instruct agent to use tools"),(0,a.yg)("li",{parentName:"ul"},"Use better examples: Add few-shot examples of tool usage to prompt"),(0,a.yg)("li",{parentName:"ul"},"Check model compatibility: Ensure LLM supports tool/function calling (GPT-4, GPT-3.5-turbo, Claude 3+)"),(0,a.yg)("li",{parentName:"ul"},"Reduce temperature: Set ",(0,a.yg)("inlineCode",{parentName:"li"},"temperature=0")," for more deterministic tool usage")),(0,a.yg)("h3",{id:"performance-issues"},"Performance Issues"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Problem"),": Agent responses are slow"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Solutions"),":"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Limit search results: Reduce ",(0,a.yg)("inlineCode",{parentName:"li"},"max_search_results")," in tool configuration"),(0,a.yg)("li",{parentName:"ul"},"Use streaming: Enable streaming responses with ",(0,a.yg)("inlineCode",{parentName:"li"},"stream=True")),(0,a.yg)("li",{parentName:"ul"},"Cache results: Implement caching for frequently accessed metadata"),(0,a.yg)("li",{parentName:"ul"},"Use faster models: Consider gpt-3.5-turbo for simpler queries")),(0,a.yg)("h3",{id:"import-errors"},"Import Errors"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Problem"),": ",(0,a.yg)("inlineCode",{parentName:"p"},"ModuleNotFoundError")," for LangChain components"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Solutions"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"# Install all required dependencies\npip install datahub-agent-context[langchain]\npip install langchain langchain-openai\n\n# Or install from scratch\npip install datahub-agent-context langchain langchain-openai langchain-community\n")),(0,a.yg)("h3",{id:"getting-help"},"Getting Help"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"LangChain Docs"),": ",(0,a.yg)("a",{parentName:"li",href:"https://python.langchain.com/docs/modules/agents/"},"LangChain Agent Documentation")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"DataHub Agent Context"),": ",(0,a.yg)("a",{parentName:"li",href:"/docs/dev-guides/agent-context/agent-context"},"Agent Context Kit Guide")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"GitHub Issues"),": ",(0,a.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/issues"},"Report issues")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Community Slack"),": ",(0,a.yg)("a",{parentName:"li",href:"https://datahub.com/slack/"},"Join DataHub Slack"))))}d.isMDXComponent=!0}}]);