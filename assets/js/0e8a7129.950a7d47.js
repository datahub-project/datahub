"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[76912],{41404:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>p,contentTitle:()=>m,default:()=>f,frontMatter:()=>g,metadata:()=>d,toc:()=>c});a(96540);var t=a(15680),i=a(53720),s=a(5400);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})),e}function o(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},s=Object.keys(e);for(t=0;t<s.length;t++)a=s[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)a=s[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const g={sidebar_position:17,title:"DataHubDocuments",slug:"/generated/ingestion/sources/datahub-documents",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/datahub-documents.md"},m="DataHubDocuments",d={unversionedId:"docs/generated/ingestion/sources/datahub-documents",id:"docs/generated/ingestion/sources/datahub-documents",title:"DataHubDocuments",description:"Process Document entities from DataHub and generate semantic embeddings for semantic search.",source:"@site/genDocs/docs/generated/ingestion/sources/datahub-documents.md",sourceDirName:"docs/generated/ingestion/sources",slug:"/generated/ingestion/sources/datahub-documents",permalink:"/docs/generated/ingestion/sources/datahub-documents",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/datahub-documents.md",tags:[],version:"current",sidebarPosition:17,frontMatter:{sidebar_position:17,title:"DataHubDocuments",slug:"/generated/ingestion/sources/datahub-documents",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/datahub-documents.md"},sidebar:"overviewSidebar",previous:{title:"DataHubDebug",permalink:"/docs/generated/ingestion/sources/datahubdebug"},next:{title:"DataHubGc",permalink:"/docs/generated/ingestion/sources/datahubgc"}},p={},c=[{value:"Important Capabilities",id:"important-capabilities",level:3},{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:3},{value:"1. Smart Defaults with Server Configuration Sync",id:"1-smart-defaults-with-server-configuration-sync",level:4},{value:"2. Dual Operating Modes",id:"2-dual-operating-modes",level:4},{value:"3. Incremental Processing",id:"3-incremental-processing",level:4},{value:"4. Flexible Platform Filtering",id:"4-flexible-platform-filtering",level:4},{value:"Prerequisites",id:"prerequisites",level:2},{value:"1. DataHub Server Configuration",id:"1-datahub-server-configuration",level:3},{value:"2. Document Entities in DataHub",id:"2-document-entities-in-datahub",level:3},{value:"3. AWS Credentials (for Bedrock)",id:"3-aws-credentials-for-bedrock",level:3},{value:"4. Environment Variables",id:"4-environment-variables",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"1. Event-Driven Processing (Production)",id:"1-event-driven-processing-production",level:3},{value:"2. Batch Processing (Initial Load)",id:"2-batch-processing-initial-load",level:3},{value:"3. Platform-Specific Processing",id:"3-platform-specific-processing",level:3},{value:"4. Force Reprocessing",id:"4-force-reprocessing",level:3},{value:"5. Custom Chunking and Embedding",id:"5-custom-chunking-and-embedding",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Processing Pipeline",id:"processing-pipeline",level:3},{value:"Event Mode Flow",id:"event-mode-flow",level:3},{value:"Incremental Processing",id:"incremental-processing",level:3},{value:"Configuration Deep Dive",id:"configuration-deep-dive",level:2},{value:"Platform Filtering",id:"platform-filtering",level:3},{value:"Event Mode Configuration",id:"event-mode-configuration",level:3},{value:"Chunking Strategies",id:"chunking-strategies",level:3},{value:"Embedding Configuration",id:"embedding-configuration",level:3},{value:"Stateful Ingestion",id:"stateful-ingestion",level:3},{value:"Performance Tuning",id:"performance-tuning",level:2},{value:"Batch Size",id:"batch-size",level:3},{value:"Event Mode Settings",id:"event-mode-settings",level:3},{value:"Filtering",id:"filtering",level:3},{value:"Monitoring and Observability",id:"monitoring-and-observability",level:2},{value:"Report Metrics",id:"report-metrics",level:3},{value:"Logging",id:"logging",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: &quot;Semantic search is not enabled on the DataHub server&quot;",id:"issue-semantic-search-is-not-enabled-on-the-datahub-server",level:3},{value:"Issue: &quot;Server does not support semantic search configuration API&quot;",id:"issue-server-does-not-support-semantic-search-configuration-api",level:3},{value:"Issue: Embedding Configuration Validation Fails",id:"issue-embedding-configuration-validation-fails",level:3},{value:"Issue: No Documents Being Processed",id:"issue-no-documents-being-processed",level:3},{value:"Issue: Event Mode Not Working",id:"issue-event-mode-not-working",level:3},{value:"Issue: AWS Credentials Error",id:"issue-aws-credentials-error",level:3},{value:"Issue: Slow Processing",id:"issue-slow-processing",level:3},{value:"Cost Estimation",id:"cost-estimation",level:2},{value:"AWS Bedrock Pricing (Cohere Embed v3)",id:"aws-bedrock-pricing-cohere-embed-v3",level:3},{value:"Limitations",id:"limitations",level:2},{value:"Processing Limitations",id:"processing-limitations",level:3},{value:"Platform Filtering",id:"platform-filtering-1",level:3},{value:"State Management",id:"state-management",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"CLI based Ingestion",id:"cli-based-ingestion",level:3},{value:"Starter Recipe",id:"starter-recipe",level:3},{value:"Config Details",id:"config-details",level:3},{value:"Code Coordinates",id:"code-coordinates",level:3}],u={toc:c},y="wrapper";function f(e){var{components:n}=e,a=o(e,["components"]);return(0,t.yg)(y,r(function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(n){l(e,n,a[n])}))}return e}({},u,a),{components:n,mdxType:"MDXLayout"}),(0,t.yg)("h1",{id:"datahubdocuments"},"DataHubDocuments"),(0,t.yg)("h1",{id:"datahub-documents-source"},"DataHub Documents Source"),(0,t.yg)("p",null,"Process Document entities from DataHub and generate semantic embeddings for semantic search.\n",(0,t.yg)("img",{parentName:"p",src:"https://img.shields.io/badge/support%20status-incubating-blue",alt:"Incubating"})),(0,t.yg)("h3",{id:"important-capabilities"},"Important Capabilities"),(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:null},"Capability"),(0,t.yg)("th",{parentName:"tr",align:null},"Status"),(0,t.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"/docs/metadata-ingestion/docs/dev_guides/stateful#stale-entity-removal"},"Detect Deleted Entities")),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default via stateful ingestion.")))),(0,t.yg)("p",null,"Extract Document entities from DataHub and generate semantic embeddings for semantic search."),(0,t.yg)("p",null,"Supports batch mode (GraphQL) and event-driven mode (Kafka MCL) with incremental processing.\nAutomatically fetches embedding configuration from server to ensure alignment."),(0,t.yg)("admonition",{title:"Quick Start: Auto-Deploy for Semantic Search",type:"tip"},(0,t.yg)("p",{parentName:"admonition"},"To enable automatic semantic search indexing for your documents, deploy this source to DataHub with a simple command:"),(0,t.yg)("pre",{parentName:"admonition"},(0,t.yg)("code",{parentName:"pre",className:"language-bash"},'# Create minimal recipe and deploy with hourly schedule\ncat > /tmp/datahub-docs.yml << \'EOF\'\nsource:\n  type: datahub-documents\n  config: {}\nEOF\n\ndatahub ingest deploy -c /tmp/datahub-docs.yml --name "document-embeddings" --schedule "0 * * * *"\n')),(0,t.yg)("p",{parentName:"admonition"},"This creates a managed ingestion source in DataHub that automatically processes documents every hour and generates embeddings for semantic search."),(0,t.yg)("p",{parentName:"admonition"},(0,t.yg)("strong",{parentName:"p"},"What this does:")),(0,t.yg)("ul",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ul"},"\u2705 Deploys ingestion recipe to DataHub"),(0,t.yg)("li",{parentName:"ul"},"\u2705 Runs hourly (cron: ",(0,t.yg)("inlineCode",{parentName:"li"},"0 * * * *"),") to keep embeddings up-to-date"),(0,t.yg)("li",{parentName:"ul"},"\u2705 Uses event-driven mode (only processes changed documents)"),(0,t.yg)("li",{parentName:"ul"},"\u2705 Auto-configures from server (no manual embedding setup needed)")),(0,t.yg)("p",{parentName:"admonition"},(0,t.yg)("strong",{parentName:"p"},"Alternative schedules:")),(0,t.yg)("pre",{parentName:"admonition"},(0,t.yg)("code",{parentName:"pre",className:"language-bash"},'# Every 15 minutes: "*/15 * * * *"\n# Every 6 hours:    "0 */6 * * *"\n# Daily at 2 AM:    "0 2 * * *"\n')),(0,t.yg)("blockquote",{parentName:"admonition"},(0,t.yg)("p",{parentName:"blockquote"},(0,t.yg)("strong",{parentName:"p"},"Note:")," In future DataHub versions, GMS will run this automatically. For now, manual deployment is required."))),(0,t.yg)("h2",{id:"overview"},"Overview"),(0,t.yg)("p",null,"The DataHub Documents source processes Document entities already stored in DataHub and enriches them with semantic embeddings for semantic search. This source is designed to work with DataHub's native Document entities that have been created via GraphQL, Python SDK, or other ingestion sources (like Notion, Confluence, etc.)."),(0,t.yg)("h3",{id:"key-features"},"Key Features"),(0,t.yg)("h4",{id:"1-smart-defaults-with-server-configuration-sync"},"1. Smart Defaults with Server Configuration Sync"),(0,t.yg)("p",null,"The source ",(0,t.yg)("strong",{parentName:"p"},"automatically fetches embedding configuration from your DataHub server"),", ensuring perfect alignment:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Connects using environment variables (",(0,t.yg)("inlineCode",{parentName:"li"},"DATAHUB_GMS_URL"),", ",(0,t.yg)("inlineCode",{parentName:"li"},"DATAHUB_GMS_TOKEN"),")"),(0,t.yg)("li",{parentName:"ul"},"Fetches embedding provider config (provider, model, region, dimensions)"),(0,t.yg)("li",{parentName:"ul"},"Validates local config against server (if provided)"),(0,t.yg)("li",{parentName:"ul"},"Works with minimal ",(0,t.yg)("inlineCode",{parentName:"li"},"config: {}")," in your recipe")),(0,t.yg)("h4",{id:"2-dual-operating-modes"},"2. Dual Operating Modes"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Event-Driven Mode (Recommended):")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Processes documents in real-time from Kafka MCL events"),(0,t.yg)("li",{parentName:"ul"},"Only reprocesses when document content changes"),(0,t.yg)("li",{parentName:"ul"},"Efficient for continuous updates"),(0,t.yg)("li",{parentName:"ul"},"Automatically falls back to batch mode on first run")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Batch Mode:")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Fetches all documents via GraphQL"),(0,t.yg)("li",{parentName:"ul"},"Good for initial setup or periodic full refreshes"),(0,t.yg)("li",{parentName:"ul"},"Processes all matching documents")),(0,t.yg)("h4",{id:"3-incremental-processing"},"3. Incremental Processing"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Tracks document content hashes to skip unchanged documents"),(0,t.yg)("li",{parentName:"ul"},"Uses DataHub's stateful ingestion framework"),(0,t.yg)("li",{parentName:"ul"},"Reduces processing time and API costs"),(0,t.yg)("li",{parentName:"ul"},"Force reprocess option available")),(0,t.yg)("h4",{id:"4-flexible-platform-filtering"},"4. Flexible Platform Filtering"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Process all NATIVE documents (default)"),(0,t.yg)("li",{parentName:"ul"},"Filter by specific platforms (e.g., ",(0,t.yg)("inlineCode",{parentName:"li"},'["notion", "confluence"]'),")"),(0,t.yg)("li",{parentName:"ul"},"Process all documents regardless of source type")),(0,t.yg)("h2",{id:"prerequisites"},"Prerequisites"),(0,t.yg)("h3",{id:"1-datahub-server-configuration"},"1. DataHub Server Configuration"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"You MUST configure semantic search on your DataHub server before using this source.")),(0,t.yg)("p",null,"See the ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/docs/how-to/semantic-search-configuration"},"Semantic Search Configuration Guide")," for complete setup instructions."),(0,t.yg)("p",null,"Required server configuration:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"OpenSearch 2.17+ with k-NN plugin enabled"),(0,t.yg)("li",{parentName:"ul"},"AWS Bedrock or Cohere embedding provider configured"),(0,t.yg)("li",{parentName:"ul"},"Semantic search enabled in ",(0,t.yg)("inlineCode",{parentName:"li"},"application.yml"))),(0,t.yg)("h3",{id:"2-document-entities-in-datahub"},"2. Document Entities in DataHub"),(0,t.yg)("p",null,"This source processes existing Document entities. Documents can be created through:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"GraphQL API"),": Create documents programmatically"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Python SDK"),": Use ",(0,t.yg)("inlineCode",{parentName:"li"},"datahub.sdk.document.Document")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"External Sources"),": Notion, Confluence, SharePoint sources that emit Document entities")),(0,t.yg)("h3",{id:"3-aws-credentials-for-bedrock"},"3. AWS Credentials (for Bedrock)"),(0,t.yg)("p",null,"If using AWS Bedrock for embeddings:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"IAM permissions for ",(0,t.yg)("inlineCode",{parentName:"li"},"bedrock:InvokeModel")),(0,t.yg)("li",{parentName:"ul"},"AWS credentials configured (env vars, instance role, or ECS task role)"),(0,t.yg)("li",{parentName:"ul"},"Bedrock model access enabled in AWS Console")),(0,t.yg)("h3",{id:"4-environment-variables"},"4. Environment Variables"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},'# Required for DataHub connection\nexport DATAHUB_GMS_URL="http://localhost:8080"\nexport DATAHUB_GMS_TOKEN="your-token-here"\n\n# Optional: AWS credentials (if not using instance/task roles)\nexport AWS_PROFILE="datahub-dev"\n# OR\nexport AWS_ACCESS_KEY_ID="your-key"\nexport AWS_SECRET_ACCESS_KEY="your-secret"\nexport AWS_REGION="us-west-2"\n')),(0,t.yg)("h2",{id:"common-use-cases"},"Common Use Cases"),(0,t.yg)("h3",{id:"1-event-driven-processing-production"},"1. Event-Driven Processing (Production)"),(0,t.yg)("p",null,"Process documents in real-time as they're created or updated:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"source:\n  type: datahub-documents\n  config:\n    # Event mode enabled by default in recent versions\n    event_mode:\n      enabled: true\n      idle_timeout_seconds: 60\n\nsink:\n  type: datahub-rest\n  config: {}\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"When to use:")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Production deployments"),(0,t.yg)("li",{parentName:"ul"},"Continuous document updates"),(0,t.yg)("li",{parentName:"ul"},"Real-time semantic search needs")),(0,t.yg)("h3",{id:"2-batch-processing-initial-load"},"2. Batch Processing (Initial Load)"),(0,t.yg)("p",null,"Process all documents in a single run:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: datahub-documents\n  config:\n    event_mode:\n      enabled: false\n\n    # Optional: Process specific platforms\n    platform_filter: ["notion", "confluence"]\n\nsink:\n  type: datahub-rest\n  config: {}\n')),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"When to use:")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Initial setup"),(0,t.yg)("li",{parentName:"ul"},"Periodic full refreshes"),(0,t.yg)("li",{parentName:"ul"},"Backfilling embeddings")),(0,t.yg)("h3",{id:"3-platform-specific-processing"},"3. Platform-Specific Processing"),(0,t.yg)("p",null,"Process documents from specific platforms only:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: datahub-documents\n  config:\n    # Process NATIVE documents + EXTERNAL from these platforms\n    platform_filter: ["notion", "confluence"]\n\n    incremental:\n      enabled: true\n\nsink:\n  type: datahub-rest\n  config: {}\n')),(0,t.yg)("h3",{id:"4-force-reprocessing"},"4. Force Reprocessing"),(0,t.yg)("p",null,"Reprocess all documents regardless of content changes:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"source:\n  type: datahub-documents\n  config:\n    incremental:\n      enabled: true\n      force_reprocess: true # Reprocess everything\n\n    # Useful when:\n    # - Changing chunking strategy\n    # - Updating embedding model\n    # - Fixing processing issues\n\nsink:\n  type: datahub-rest\n  config: {}\n")),(0,t.yg)("h3",{id:"5-custom-chunking-and-embedding"},"5. Custom Chunking and Embedding"),(0,t.yg)("p",null,"Override server configuration with local settings:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"source:\n  type: datahub-documents\n  config:\n    # Custom chunking\n    chunking:\n      strategy: by_title # or 'basic'\n      max_characters: 1000 # Larger chunks\n      combine_text_under_n_chars: 200\n\n    # Override embedding config (validates against server)\n    embedding:\n      provider: bedrock\n      model: cohere.embed-english-v3\n      model_embedding_key: cohere_embed_v3\n      aws_region: us-west-2\n      batch_size: 50\n\nsink:\n  type: datahub-rest\n  config: {}\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u26a0\ufe0f Warning:")," Custom embedding configs are validated against the server. Mismatches will cause errors."),(0,t.yg)("h2",{id:"how-it-works"},"How It Works"),(0,t.yg)("h3",{id:"processing-pipeline"},"Processing Pipeline"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"1. Fetch Mode Selection\n   \u251c\u2500 Event Mode: Subscribe to Kafka MCL events\n   \u2514\u2500 Batch Mode: GraphQL query for all documents\n\n2. For Each Document:\n   \u251c\u2500 Check incremental state (skip if unchanged)\n   \u251c\u2500 Partition markdown \u2192 structured elements\n   \u251c\u2500 Chunk elements \u2192 semantic chunks\n   \u2502   \u251c\u2500 by_title: Preserves document structure\n   \u2502   \u2514\u2500 basic: Fixed-size chunks with overlap\n   \u251c\u2500 Generate embeddings via LiteLLM\n   \u2502   \u2514\u2500 Batches of 25 (configurable)\n   \u2514\u2500 Emit SemanticContent aspect \u2192 DataHub\n\n3. State Management\n   \u251c\u2500 Batch Mode: Track document content hashes\n   \u2514\u2500 Event Mode: Track Kafka offsets\n")),(0,t.yg)("h3",{id:"event-mode-flow"},"Event Mode Flow"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"First Run (No State):")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Falls back to batch mode"),(0,t.yg)("li",{parentName:"ol"},"Captures current Kafka offset BEFORE processing"),(0,t.yg)("li",{parentName:"ol"},"Processes all documents"),(0,t.yg)("li",{parentName:"ol"},"Saves offset to state"),(0,t.yg)("li",{parentName:"ol"},"Next run continues from captured offset")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Subsequent Runs:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Loads last committed offset from state"),(0,t.yg)("li",{parentName:"ol"},"Consumes events from last position"),(0,t.yg)("li",{parentName:"ol"},"Processes only changed documents"),(0,t.yg)("li",{parentName:"ol"},"Updates offset after each batch"),(0,t.yg)("li",{parentName:"ol"},"Exits after idle timeout (no new events)")),(0,t.yg)("h3",{id:"incremental-processing"},"Incremental Processing"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Content Hash Calculation:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-python"},'hash_input = {\n    "text": document.text,\n    "partition_strategy": config.partition_strategy,\n    "chunking_strategy": config.chunking.strategy,\n    "max_characters": config.chunking.max_characters,\n    # ... other chunking params\n}\ncontent_hash = sha256(json.dumps(hash_input))\n')),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"When Documents Are Reprocessed:")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Text content changes"),(0,t.yg)("li",{parentName:"ul"},"Chunking configuration changes"),(0,t.yg)("li",{parentName:"ul"},"Partition strategy changes"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"force_reprocess: true")," is set")),(0,t.yg)("h2",{id:"configuration-deep-dive"},"Configuration Deep Dive"),(0,t.yg)("h3",{id:"platform-filtering"},"Platform Filtering"),(0,t.yg)("p",null,"The ",(0,t.yg)("inlineCode",{parentName:"p"},"platform_filter")," setting controls which documents are processed:"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},(0,t.yg)("inlineCode",{parentName:"strong"},"None")," (default):")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"platform_filter: null # or omit the field\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Processes all NATIVE documents (sourceType=NATIVE)"),(0,t.yg)("li",{parentName:"ul"},"Ignores EXTERNAL documents from other platforms")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Specific Platforms:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'platform_filter: ["notion", "confluence"]\n')),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Processes NATIVE documents"),(0,t.yg)("li",{parentName:"ul"},"PLUS EXTERNAL documents from specified platforms")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"All Documents:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'platform_filter: ["*"] # or ["ALL"]\n')),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Processes ALL documents regardless of source type or platform")),(0,t.yg)("h3",{id:"event-mode-configuration"},"Event Mode Configuration"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'event_mode:\n  enabled: true\n\n  # Consumer ID for offset tracking\n  consumer_id: "datahub-documents-{pipeline_name}" # Default\n\n  # Kafka topics to consume\n  topics:\n    - "MetadataChangeLog_Versioned_v1"\n\n  # Lookback window for first run\n  lookback_days: null # null = start from latest, or specify days\n\n  # Reset offsets to beginning (DANGEROUS - reprocesses everything)\n  reset_offsets: false\n\n  # Exit after N seconds with no new events\n  idle_timeout_seconds: 30\n\n  # Kafka poll settings\n  poll_timeout_seconds: 2\n  poll_limit: 100\n')),(0,t.yg)("h3",{id:"chunking-strategies"},"Chunking Strategies"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"by_title (Recommended):")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"chunking:\n  strategy: by_title\n  max_characters: 500\n  combine_text_under_n_chars: 100\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Preserves document structure"),(0,t.yg)("li",{parentName:"ul"},"Groups text under section headers"),(0,t.yg)("li",{parentName:"ul"},"Combines small chunks intelligently"),(0,t.yg)("li",{parentName:"ul"},"Better semantic coherence")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"basic:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"chunking:\n  strategy: basic\n  max_characters: 500\n  overlap: 50 # Character overlap between chunks\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Simple fixed-size chunks"),(0,t.yg)("li",{parentName:"ul"},"Configurable overlap"),(0,t.yg)("li",{parentName:"ul"},"No structure awareness")),(0,t.yg)("h3",{id:"embedding-configuration"},"Embedding Configuration"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Default (Fetch from Server):")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"embedding: {} # or omit entirely\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Automatically fetches config from server"),(0,t.yg)("li",{parentName:"ul"},"Ensures alignment with server's semantic search"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Recommended for production"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Override (Validated Against Server):")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"embedding:\n  provider: bedrock # bedrock, cohere, openai\n  model: cohere.embed-english-v3\n  model_embedding_key: cohere_embed_v3 # Must match server!\n  aws_region: us-west-2\n  batch_size: 25\n  input_type: search_document # Cohere-specific\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Validates that config matches server"),(0,t.yg)("li",{parentName:"ul"},"Fails if mismatch detected"),(0,t.yg)("li",{parentName:"ul"},"Prevents broken semantic search")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Break-Glass Override (NOT RECOMMENDED):")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"embedding:\n  allow_local_embedding_config: true\n  provider: bedrock\n  model: cohere.embed-english-v3\n  # ... other settings\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Bypasses server validation"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"May break semantic search")),(0,t.yg)("li",{parentName:"ul"},"Only use for debugging or special cases")),(0,t.yg)("h3",{id:"stateful-ingestion"},"Stateful Ingestion"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'stateful_ingestion:\n  enabled: true # Enabled by default\n\n  # State backend configuration\n  state_provider:\n    type: datahub # Store state in DataHub\n    config:\n      datahub_api:\n        server: "http://localhost:8080"\n        token: "${DATAHUB_TOKEN}"\n\n  # Ignore previous state (fresh start)\n  ignore_old_state: false\n\n  # Don\'t commit new state (dry run)\n  ignore_new_state: false\n')),(0,t.yg)("h2",{id:"performance-tuning"},"Performance Tuning"),(0,t.yg)("h3",{id:"batch-size"},"Batch Size"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"embedding:\n  batch_size: 25 # Default\n  # Increase for faster processing (if provider supports):\n  # - Cohere: Up to 96\n  # - Bedrock: Up to 100 (but rate-limited)\n")),(0,t.yg)("h3",{id:"event-mode-settings"},"Event Mode Settings"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"event_mode:\n  poll_limit: 100  # Fetch up to 100 events per poll\n  # Increase for high-volume scenarios:\n  poll_limit: 500  # Process more events per batch\n")),(0,t.yg)("h3",{id:"filtering"},"Filtering"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'# Skip short or empty documents\nskip_empty_text: true\nmin_text_length: 50 # Characters\n\n# Process fewer documents\nplatform_filter: ["notion"] # Only one platform\ndocument_urns: # Specific documents only\n  - "urn:li:document:abc123"\n')),(0,t.yg)("h2",{id:"monitoring-and-observability"},"Monitoring and Observability"),(0,t.yg)("h3",{id:"report-metrics"},"Report Metrics"),(0,t.yg)("p",null,"The source reports the following metrics:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-python"},'report = {\n    "num_documents_fetched": 100,       # Total documents fetched\n    "num_documents_processed": 85,      # Successfully processed\n    "num_documents_skipped": 15,        # Skipped (various reasons)\n    "num_documents_skipped_unchanged": 10,  # Unchanged content\n    "num_documents_skipped_empty": 5,   # Empty or too short\n    "num_chunks_created": 425,          # Total chunks generated\n    "num_embeddings_generated": 425,    # Total embeddings\n    "processing_errors": []             # List of errors\n}\n')),(0,t.yg)("h3",{id:"logging"},"Logging"),(0,t.yg)("p",null,"Enable debug logging for detailed insights:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"# In your ingestion recipe\nsource:\n  type: datahub-documents\n  config:\n    # ... your config\n# Set log level via environment variable\n# export DATAHUB_DEBUG=true\n")),(0,t.yg)("p",null,"Look for these log messages:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},'"Loading embedding configuration from DataHub server..."')),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},'"\u2713 Loaded embedding configuration from server"')),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},'"Incremental mode enabled, state file: ..."')),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},'"Skipping document {urn} (unchanged content hash)"'))),(0,t.yg)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,t.yg)("h3",{id:"issue-semantic-search-is-not-enabled-on-the-datahub-server"},'Issue: "Semantic search is not enabled on the DataHub server"'),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Cause:")," Server does not have semantic search configured."),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Solution:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Configure semantic search on your DataHub server first"),(0,t.yg)("li",{parentName:"ol"},"See ",(0,t.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/docs/how-to/semantic-search-configuration"},"Semantic Search Configuration Guide")),(0,t.yg)("li",{parentName:"ol"},"Verify ",(0,t.yg)("inlineCode",{parentName:"li"},"ELASTICSEARCH_SEMANTIC_SEARCH_ENABLED=true")," in server config")),(0,t.yg)("h3",{id:"issue-server-does-not-support-semantic-search-configuration-api"},'Issue: "Server does not support semantic search configuration API"'),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Cause:")," Old DataHub server version (pre-v0.14.0)."),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Solutions:")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Option 1 (Recommended):")," Upgrade DataHub server to v0.14.0+"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Option 2:")," Provide local embedding config:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"embedding:\n  provider: bedrock\n  model: cohere.embed-english-v3\n  model_embedding_key: cohere_embed_v3\n  aws_region: us-west-2\n")),(0,t.yg)("h3",{id:"issue-embedding-configuration-validation-fails"},"Issue: Embedding Configuration Validation Fails"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Error:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"Embedding configuration mismatch with server:\n- Model: local='cohere.embed-english-v3', server='amazon.titan-embed-text-v1'\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Cause:")," Local config doesn't match server configuration."),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Solution:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Either remove local embedding config (use server config)"),(0,t.yg)("li",{parentName:"ol"},"Or update server config to match local settings"),(0,t.yg)("li",{parentName:"ol"},"Or update local config to match server")),(0,t.yg)("h3",{id:"issue-no-documents-being-processed"},"Issue: No Documents Being Processed"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Possible Causes:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Platform Filter Too Restrictive:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'# If you have NATIVE documents but filter for external platforms:\nplatform_filter: ["notion"]  # Won\'t process NATIVE documents!\n\n# Solution: Remove filter or use null\nplatform_filter: null\n'))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"All Documents Unchanged:")),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Check incremental mode is working correctly"),(0,t.yg)("li",{parentName:"ul"},"Force reprocess if needed: ",(0,t.yg)("inlineCode",{parentName:"li"},"incremental.force_reprocess: true")))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Documents Have No Text:")),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Verify documents have content in ",(0,t.yg)("inlineCode",{parentName:"li"},"Document.text")," field"),(0,t.yg)("li",{parentName:"ul"},"Check ",(0,t.yg)("inlineCode",{parentName:"li"},"min_text_length")," threshold")))),(0,t.yg)("h3",{id:"issue-event-mode-not-working"},"Issue: Event Mode Not Working"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Symptoms:")," Falls back to batch mode every run."),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Possible Causes:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Stateful Ingestion Disabled:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"stateful_ingestion:\n  enabled: true # Must be enabled for event mode\n"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Kafka Connection Issues:")),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Check DataHub Kafka is accessible"),(0,t.yg)("li",{parentName:"ul"},"Verify network connectivity"),(0,t.yg)("li",{parentName:"ul"},"Check Kafka broker configuration"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"State Provider Misconfigured:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'stateful_ingestion:\n  state_provider:\n    type: datahub\n    config:\n      datahub_api:\n        server: "http://correct-host:8080" # Correct URL\n')))),(0,t.yg)("h3",{id:"issue-aws-credentials-error"},"Issue: AWS Credentials Error"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Error:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"Unable to load credentials from any provider in the chain\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Solutions:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Verify AWS_PROFILE:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"export AWS_PROFILE=datahub-dev\ncat ~/.aws/credentials  # Check profile exists\n"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"For EC2 Instance Role:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"# Check instance role is attached\ncurl http://169.254.169.254/latest/meta-data/iam/security-credentials/\n"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"For ECS Task Role:")),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Verify task definition has correct IAM role"),(0,t.yg)("li",{parentName:"ul"},"Check ECS task logs for IAM-related errors")))),(0,t.yg)("h3",{id:"issue-slow-processing"},"Issue: Slow Processing"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Optimization Strategies:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Increase Batch Size:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"embedding:\n  batch_size: 50 # Up from default 25\n"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Use Event Mode:")),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Only processes changed documents"),(0,t.yg)("li",{parentName:"ul"},"Much faster than batch mode for updates"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Filter Documents:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'platform_filter: ["notion"] # Process fewer platforms\nmin_text_length: 100 # Skip short documents\n'))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Optimize Chunking:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"chunking:\n  max_characters: 1000 # Larger chunks = fewer embeddings\n")))),(0,t.yg)("h2",{id:"cost-estimation"},"Cost Estimation"),(0,t.yg)("h3",{id:"aws-bedrock-pricing-cohere-embed-v3"},"AWS Bedrock Pricing (Cohere Embed v3)"),(0,t.yg)("p",null,"As of December 2024 in us-west-2:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"$0.0001 per 1,000 input tokens")," (~750 words)")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Example Costs:")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"One-time Processing:")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"1,000 documents \xd7 500 tokens each = 500,000 tokens = ",(0,t.yg)("strong",{parentName:"li"},"$0.05")),(0,t.yg)("li",{parentName:"ul"},"10,000 documents \xd7 500 tokens each = 5M tokens = ",(0,t.yg)("strong",{parentName:"li"},"$0.50")),(0,t.yg)("li",{parentName:"ul"},"100,000 documents \xd7 500 tokens each = 50M tokens = ",(0,t.yg)("strong",{parentName:"li"},"$5.00"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Incremental Updates (Event Mode):")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"100 changed documents/day \xd7 500 tokens = 50,000 tokens/day"),(0,t.yg)("li",{parentName:"ul"},"Monthly: 1.5M tokens = ",(0,t.yg)("strong",{parentName:"li"},"$0.15/month"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Query Embeddings (GMS):")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Separate from this source (handled by GMS at search time)"),(0,t.yg)("li",{parentName:"ul"},"~50 tokens per search query"),(0,t.yg)("li",{parentName:"ul"},"10,000 queries = ",(0,t.yg)("strong",{parentName:"li"},"$0.05"))),(0,t.yg)("h2",{id:"limitations"},"Limitations"),(0,t.yg)("h3",{id:"processing-limitations"},"Processing Limitations"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Text Only:")," Only processes ",(0,t.yg)("inlineCode",{parentName:"li"},"Document.text")," field (markdown format expected)"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"No Binary Content:")," Images, PDFs, etc. must be converted to text first"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Markdown Partitioning:")," Uses ",(0,t.yg)("inlineCode",{parentName:"li"},"unstructured.partition.md")," which may not handle all markdown variants")),(0,t.yg)("h3",{id:"platform-filtering-1"},"Platform Filtering"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Source Type Required:")," Documents must have ",(0,t.yg)("inlineCode",{parentName:"li"},"sourceType")," field (defaults to NATIVE if missing)"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Platform Identification:")," Relies on ",(0,t.yg)("inlineCode",{parentName:"li"},"dataPlatformInstance")," or URL-based platform extraction")),(0,t.yg)("h3",{id:"state-management"},"State Management"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"State Size:")," State file grows with number of documents (includes hash for each)"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"State Backend:")," Requires DataHub or file-based state provider")),(0,t.yg)("h2",{id:"related-documentation"},"Related Documentation"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/docs/how-to/semantic-search-configuration"},"Semantic Search Configuration")," - ",(0,t.yg)("strong",{parentName:"li"},"Start Here")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/docs/generated/ingestion/sources/notion"},"Notion Source")," - Example document source with embeddings"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://docs.aws.amazon.com/bedrock/latest/userguide/embeddings.html"},"AWS Bedrock Documentation")," - Embedding models"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://aws.amazon.com/bedrock/pricing/"},"AWS Bedrock Pricing")," - Cost estimation"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"/docs/developers"},"DataHub Developer Guides")," - Additional developer documentation")),(0,t.yg)("h3",{id:"cli-based-ingestion"},"CLI based Ingestion"),(0,t.yg)("h3",{id:"starter-recipe"},"Starter Recipe"),(0,t.yg)("p",null,"Check out the following recipe to get started with ingestion! See ",(0,t.yg)("a",{parentName:"p",href:"#config-details"},"below")," for full configuration options."),(0,t.yg)("p",null,"For general pointers on writing and running a recipe, see our ",(0,t.yg)("a",{parentName:"p",href:"/docs/metadata-ingestion#recipes"},"main recipe guide"),"."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"source:\n  type: datahub-documents\n  config:\n    # Minimal configuration - uses smart defaults\n    # Automatically connects to DataHub using DATAHUB_GMS_URL and DATAHUB_GMS_TOKEN environment variables\n    # Fetches embedding configuration from server\n    # Enables event-driven mode and incremental processing\n    # No sink needed when deploying to DataHub (writes back to itself)\n\n")),(0,t.yg)("h3",{id:"config-details"},"Config Details"),(0,t.yg)(i.A,{mdxType:"Tabs"},(0,t.yg)(s.A,{value:"options",label:"Options",default:!0,mdxType:"TabItem"},(0,t.yg)("p",null,"Note that a ",(0,t.yg)("inlineCode",{parentName:"p"},".")," is used to denote nested fields in the YAML recipe."),(0,t.yg)("div",{className:"config-table"},(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:"left"},"Field"),(0,t.yg)("th",{parentName:"tr",align:"left"},"Description"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"min_text_length"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Minimum text length in characters to process (shorter documents are skipped) ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"50")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"partition_strategy"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Text partitioning strategy. Currently only 'markdown' is supported. This field is included in the document hash to trigger reprocessing if the strategy changes. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"markdown")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"skip_empty_text"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Skip documents with no text content ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"chunking"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"ChunkingConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Chunking strategy configuration.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"chunking."),(0,t.yg)("span",{className:"path-main"},"combine_text_under_n_chars"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Combine chunks smaller than this size ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"100")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"chunking."),(0,t.yg)("span",{className:"path-main"},"max_characters"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Maximum characters per chunk ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"500")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"chunking."),(0,t.yg)("span",{className:"path-main"},"overlap"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Character overlap between chunks ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"0")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"chunking."),(0,t.yg)("span",{className:"path-main"},"strategy"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"Enum"))),(0,t.yg)("td",{parentName:"tr",align:"left"},'One of: "basic", "by_title" ',(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"by","_","title")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"datahub"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"DataHubConnectionConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"DataHub connection configuration. ",(0,t.yg)("br",null),"  ",(0,t.yg)("br",null)," Defaults are loaded in this priority: ",(0,t.yg)("br",null)," 1. Explicitly configured values in the recipe ",(0,t.yg)("br",null)," 2. Environment variables (DATAHUB_GMS_URL, DATAHUB_GMS_TOKEN) ",(0,t.yg)("br",null)," 3. ~/.datahubenv file (created by ",(0,t.yg)("inlineCode",{parentName:"td"},"datahub init"),") ",(0,t.yg)("br",null)," 4. Hardcoded defaults (http://localhost:8080, no token)")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"datahub."),(0,t.yg)("span",{className:"path-main"},"server"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"DataHub GMS server URL (defaults to DATAHUB_GMS_URL env var, ~/.datahubenv, or localhost:8080)")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"datahub."),(0,t.yg)("span",{className:"path-main"},"token"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string(password), null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"DataHub API token for authentication (defaults to DATAHUB_GMS_TOKEN env var or ~/.datahubenv)")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"document_urns"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of array, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Specific document URNs to process (if None, process all matching platforms) ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"document_urns."),(0,t.yg)("span",{className:"path-main"},"string"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"embedding"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"EmbeddingConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Embedding generation configuration. ",(0,t.yg)("br",null),"  ",(0,t.yg)("br",null)," Default behavior: Fetches configuration from DataHub server automatically. ",(0,t.yg)("br",null)," Override behavior: Validates local config against server when explicitly set.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"embedding."),(0,t.yg)("span",{className:"path-main"},"allow_local_embedding_config"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"BREAK-GLASS: Allow local config without server validation. NOT RECOMMENDED - may break semantic search. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"embedding."),(0,t.yg)("span",{className:"path-main"},"api_key"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string(password), null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"API key for Cohere (not needed for Bedrock with IAM roles) ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"embedding."),(0,t.yg)("span",{className:"path-main"},"aws_region"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"AWS region for Bedrock. If not set, loads from server. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"embedding."),(0,t.yg)("span",{className:"path-main"},"batch_size"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Batch size for embedding API calls ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"25")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"embedding."),(0,t.yg)("span",{className:"path-main"},"input_type"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Input type for Cohere embeddings ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"search","_","document")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"embedding."),(0,t.yg)("span",{className:"path-main"},"model"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Model name. If not set, loads from server. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"embedding."),(0,t.yg)("span",{className:"path-main"},"model_embedding_key"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Storage key for embeddings (e.g., 'cohere_embed_v3'). Required if overriding server config. If not set, loads from server. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"embedding."),(0,t.yg)("span",{className:"path-main"},"provider"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of Enum, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Embedding provider (bedrock uses AWS, cohere/openai use API key). If not set, loads from server. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"event_mode"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"EventModeConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Event-driven mode configuration.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode."),(0,t.yg)("span",{className:"path-main"},"consumer_id"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Consumer ID for offset tracking (defaults to 'datahub-documents-{pipeline_name}') ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode."),(0,t.yg)("span",{className:"path-main"},"enabled"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Enable event-driven mode (polls MCL events instead of GraphQL batch) ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode."),(0,t.yg)("span",{className:"path-main"},"idle_timeout_seconds"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Exit after this many seconds with no new events (incremental batch mode) ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"30")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode."),(0,t.yg)("span",{className:"path-main"},"lookback_days"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of integer, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Number of days to look back for events on first run (None means start from latest) ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode."),(0,t.yg)("span",{className:"path-main"},"poll_limit"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Maximum number of events to fetch per poll ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"100")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode."),(0,t.yg)("span",{className:"path-main"},"poll_timeout_seconds"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"integer"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Timeout for each poll request ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"2")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode."),(0,t.yg)("span",{className:"path-main"},"reset_offsets"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Reset consumer offsets to start from beginning ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode."),(0,t.yg)("span",{className:"path-main"},"topics"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"array"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Topics to consume for document changes ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"[","'","MetadataChangeLog","_","Versioned","_","v1","'","]")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"event_mode.topics."),(0,t.yg)("span",{className:"path-main"},"string"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"incremental"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"IncrementalConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Incremental processing configuration.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"incremental."),(0,t.yg)("span",{className:"path-main"},"enabled"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Only process documents whose text content has changed (tracks content hash). Uses stateful ingestion when enabled. The state_file_path option is deprecated and ignored when stateful ingestion is enabled. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"incremental."),(0,t.yg)("span",{className:"path-main"},"force_reprocess"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Force reprocess all documents regardless of content hash ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"incremental."),(0,t.yg)("span",{className:"path-main"},"state_file_path"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"[DEPRECATED]"," Path to state file. This option is ignored when stateful ingestion is enabled. State is now managed through DataHub's stateful ingestion framework. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"platform_filter"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of array, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Filter documents by platforms. Default (None): Process all NATIVE documents (sourceType=NATIVE) regardless of platform. To include external documents from specific platforms, add them here (e.g., ","['notion', 'confluence']","). This will process NATIVE documents + EXTERNAL documents from the specified platforms. Use ","['*']"," or ","['ALL']"," to process all documents regardless of source type or platform. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"platform_filter."),(0,t.yg)("span",{className:"path-main"},"string"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"stateful_ingestion"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"DocumentChunkingStatefulIngestionConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Configuration for document chunking stateful ingestion.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"stateful_ingestion."),(0,t.yg)("span",{className:"path-main"},"enabled"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether or not to enable stateful ingest. Default: True if a pipeline_name is set and either a datahub-rest sink or ",(0,t.yg)("inlineCode",{parentName:"td"},"datahub_api")," is specified, otherwise False ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))))))),(0,t.yg)(s.A,{value:"schema",label:"Schema",mdxType:"TabItem"},(0,t.yg)("p",null,"The ",(0,t.yg)("a",{parentName:"p",href:"https://json-schema.org/"},"JSONSchema")," for this configuration is inlined below."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-javascript"},'{\n  "$defs": {\n    "ChunkingConfig": {\n      "additionalProperties": false,\n      "description": "Chunking strategy configuration.",\n      "properties": {\n        "strategy": {\n          "default": "by_title",\n          "description": "Chunking strategy to use",\n          "enum": [\n            "basic",\n            "by_title"\n          ],\n          "title": "Strategy",\n          "type": "string"\n        },\n        "max_characters": {\n          "default": 500,\n          "description": "Maximum characters per chunk",\n          "title": "Max Characters",\n          "type": "integer"\n        },\n        "overlap": {\n          "default": 0,\n          "description": "Character overlap between chunks",\n          "title": "Overlap",\n          "type": "integer"\n        },\n        "combine_text_under_n_chars": {\n          "default": 100,\n          "description": "Combine chunks smaller than this size",\n          "title": "Combine Text Under N Chars",\n          "type": "integer"\n        }\n      },\n      "title": "ChunkingConfig",\n      "type": "object"\n    },\n    "DataHubConnectionConfig": {\n      "additionalProperties": false,\n      "description": "DataHub connection configuration.\\n\\nDefaults are loaded in this priority:\\n1. Explicitly configured values in the recipe\\n2. Environment variables (DATAHUB_GMS_URL, DATAHUB_GMS_TOKEN)\\n3. ~/.datahubenv file (created by `datahub init`)\\n4. Hardcoded defaults (http://localhost:8080, no token)",\n      "properties": {\n        "server": {\n          "description": "DataHub GMS server URL (defaults to DATAHUB_GMS_URL env var, ~/.datahubenv, or localhost:8080)",\n          "title": "Server",\n          "type": "string"\n        },\n        "token": {\n          "anyOf": [\n            {\n              "format": "password",\n              "type": "string",\n              "writeOnly": true\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "description": "DataHub API token for authentication (defaults to DATAHUB_GMS_TOKEN env var or ~/.datahubenv)",\n          "title": "Token"\n        }\n      },\n      "title": "DataHubConnectionConfig",\n      "type": "object"\n    },\n    "DocumentChunkingStatefulIngestionConfig": {\n      "additionalProperties": false,\n      "description": "Configuration for document chunking stateful ingestion.",\n      "properties": {\n        "enabled": {\n          "default": false,\n          "description": "Whether or not to enable stateful ingest. Default: True if a pipeline_name is set and either a datahub-rest sink or `datahub_api` is specified, otherwise False",\n          "title": "Enabled",\n          "type": "boolean"\n        }\n      },\n      "title": "DocumentChunkingStatefulIngestionConfig",\n      "type": "object"\n    },\n    "EmbeddingConfig": {\n      "additionalProperties": false,\n      "description": "Embedding generation configuration.\\n\\nDefault behavior: Fetches configuration from DataHub server automatically.\\nOverride behavior: Validates local config against server when explicitly set.",\n      "properties": {\n        "provider": {\n          "anyOf": [\n            {\n              "enum": [\n                "bedrock",\n                "cohere",\n                "openai"\n              ],\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Embedding provider (bedrock uses AWS, cohere/openai use API key). If not set, loads from server.",\n          "title": "Provider"\n        },\n        "model": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Model name. If not set, loads from server.",\n          "title": "Model"\n        },\n        "model_embedding_key": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Storage key for embeddings (e.g., \'cohere_embed_v3\'). Required if overriding server config. If not set, loads from server.",\n          "title": "Model Embedding Key"\n        },\n        "aws_region": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "AWS region for Bedrock. If not set, loads from server.",\n          "title": "Aws Region"\n        },\n        "api_key": {\n          "anyOf": [\n            {\n              "format": "password",\n              "type": "string",\n              "writeOnly": true\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "API key for Cohere (not needed for Bedrock with IAM roles)",\n          "title": "Api Key"\n        },\n        "batch_size": {\n          "default": 25,\n          "description": "Batch size for embedding API calls",\n          "title": "Batch Size",\n          "type": "integer"\n        },\n        "input_type": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": "search_document",\n          "description": "Input type for Cohere embeddings",\n          "title": "Input Type"\n        },\n        "allow_local_embedding_config": {\n          "default": false,\n          "description": "BREAK-GLASS: Allow local config without server validation. NOT RECOMMENDED - may break semantic search.",\n          "title": "Allow Local Embedding Config",\n          "type": "boolean"\n        }\n      },\n      "title": "EmbeddingConfig",\n      "type": "object"\n    },\n    "EventModeConfig": {\n      "additionalProperties": false,\n      "description": "Event-driven mode configuration.",\n      "properties": {\n        "enabled": {\n          "default": false,\n          "description": "Enable event-driven mode (polls MCL events instead of GraphQL batch)",\n          "title": "Enabled",\n          "type": "boolean"\n        },\n        "consumer_id": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Consumer ID for offset tracking (defaults to \'datahub-documents-{pipeline_name}\')",\n          "title": "Consumer Id"\n        },\n        "topics": {\n          "default": [\n            "MetadataChangeLog_Versioned_v1"\n          ],\n          "description": "Topics to consume for document changes",\n          "items": {\n            "type": "string"\n          },\n          "title": "Topics",\n          "type": "array"\n        },\n        "lookback_days": {\n          "anyOf": [\n            {\n              "type": "integer"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "Number of days to look back for events on first run (None means start from latest)",\n          "title": "Lookback Days"\n        },\n        "reset_offsets": {\n          "default": false,\n          "description": "Reset consumer offsets to start from beginning",\n          "title": "Reset Offsets",\n          "type": "boolean"\n        },\n        "idle_timeout_seconds": {\n          "default": 30,\n          "description": "Exit after this many seconds with no new events (incremental batch mode)",\n          "title": "Idle Timeout Seconds",\n          "type": "integer"\n        },\n        "poll_timeout_seconds": {\n          "default": 2,\n          "description": "Timeout for each poll request",\n          "title": "Poll Timeout Seconds",\n          "type": "integer"\n        },\n        "poll_limit": {\n          "default": 100,\n          "description": "Maximum number of events to fetch per poll",\n          "title": "Poll Limit",\n          "type": "integer"\n        }\n      },\n      "title": "EventModeConfig",\n      "type": "object"\n    },\n    "IncrementalConfig": {\n      "additionalProperties": false,\n      "description": "Incremental processing configuration.",\n      "properties": {\n        "enabled": {\n          "default": true,\n          "description": "Only process documents whose text content has changed (tracks content hash). Uses stateful ingestion when enabled. The state_file_path option is deprecated and ignored when stateful ingestion is enabled.",\n          "title": "Enabled",\n          "type": "boolean"\n        },\n        "state_file_path": {\n          "anyOf": [\n            {\n              "type": "string"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": null,\n          "description": "[DEPRECATED] Path to state file. This option is ignored when stateful ingestion is enabled. State is now managed through DataHub\'s stateful ingestion framework.",\n          "title": "State File Path"\n        },\n        "force_reprocess": {\n          "default": false,\n          "description": "Force reprocess all documents regardless of content hash",\n          "title": "Force Reprocess",\n          "type": "boolean"\n        }\n      },\n      "title": "IncrementalConfig",\n      "type": "object"\n    }\n  },\n  "description": "Configuration for DataHub Documents Source.",\n  "properties": {\n    "stateful_ingestion": {\n      "$ref": "#/$defs/DocumentChunkingStatefulIngestionConfig",\n      "description": "Stateful ingestion configuration. Enabled by default to support incremental mode (document hash tracking) and event mode (offset tracking)."\n    },\n    "datahub": {\n      "$ref": "#/$defs/DataHubConnectionConfig",\n      "description": "DataHub connection configuration. Only used when running standalone (e.g., CLI ingestion). In managed ingestion (deployed sources), the connection is automatically configured from the sink."\n    },\n    "platform_filter": {\n      "anyOf": [\n        {\n          "items": {\n            "type": "string"\n          },\n          "type": "array"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "Filter documents by platforms. Default (None): Process all NATIVE documents (sourceType=NATIVE) regardless of platform. To include external documents from specific platforms, add them here (e.g., [\'notion\', \'confluence\']). This will process NATIVE documents + EXTERNAL documents from the specified platforms. Use [\'*\'] or [\'ALL\'] to process all documents regardless of source type or platform.",\n      "title": "Platform Filter"\n    },\n    "document_urns": {\n      "anyOf": [\n        {\n          "items": {\n            "type": "string"\n          },\n          "type": "array"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "Specific document URNs to process (if None, process all matching platforms)",\n      "title": "Document Urns"\n    },\n    "event_mode": {\n      "$ref": "#/$defs/EventModeConfig",\n      "description": "Event-driven mode configuration (polls Kafka MCL events)"\n    },\n    "incremental": {\n      "$ref": "#/$defs/IncrementalConfig",\n      "description": "Incremental processing configuration (skip unchanged documents)"\n    },\n    "chunking": {\n      "$ref": "#/$defs/ChunkingConfig",\n      "description": "Text chunking strategy configuration"\n    },\n    "embedding": {\n      "$ref": "#/$defs/EmbeddingConfig",\n      "description": "Embedding generation configuration (LiteLLM with Cohere/Bedrock)"\n    },\n    "partition_strategy": {\n      "const": "markdown",\n      "default": "markdown",\n      "description": "Text partitioning strategy. Currently only \'markdown\' is supported. This field is included in the document hash to trigger reprocessing if the strategy changes.",\n      "title": "Partition Strategy",\n      "type": "string"\n    },\n    "skip_empty_text": {\n      "default": true,\n      "description": "Skip documents with no text content",\n      "title": "Skip Empty Text",\n      "type": "boolean"\n    },\n    "min_text_length": {\n      "default": 50,\n      "description": "Minimum text length in characters to process (shorter documents are skipped)",\n      "title": "Min Text Length",\n      "type": "integer"\n    }\n  },\n  "title": "DataHubDocumentsSourceConfig",\n  "type": "object"\n}\n')))),(0,t.yg)("h3",{id:"code-coordinates"},"Code Coordinates"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Class Name: ",(0,t.yg)("inlineCode",{parentName:"li"},"datahub.ingestion.source.datahub_documents.datahub_documents_source.DataHubDocumentsSource")),(0,t.yg)("li",{parentName:"ul"},"Browse on ",(0,t.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/source/datahub_documents/datahub_documents_source.py"},"GitHub"))),(0,t.yg)("h2",null,"Questions"),(0,t.yg)("p",null,"If you've got any questions on configuring ingestion for DataHubDocuments, feel free to ping us on ",(0,t.yg)("a",{parentName:"p",href:"https://datahub.com/slack"},"our Slack"),"."))}f.isMDXComponent=!0}}]);