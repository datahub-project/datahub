"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[3857],{15680:(e,n,a)=>{a.d(n,{xA:()=>c,yg:()=>m});var t=a(96540);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){l(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function r(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=t.createContext({}),d=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},c=function(e){var n=d(e.components);return t.createElement(s.Provider,{value:n},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),p=d(a),u=l,m=p["".concat(s,".").concat(u)]||p[u]||g[u]||i;return a?t.createElement(m,o(o({ref:n},c),{},{components:a})):t.createElement(m,o({ref:n},c))}));function m(e,n){var a=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var i=a.length,o=new Array(i);o[0]=u;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[p]="string"==typeof e?e:l,o[1]=r;for(var d=2;d<i;d++)o[d]=a[d];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},10375:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>d,toc:()=>p});a(96540);var t=a(15680);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})),e}function o(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}const r={title:"Local Development",sidebar_label:"Local Development",slug:"/developers",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/developers.md"},s="DataHub Developer's Guide",d={unversionedId:"docs/developers",id:"docs/developers",title:"Local Development",description:"Requirements",source:"@site/genDocs/docs/developers.md",sourceDirName:"docs",slug:"/developers",permalink:"/docs/developers",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/developers.md",tags:[],version:"current",frontMatter:{title:"Local Development",sidebar_label:"Local Development",slug:"/developers",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/developers.md"},sidebar:"overviewSidebar",previous:{title:"Docker Container Architecture",permalink:"/docs/architecture/docker-containers"},next:{title:"Java SDK V2 Design Document",permalink:"/docs/developers/java-sdk-v2-design"}},c={},p=[{value:"Requirements",id:"requirements",level:2},{value:"Option 1: Using Homebrew on Mac",id:"option-1-using-homebrew-on-mac",level:3},{value:"Option 2: Using mise",id:"option-2-using-mise",level:3},{value:"Building the Project",id:"building-the-project",level:2},{value:"Dependency Management",id:"dependency-management",level:2},{value:"Dependency Locking",id:"dependency-locking",level:3},{value:"Why Dependency Locking?",id:"why-dependency-locking",level:4},{value:"How It Works",id:"how-it-works",level:4},{value:"Viewing Locked Dependencies",id:"viewing-locked-dependencies",level:4},{value:"Updating Dependencies",id:"updating-dependencies",level:4},{value:"Update All Lock Files (Complete Refresh)",id:"update-all-lock-files-complete-refresh",level:5},{value:"Update a Specific Dependency Version",id:"update-a-specific-dependency-version",level:5},{value:"Update Lock Files for a Single Project",id:"update-lock-files-for-a-single-project",level:5},{value:"Common Workflows",id:"common-workflows",level:4},{value:"Troubleshooting",id:"troubleshooting",level:4},{value:"Deploying Local Versions",id:"deploying-local-versions",level:2},{value:"Initial Setup",id:"initial-setup",level:3},{value:"Deploying the Full Stack",id:"deploying-the-full-stack",level:3},{value:"Refreshing the Frontend",id:"refreshing-the-frontend",level:3},{value:"Refreshing components of quickStart",id:"refreshing-components-of-quickstart",level:3},{value:"Cleaning up containers and volumes",id:"cleaning-up-containers-and-volumes",level:3},{value:"Using .env to configure settings of services started by quickstart",id:"using-env-to-configure-settings-of-services-started-by-quickstart",level:3},{value:"Refreshing the CLI",id:"refreshing-the-cli",level:3},{value:"Building All Docker images",id:"building-all-docker-images",level:3},{value:"IDE Support",id:"ide-support",level:2},{value:"Required IntelliJ Plugins",id:"required-intellij-plugins",level:3},{value:"Setup Steps",id:"setup-steps",level:3},{value:"Windows Compatibility",id:"windows-compatibility",level:2},{value:"Common Build Issues",id:"common-build-issues",level:2},{value:"Getting <code>Unsupported class file major version 57</code>",id:"getting-unsupported-class-file-major-version-57",level:4},{value:"Getting <code>cannot find symbol</code> error for <code>javax.annotation.Generated</code>",id:"getting-cannot-find-symbol-error-for-javaxannotationgenerated",level:4},{value:"<code>:metadata-models:generateDataTemplate</code> task fails with <code>java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index XX</code> or <code>Caused by: java.lang.IllegalArgumentException: &#39;other&#39; has different root</code> error",id:"metadata-modelsgeneratedatatemplate-task-fails-with-javaniofileinvalidpathexception-illegal-char--at-index-xx-or-caused-by-javalangillegalargumentexception-other-has-different-root-error",level:4},{value:"Various errors related to <code>generateDataTemplate</code> or other <code>generate</code> tasks",id:"various-errors-related-to-generatedatatemplate-or-other-generate-tasks",level:4},{value:"<code>Execution failed for task &#39;:metadata-service:restli-servlet-impl:checkRestModel&#39;</code>",id:"execution-failed-for-task-metadata-servicerestli-servlet-implcheckrestmodel",level:4},{value:"<code>java.io.IOException: No space left on device</code>",id:"javaioioexception-no-space-left-on-device",level:4},{value:"<code>Build failed</code> for task <code>./gradlew :datahub-frontend:dist -x yarnTest -x yarnLint</code>",id:"build-failed-for-task-gradlew-datahub-frontenddist--x-yarntest--x-yarnlint",level:4},{value:"<code>:buildSrc:compileJava</code> task fails with <code>package com.linkedin.metadata.models.registry.config does not exist</code> and <code>cannot find symbol</code> error for <code>Entity</code>",id:"buildsrccompilejava-task-fails-with-package-comlinkedinmetadatamodelsregistryconfig-does-not-exist-and-cannot-find-symbol-error-for-entity",level:4},{value:"Security Testing",id:"security-testing",level:2},{value:"Configuration Property Classification Test",id:"configuration-property-classification-test",level:3}],g={toc:p},u="wrapper";function m(e){var{components:n}=e,a=o(e,["components"]);return(0,t.yg)(u,i(function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(n){l(e,n,a[n])}))}return e}({},g,a),{components:n,mdxType:"MDXLayout"}),(0,t.yg)("h1",{id:"datahub-developers-guide"},"DataHub Developer's Guide"),(0,t.yg)("h2",{id:"requirements"},"Requirements"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://openjdk.org/projects/jdk/17/"},"Java 17 JDK")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://www.python.org/downloads/latest/python3.11/"},"Python 3.11")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://www.docker.com/"},"Docker")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://nodejs.org/en/about/previous-releases"},"Node 22.x")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://docs.docker.com/compose/"},"Docker Compose >=2.20")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"https://yarnpkg.com/en/docs/cli/"},"Yarn >=v1.22")," for documentation building"),(0,t.yg)("li",{parentName:"ul"},"Docker engine with at least 8GB of memory to run tests.")),(0,t.yg)("h3",{id:"option-1-using-homebrew-on-mac"},"Option 1: Using Homebrew on Mac"),(0,t.yg)("p",null,"On macOS, these can be installed using ",(0,t.yg)("a",{parentName:"p",href:"https://brew.sh/"},"Homebrew"),"."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"# Install Java\nbrew install openjdk@17\n\n# Install Python\nbrew install python@3.11  # you may need to add this to your PATH\n# alternatively, you can use pyenv to manage your python versions\n\n# Install docker and docker compose\nbrew install --cask docker\n")),(0,t.yg)("h3",{id:"option-2-using-mise"},"Option 2: Using mise"),(0,t.yg)("p",null,"Alternatively you can use ",(0,t.yg)("a",{parentName:"p",href:"https://mise.jdx.dev/"},"mise en place")," for managing tool installation.\nYou can see the existing mise.toml file in the repository and let mise manage the tool versions."),(0,t.yg)("p",null,"You can install mise cli by following the instructions on ",(0,t.yg)("a",{parentName:"p",href:"https://mise.jdx.dev/getting-started.html"},"https://mise.jdx.dev/getting-started.html")),(0,t.yg)("p",null,"Fork and clone the repo if you haven't done so already. Refer: ",(0,t.yg)("a",{parentName:"p",href:"#building-the-project"},"Building the Project")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"# Enter the root folder of the repo\n> cd datahub\n\n# Needed the first time to allow mise to auto activate the tools\n# mentioned in mise.toml\n> mise trust\n\n# Needed once if the required tools haven't been installed via mise before\n# or if a new tool is added or tool version changed since last use\n> mise install\n")),(0,t.yg)("p",null,"After this the required tools should be auto activated as soon as you enter the folder where the repo is cloned"),(0,t.yg)("p",null,"You can verify the tools are activated correctly by running"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"# Check tool versions installed\n\u276f mise ls --local\nTool    Version  Source                             Requested\njava    17.0.2   ~/path/to/datahub/mise.toml  17\nnode    22.21.1  ~/path/to/datahub/mise.toml  22\npython  3.11.14  ~/path/to/datahub/mise.toml  3.11\nyarn    4.12.0   ~/path/to/datahub/mise.toml  latest\n")),(0,t.yg)("h2",{id:"building-the-project"},"Building the Project"),(0,t.yg)("p",null,"Fork and clone the repository if haven't done so already"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/{username}/datahub.git\n")),(0,t.yg)("p",null,"Change into the repository's root directory"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"cd datahub\n")),(0,t.yg)("p",null,"Use ",(0,t.yg)("a",{parentName:"p",href:"https://docs.gradle.org/current/userguide/gradle_wrapper.html"},"gradle wrapper")," to build the project"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"./gradlew build\n")),(0,t.yg)("p",null,"Note that the above will also run tests and a number of validations which makes the process considerably slower."),(0,t.yg)("p",null,"We suggest partially compiling DataHub according to your needs:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Build Datahub's backend GMS (Generalized metadata service):"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre"},"./gradlew :metadata-service:war:build\n"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Build Datahub's frontend:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre"},"./gradlew :datahub-frontend:dist -x yarnTest -x yarnLint\n"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Build DataHub's command line tool:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre"},"./gradlew :metadata-ingestion:installDev\n"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Build DataHub's documentation:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre"},"./gradlew :docs-website:yarnLintFix :docs-website:build -x :metadata-ingestion:runPreFlightScript\n# To preview the documentation\n./gradlew :docs-website:serve\n")))),(0,t.yg)("h2",{id:"dependency-management"},"Dependency Management"),(0,t.yg)("h3",{id:"dependency-locking"},"Dependency Locking"),(0,t.yg)("p",null,"DataHub uses Gradle's ",(0,t.yg)("a",{parentName:"p",href:"https://docs.gradle.org/current/userguide/dependency_locking.html"},"dependency locking")," to ensure reproducible builds across all environments. Dependency locks guarantee that the exact same dependency versions are used everywhere - in development, CI, and production - preventing unexpected behavior from transitive dependency updates."),(0,t.yg)("h4",{id:"why-dependency-locking"},"Why Dependency Locking?"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Reproducible Builds"),": Same dependency versions across all environments"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Security"),": Prevents unexpected transitive dependency updates that could introduce vulnerabilities"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Stability"),": Explicit control over when dependencies change"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Audit Trail"),": Lock files in git provide clear history of dependency changes")),(0,t.yg)("h4",{id:"how-it-works"},"How It Works"),(0,t.yg)("p",null,"Each sub-project has a ",(0,t.yg)("inlineCode",{parentName:"p"},"gradle.lockfile")," that records the exact version of every direct and transitive dependency used across all configurations (compile, runtime, test, etc.). When you build the project, Gradle uses these locked versions instead of resolving the latest versions."),(0,t.yg)("h4",{id:"viewing-locked-dependencies"},"Viewing Locked Dependencies"),(0,t.yg)("p",null,"To see the locked dependencies for a project:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"./gradlew :project-name:dependencies --configuration runtimeClasspath\n")),(0,t.yg)("p",null,"For example:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"./gradlew :metadata-io:dependencies --configuration runtimeClasspath\n")),(0,t.yg)("h4",{id:"updating-dependencies"},"Updating Dependencies"),(0,t.yg)("p",null,"When you update dependencies in ",(0,t.yg)("inlineCode",{parentName:"p"},"build.gradle")," files, you must regenerate the lock files. There are several ways to do this depending on your needs:"),(0,t.yg)("h5",{id:"update-all-lock-files-complete-refresh"},"Update All Lock Files (Complete Refresh)"),(0,t.yg)("p",null,"After changing dependencies in any ",(0,t.yg)("inlineCode",{parentName:"p"},"build.gradle")," file, run:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"./gradlew resolveAndLockAll --write-locks\n")),(0,t.yg)("p",null,"This resolves all configurations across all sub-projects and updates all lock files. This is the recommended approach when:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Adding or removing dependencies"),(0,t.yg)("li",{parentName:"ul"},"Changing dependency versions"),(0,t.yg)("li",{parentName:"ul"},"After pulling changes that modify ",(0,t.yg)("inlineCode",{parentName:"li"},"build.gradle")," files")),(0,t.yg)("h5",{id:"update-a-specific-dependency-version"},"Update a Specific Dependency Version"),(0,t.yg)("p",null,"To update a specific dependency to a newer version:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"./gradlew dependencies --update-locks group:artifact\n")),(0,t.yg)("p",null,"For example, to update Jackson:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"./gradlew dependencies --update-locks com.fasterxml.jackson.core:jackson-databind\n")),(0,t.yg)("h5",{id:"update-lock-files-for-a-single-project"},"Update Lock Files for a Single Project"),(0,t.yg)("p",null,"If you only changed dependencies in one sub-project:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"./gradlew :project-name:dependencies --write-locks\n")),(0,t.yg)("p",null,"Note: This only locks configurations that get resolved by the ",(0,t.yg)("inlineCode",{parentName:"p"},"dependencies")," task. For complete coverage, use ",(0,t.yg)("inlineCode",{parentName:"p"},"resolveAndLockAll")," instead."),(0,t.yg)("h4",{id:"common-workflows"},"Common Workflows"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Adding a new dependency:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Add the dependency to the appropriate ",(0,t.yg)("inlineCode",{parentName:"li"},"build.gradle")," file"),(0,t.yg)("li",{parentName:"ol"},"Run ",(0,t.yg)("inlineCode",{parentName:"li"},"./gradlew resolveAndLockAll --write-locks")),(0,t.yg)("li",{parentName:"ol"},"Verify the build works: ",(0,t.yg)("inlineCode",{parentName:"li"},"./gradlew :project-name:build")),(0,t.yg)("li",{parentName:"ol"},"Commit both the ",(0,t.yg)("inlineCode",{parentName:"li"},"build.gradle")," change and updated lock files")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Updating an existing dependency:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Change the version in ",(0,t.yg)("inlineCode",{parentName:"li"},"build.gradle")),(0,t.yg)("li",{parentName:"ol"},"Run ",(0,t.yg)("inlineCode",{parentName:"li"},"./gradlew resolveAndLockAll --write-locks")),(0,t.yg)("li",{parentName:"ol"},"Review the lock file changes to see what transitive dependencies changed"),(0,t.yg)("li",{parentName:"ol"},"Test thoroughly, especially if major version upgrades"),(0,t.yg)("li",{parentName:"ol"},"Commit the changes")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"After pulling changes:"),"\nIf someone else updated dependencies and you pull their changes, just build normally:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"./gradlew build\n")),(0,t.yg)("p",null,"Gradle will automatically use the locked versions from the updated lock files. You don't need to regenerate locks unless you're making your own dependency changes."),(0,t.yg)("h4",{id:"troubleshooting"},"Troubleshooting"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Build fails with dependency resolution error:")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Ensure you've run ",(0,t.yg)("inlineCode",{parentName:"li"},"./gradlew resolveAndLockAll --write-locks")," after dependency changes"),(0,t.yg)("li",{parentName:"ul"},"Check that lock files are committed and up to date"),(0,t.yg)("li",{parentName:"ul"},"Try ",(0,t.yg)("inlineCode",{parentName:"li"},"./gradlew --refresh-dependencies build")," to refresh Gradle's cache")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Lock file is out of sync:"),"\nIf you see warnings about lock state, regenerate the locks:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},"./gradlew resolveAndLockAll --write-locks\n")),(0,t.yg)("h2",{id:"deploying-local-versions"},"Deploying Local Versions"),(0,t.yg)("p",null,"This guide explains how to set up and deploy DataHub locally for development purposes."),(0,t.yg)("h3",{id:"initial-setup"},"Initial Setup"),(0,t.yg)("p",null,"Before you begin, you'll need to install the local ",(0,t.yg)("inlineCode",{parentName:"p"},"datahub")," CLI tool:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"cd metadata-ingestion/\npython3 -m venv venv\nsource venv/bin/activate\ncd ../\n")),(0,t.yg)("h3",{id:"deploying-the-full-stack"},"Deploying the Full Stack"),(0,t.yg)("p",null,"Deploy the entire system using docker-compose:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"./gradlew quickstartDebug\n")),(0,t.yg)("p",null,"Access the DataHub UI at ",(0,t.yg)("inlineCode",{parentName:"p"},"http://localhost:9002")),(0,t.yg)("h3",{id:"refreshing-the-frontend"},"Refreshing the Frontend"),(0,t.yg)("p",null,"To run and update the frontend with local changes, open a new terminal and run:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"cd datahub-web-react\nyarn install && yarn start\n")),(0,t.yg)("p",null,"The frontend will be available at ",(0,t.yg)("inlineCode",{parentName:"p"},"http://localhost:3000")," and will automatically update as you make changes to the code."),(0,t.yg)("h3",{id:"refreshing-components-of-quickstart"},"Refreshing components of quickStart"),(0,t.yg)("p",null,"To refresh any of the running system started by ",(0,t.yg)("inlineCode",{parentName:"p"},"./gradlew quickstartDebug"),", run"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"./gradlew debugReload\n")),(0,t.yg)("p",null,"This will build any changed components and restart those containers that had changes.\nThere are a few other quickstart","*"," variants, like quickstartDebugMin, quickstartDebugConsumers"),(0,t.yg)("p",null,"For each of those variants, there is a corresponding reloadTask."),(0,t.yg)("p",null,"For ",(0,t.yg)("inlineCode",{parentName:"p"},"./gradlew quickstartDebugConsumers"),", the reload command is ",(0,t.yg)("inlineCode",{parentName:"p"},"./gradlew debugConsumersReload"),"\nFor ",(0,t.yg)("inlineCode",{parentName:"p"},"./gradlew quickstartDebugMin"),", the reload command is ",(0,t.yg)("inlineCode",{parentName:"p"},"./gradlew debugMinReload")),(0,t.yg)("p",null,"A full restart using ",(0,t.yg)("inlineCode",{parentName:"p"},"./gradlew quickstartDebug")," is recommended if there are significant changes and the setup/system update containers need to be run again.\nFor incremental changes, the ",(0,t.yg)("inlineCode",{parentName:"p"},"debugReload*")," variants can be used."),(0,t.yg)("h3",{id:"cleaning-up-containers-and-volumes"},"Cleaning up containers and volumes"),(0,t.yg)("p",null,"To completely remove containers and volumes for a specific project, you can use the nuke tasks:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"# Remove containers and volumes for specific projects\n./gradlew quickstartDebugNuke     # For debug project\n./gradlew quickstartCypressNuke   # For cypress project (dh-cypress)\n")),(0,t.yg)("blockquote",null,(0,t.yg)("p",{parentName:"blockquote"},(0,t.yg)("strong",{parentName:"p"},"Note"),": These are Gradle nuke tasks. For CLI-based cleanup, see ",(0,t.yg)("inlineCode",{parentName:"p"},"datahub docker nuke")," in the ",(0,t.yg)("a",{parentName:"p",href:"/docs/quickstart"},"quickstart guide"),".")),(0,t.yg)("h3",{id:"using-env-to-configure-settings-of-services-started-by-quickstart"},"Using .env to configure settings of services started by quickstart"),(0,t.yg)("p",null,"To start datahub with a customized set of environment variables, .env files can be created in the docker/profiles folder.\nFor example, an env file ",(0,t.yg)("inlineCode",{parentName:"p"},"my-settings.env")," can be created in docker/profiles folder and loaded using"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"DATAHUB_LOCAL_COMMON_ENV=my-settings.env ./gradlew quickstartDebug\n")),(0,t.yg)("p",null,"To refresh the containers due to code changes, ",(0,t.yg)("inlineCode",{parentName:"p"},"debugReload")," task can be used.\nTo change the env and reload containers, use the task ",(0,t.yg)("inlineCode",{parentName:"p"},"debugReloadEnv")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"DATAHUB_LOCAL_COMMON_ENV=my-other-settings.env ./gradlew debugReloadEnv\n")),(0,t.yg)("p",null,"This will build any container artifacts were changed and all reloadable containers are re-created to use the new env settings."),(0,t.yg)("h3",{id:"refreshing-the-cli"},"Refreshing the CLI"),(0,t.yg)("p",null,"If you haven't set up the CLI for local development yet, run:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-commandline"},"./gradlew :metadata-ingestion:installDev\ncd metadata-ingestion\nsource venv/bin/activate\n")),(0,t.yg)("p",null,"Once you're in ",(0,t.yg)("inlineCode",{parentName:"p"},"venv"),", your local changes will be reflected automatically.\nFor example, you can run ",(0,t.yg)("inlineCode",{parentName:"p"},"datahub ingest -c <file>")," to test local changes in ingestion connectors."),(0,t.yg)("p",null,"To verify that you're using the local version, run:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-commandline"},"datahub --version\n")),(0,t.yg)("p",null,"Expected Output:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-commandline"},"acryl-datahub, version unavailable (installed in develop mode)\n")),(0,t.yg)("h3",{id:"building-all-docker-images"},"Building All Docker images"),(0,t.yg)("p",null,"Running ",(0,t.yg)("inlineCode",{parentName:"p"},"./gradlew quickstart")," or one of its variants builds images required for that variant and also starts datahub.\nIf you want to build all images without starting datahub, run"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-commandline"},"./gradlew :docker:build\n")),(0,t.yg)("p",null,"You can optionally pass the following additional args when executing ",(0,t.yg)("inlineCode",{parentName:"p"},":docker:build")," task"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"-Ptag=customTag")," to use the custom tag when generating the image tag."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"-PdockerRegistry=customRegistry")," to use the custom registry when generating the full image tag.")),(0,t.yg)("h2",{id:"ide-support"},"IDE Support"),(0,t.yg)("p",null,"The recommended IDE for DataHub development is ",(0,t.yg)("a",{parentName:"p",href:"https://www.jetbrains.com/idea/"},"IntelliJ IDEA"),"."),(0,t.yg)("h3",{id:"required-intellij-plugins"},"Required IntelliJ Plugins"),(0,t.yg)("p",null,"DataHub requires the following IntelliJ plugins for proper development:"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Lombok Plugin")," - Essential for Lombok annotation processing",(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},'Install: Settings \u2192 Plugins \u2192 Search "Lombok" \u2192 Install')))),(0,t.yg)("h3",{id:"setup-steps"},"Setup Steps"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Install required plugins (see above)"),(0,t.yg)("li",{parentName:"ol"},"Generate the IntelliJ project file (re-run after dependency changes):",(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"./gradlew idea\n"))),(0,t.yg)("li",{parentName:"ol"},"Open ",(0,t.yg)("inlineCode",{parentName:"li"},"datahub.ipr")," in IntelliJ")),(0,t.yg)("h2",{id:"windows-compatibility"},"Windows Compatibility"),(0,t.yg)("p",null,"For optimal performance and compatibility, we strongly recommend building on a Mac or Linux system.\nPlease note that we do not actively support Windows in a non-virtualized environment."),(0,t.yg)("p",null,"If you must use Windows, one workaround is to build within a virtualized environment, such as a VM(Virtual Machine) or ",(0,t.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/windows/wsl"},"WSL(Windows Subsystem for Linux)"),".\nThis approach can help ensure that your build environment remains isolated and stable, and that your code is compiled correctly."),(0,t.yg)("h2",{id:"common-build-issues"},"Common Build Issues"),(0,t.yg)("h4",{id:"getting-unsupported-class-file-major-version-57"},"Getting ",(0,t.yg)("inlineCode",{parentName:"h4"},"Unsupported class file major version 57")),(0,t.yg)("p",null,"You're probably using a Java version that's too new for gradle. Run the following command to check your Java version"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"java --version\n")),(0,t.yg)("p",null,"While it may be possible to build and run DataHub using newer versions of Java, we currently only support ",(0,t.yg)("a",{parentName:"p",href:"https://openjdk.org/projects/jdk/17/"},"Java 17")," (aka Java 17)."),(0,t.yg)("h4",{id:"getting-cannot-find-symbol-error-for-javaxannotationgenerated"},"Getting ",(0,t.yg)("inlineCode",{parentName:"h4"},"cannot find symbol")," error for ",(0,t.yg)("inlineCode",{parentName:"h4"},"javax.annotation.Generated")),(0,t.yg)("p",null,"Similar to the previous issue, please use Java 17 to build the project.\nYou can install multiple version of Java on a single machine and switch between them using the ",(0,t.yg)("inlineCode",{parentName:"p"},"JAVA_HOME")," environment variable. See ",(0,t.yg)("a",{parentName:"p",href:"https://docs.oracle.com/cd/E21454_01/html/821-2531/inst_jdk_javahome_t.html"},"this document")," for more details."),(0,t.yg)("h4",{id:"metadata-modelsgeneratedatatemplate-task-fails-with-javaniofileinvalidpathexception-illegal-char--at-index-xx-or-caused-by-javalangillegalargumentexception-other-has-different-root-error"},(0,t.yg)("inlineCode",{parentName:"h4"},":metadata-models:generateDataTemplate")," task fails with ",(0,t.yg)("inlineCode",{parentName:"h4"},"java.nio.file.InvalidPathException: Illegal char <:> at index XX")," or ",(0,t.yg)("inlineCode",{parentName:"h4"},"Caused by: java.lang.IllegalArgumentException: 'other' has different root")," error"),(0,t.yg)("p",null,"This is a ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/linkedin/rest.li/issues/287"},"known issue")," when building the project on Windows due a bug in the Pegasus plugin. Please refer to ",(0,t.yg)("a",{parentName:"p",href:"/docs/developers#windows-compatibility"},"Windows Compatibility"),"."),(0,t.yg)("h4",{id:"various-errors-related-to-generatedatatemplate-or-other-generate-tasks"},"Various errors related to ",(0,t.yg)("inlineCode",{parentName:"h4"},"generateDataTemplate")," or other ",(0,t.yg)("inlineCode",{parentName:"h4"},"generate")," tasks"),(0,t.yg)("p",null,"As we generate quite a few files from the models, it is possible that old generated files may conflict with new model changes. When this happens, a simple ",(0,t.yg)("inlineCode",{parentName:"p"},"./gradlew clean")," should resolve the issue."),(0,t.yg)("h4",{id:"execution-failed-for-task-metadata-servicerestli-servlet-implcheckrestmodel"},(0,t.yg)("inlineCode",{parentName:"h4"},"Execution failed for task ':metadata-service:restli-servlet-impl:checkRestModel'")),(0,t.yg)("p",null,"This generally means that an ",(0,t.yg)("a",{parentName:"p",href:"https://linkedin.github.io/rest.li/modeling/compatibility_check"},"incompatible change")," was introduced to the rest.li API in GMS. You'll need to rebuild the snapshots/IDL by running the following command once"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"./gradlew :metadata-service:restli-servlet-impl:build -Prest.model.compatibility=ignore\n")),(0,t.yg)("h4",{id:"javaioioexception-no-space-left-on-device"},(0,t.yg)("inlineCode",{parentName:"h4"},"java.io.IOException: No space left on device")),(0,t.yg)("p",null,"This means you're running out of space on your disk to build. Please free up some space or try a different disk."),(0,t.yg)("h4",{id:"build-failed-for-task-gradlew-datahub-frontenddist--x-yarntest--x-yarnlint"},(0,t.yg)("inlineCode",{parentName:"h4"},"Build failed")," for task ",(0,t.yg)("inlineCode",{parentName:"h4"},"./gradlew :datahub-frontend:dist -x yarnTest -x yarnLint")),(0,t.yg)("p",null,"This could mean that you need to update your ",(0,t.yg)("a",{parentName:"p",href:"https://yarnpkg.com/getting-started/install"},"Yarn")," version"),(0,t.yg)("h4",{id:"buildsrccompilejava-task-fails-with-package-comlinkedinmetadatamodelsregistryconfig-does-not-exist-and-cannot-find-symbol-error-for-entity"},(0,t.yg)("inlineCode",{parentName:"h4"},":buildSrc:compileJava")," task fails with ",(0,t.yg)("inlineCode",{parentName:"h4"},"package com.linkedin.metadata.models.registry.config does not exist")," and ",(0,t.yg)("inlineCode",{parentName:"h4"},"cannot find symbol")," error for ",(0,t.yg)("inlineCode",{parentName:"h4"},"Entity")),(0,t.yg)("p",null,"There are currently two symbolic links within the ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub/tree/master/buildSrc"},"buildSrc")," directory for the ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub/blob/master/buildSrc/src/main/java/com/linkedin/metadata/aspect/plugins/config"},"com.linkedin.metadata.aspect.plugins.config")," and ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub/blob/master/buildSrc/src/main/java/com/linkedin/metadata/models/registry/config"},"com.linkedin.metadata.models.registry.config")," packages, which points to the corresponding packages in the ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub/tree/master/entity-registry"},"entity-registry")," subproject."),(0,t.yg)("p",null,"When the repository is checked out using Windows 10/11 - even if WSL is later used for building using the mounted Windows filesystem in ",(0,t.yg)("inlineCode",{parentName:"p"},"/mnt/")," - the symbolic links might have not been created correctly, instead the symbolic links were checked out as plain files. Although it is technically possible to use the mounted Windows filesystem in ",(0,t.yg)("inlineCode",{parentName:"p"},"/mnt/")," for building in WSL, it is ",(0,t.yg)("strong",{parentName:"p"},"strongly recommended")," to checkout the repository within the Linux filesystem (e.g., in ",(0,t.yg)("inlineCode",{parentName:"p"},"/home/"),") and building it from there, because accessing the Windows filesystem from Linux is relatively slow compared to the Linux filesystem and slows down the whole building process."),(0,t.yg)("p",null,"To be able to create symbolic links in Windows 10/11 the ",(0,t.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/windows/apps/get-started/enable-your-device-for-development"},"Developer Mode")," has to be enabled first. Then the following commands can be used to enable ",(0,t.yg)("a",{parentName:"p",href:"https://git-scm.com/docs/git-config#Documentation/git-config.txt-coresymlinks"},"symbolic links in Git")," and recreating the symbolic links:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-shell"},"# enable core.symlinks config\ngit config --global core.symlinks true\n\n# check the current core.symlinks config and scope\ngit config --show-scope --show-origin core.symlinks\n\n# in case the core.symlinks config is still set locally to false, remove the local config\ngit config --unset core.symlinks\n\n# reset the current branch to recreate the missing symbolic links (alternatively it is also possibly to switch branches away and back)\ngit reset --hard\n")),(0,t.yg)("p",null,"See also ",(0,t.yg)("a",{parentName:"p",href:"https://stackoverflow.com/questions/5917249/git-symbolic-links-in-windows/59761201#59761201"},"here")," for more information on how to enable symbolic links on Windows 10/11 and Git."),(0,t.yg)("h2",{id:"security-testing"},"Security Testing"),(0,t.yg)("h3",{id:"configuration-property-classification-test"},"Configuration Property Classification Test"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Location"),": ",(0,t.yg)("inlineCode",{parentName:"p"},"metadata-io/src/test/java/com/linkedin/metadata/system_info/collectors/PropertiesCollectorConfigurationTest.java")),(0,t.yg)("p",null,"This test ensures all configuration properties are explicitly classified as either sensitive (redacted) or non-sensitive (visible in system info). It prevents accidental exposure of secrets through DataHub's system information endpoints."),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"When you add new configuration properties:")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"The test will fail if your property is unclassified"),(0,t.yg)("li",{parentName:"ol"},"Follow the test failure message to add your property to the appropriate classification list"),(0,t.yg)("li",{parentName:"ol"},"When in doubt, classify as sensitive - it's safer to over-redact than expose secrets")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"Run the test:")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-bash"},'./gradlew :metadata-io:test --tests "*.PropertiesCollectorConfigurationTest"\n')),(0,t.yg)("p",null,"Refer to the test file itself for comprehensive documentation on classification lists, template syntax, and examples. This is a mandatory security guardrail that protects against credential leaks."))}m.isMDXComponent=!0}}]);