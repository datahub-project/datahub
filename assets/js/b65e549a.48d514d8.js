"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[93584],{15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>h});var a=t(96540);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(t),m=i,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||r;return t?a.createElement(h,o(o({ref:n},p),{},{components:t})):a.createElement(h,o({ref:n},p))}));function h(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},52748:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>d});t(96540);var a=t(15680);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function o(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}const l={title:"Rest.li API",slug:"/api/restli/restli-overview",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/restli/restli-overview.md"},s="Rest.li API",c={unversionedId:"docs/api/restli/restli-overview",id:"docs/api/restli/restli-overview",title:"Rest.li API",description:"You can access basic documentation on the API endpoints by opening the /restli/docs endpoint in the browser.",source:"@site/genDocs/docs/api/restli/restli-overview.md",sourceDirName:"docs/api/restli",slug:"/api/restli/restli-overview",permalink:"/docs/api/restli/restli-overview",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/api/restli/restli-overview.md",tags:[],version:"current",frontMatter:{title:"Rest.li API",slug:"/api/restli/restli-overview",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/restli/restli-overview.md"},sidebar:"overviewSidebar",previous:{title:"Timeline API",permalink:"/docs/dev-guides/timeline"},next:{title:"Restore Indices Endpoint",permalink:"/docs/api/restli/restore-indices"}},p={},d=[{value:"Sample API Calls",id:"sample-api-calls",level:4},{value:"Ingesting Aspects",id:"ingesting-aspects",level:4},{value:"Ingesting Entities (Legacy)",id:"ingesting-entities-legacy",level:4},{value:"Create a user",id:"create-a-user",level:5},{value:"Create a group",id:"create-a-group",level:5},{value:"Create a dataset",id:"create-a-dataset",level:5},{value:"Create a chart",id:"create-a-chart",level:5},{value:"Create a dashboard",id:"create-a-dashboard",level:5},{value:"Create Tags",id:"create-tags",level:5},{value:"Soft Deleting an Entity",id:"soft-deleting-an-entity",level:5},{value:"Retrieving Entity Aspects",id:"retrieving-entity-aspects",level:4},{value:"Retrieving Entities (Legacy)",id:"retrieving-entities-legacy",level:4},{value:"Get a CorpUser",id:"get-a-corpuser",level:5},{value:"Get a CorpGroup",id:"get-a-corpgroup",level:5},{value:"Get a Dataset",id:"get-a-dataset",level:5},{value:"Get a Chart",id:"get-a-chart",level:5},{value:"Get a Dashboard",id:"get-a-dashboard",level:5},{value:"Get a GlossaryTerm",id:"get-a-glossaryterm",level:5},{value:"Browse an Entity",id:"browse-an-entity",level:5},{value:"Search an Entity",id:"search-an-entity",level:5},{value:"Exact Match Search",id:"exact-match-search",level:6},{value:"Example: Find assets by Tag",id:"example-find-assets-by-tag",level:6},{value:"Filtering",id:"filtering",level:6},{value:"Autocomplete against fields of an entity",id:"autocomplete-against-fields-of-an-entity",level:5},{value:"Get a Versioned Aspect",id:"get-a-versioned-aspect",level:5},{value:"Get a range of Versioned Aspects",id:"get-a-range-of-versioned-aspects",level:5},{value:"Get a range of Timeseries Aspects",id:"get-a-range-of-timeseries-aspects",level:5},{value:"Get Relationships (Edges)",id:"get-relationships-edges",level:5},{value:"FAQ",id:"faq",level:2}],u={toc:d},m="wrapper";function h(e){var{components:n}=e,t=o(e,["components"]);return(0,a.yg)(m,r(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){i(e,n,t[n])}))}return e}({},u,t),{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"restli-api"},"Rest.li API"),(0,a.yg)("p",null,"You can access basic documentation on the API endpoints by opening the ",(0,a.yg)("inlineCode",{parentName:"p"},"/restli/docs")," endpoint in the browser."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"python -c \"import webbrowser; webbrowser.open('http://localhost:8080/restli/docs', new=2)\"\n")),(0,a.yg)("p",null,"*","Please note that because DataHub is in a period of rapid development, the APIs below are subject to change."),(0,a.yg)("h4",{id:"sample-api-calls"},"Sample API Calls"),(0,a.yg)("h4",{id:"ingesting-aspects"},"Ingesting Aspects"),(0,a.yg)("p",null,"To ingest individual aspects into DataHub, you can use the following CURL:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'http://localhost:8080/aspects?action=ingestProposal\' \\\n--header \'X-RestLi-Protocol-Version: 2.0.0\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n  "proposal" : {\n    "entityType": "dataset",\n    "entityUrn" : "urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)",\n    "changeType" : "UPSERT",\n    "aspectName" : "datasetUsageStatistics",\n    "aspect" : {\n      "value" : "{ \\"timestampMillis\\":1629840771000,\\"uniqueUserCount\\" : 10, \\"totalSqlQueries\\": 20, \\"fieldCounts\\": [ {\\"fieldPath\\": \\"col1\\", \\"count\\": 20}, {\\"fieldPath\\" : \\"col2\\", \\"count\\": 5} ]}",\n      "contentType": "application/json"\n    }\n  }\n}\'\n')),(0,a.yg)("p",null,"Notice that you need to provide the target entity urn, the entity type, a change type (",(0,a.yg)("inlineCode",{parentName:"p"},"UPSERT")," + ",(0,a.yg)("inlineCode",{parentName:"p"},"DELETE")," supported),\nthe aspect name, and a JSON-serialized aspect, which corresponds to the PDL schema defined for the aspect."),(0,a.yg)("p",null,"For more examples of serialized aspect payloads, see ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/examples/mce_files/bootstrap_mce.json"},"bootstrap_mce.json"),"."),(0,a.yg)("h4",{id:"ingesting-entities-legacy"},"Ingesting Entities (Legacy)"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"Note - we are deprecating support for ingesting Entities via Snapshots. Please see ",(0,a.yg)("strong",{parentName:"p"},"Ingesting Aspects")," above for the latest\nguidance around ingesting metadata into DataHub without defining or changing the legacy snapshot models. (e.g. using ConfigEntityRegistry)")),(0,a.yg)("p",null,"The Entity Snapshot Ingest endpoints allow you to ingest multiple aspects about a particular entity at the same time."),(0,a.yg)("h5",{id:"create-a-user"},"Create a user"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.CorpUserSnapshot":{\n            "urn":"urn:li:corpuser:footbarusername",\n            "aspects":[\n               {\n                  "com.linkedin.identity.CorpUserInfo":{\n                     "active":true,\n                     "displayName":"Foo Bar",\n                     "fullName":"Foo Bar",\n                     "email":"fbar@linkedin.com"\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("h5",{id:"create-a-group"},"Create a group"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.CorpGroupSnapshot":{\n            "urn":"urn:li:corpGroup:dev",\n            "aspects":[\n               {\n                  "com.linkedin.identity.CorpGroupInfo":{\n                     "email":"dev@linkedin.com",\n                     "admins":[\n                        "urn:li:corpUser:jdoe"\n                     ],\n                     "members":[\n                        "urn:li:corpUser:datahub",\n                        "urn:li:corpUser:jdoe"\n                     ],\n                     "groups":[\n\n                     ]\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("h5",{id:"create-a-dataset"},"Create a dataset"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.DatasetSnapshot":{\n            "urn":"urn:li:dataset:(urn:li:dataPlatform:foo,bar,PROD)",\n            "aspects":[\n               {\n                  "com.linkedin.common.Ownership":{\n                     "owners":[\n                        {\n                           "owner":"urn:li:corpuser:fbar",\n                           "type":"DATAOWNER"\n                        }\n                     ],\n                     "lastModified":{\n                        "time":0,\n                        "actor":"urn:li:corpuser:fbar"\n                     }\n                  }\n               },\n               {\n                  "com.linkedin.common.InstitutionalMemory":{\n                     "elements":[\n                        {\n                           "url":"https://www.linkedin.com",\n                           "description":"Sample doc",\n                           "createStamp":{\n                              "time":0,\n                              "actor":"urn:li:corpuser:fbar"\n                           }\n                        }\n                     ]\n                  }\n               },\n               {\n                  "com.linkedin.schema.SchemaMetadata":{\n                     "schemaName":"FooEvent",\n                     "platform":"urn:li:dataPlatform:foo",\n                     "version":0,\n                     "created":{\n                        "time":0,\n                        "actor":"urn:li:corpuser:fbar"\n                     },\n                     "lastModified":{\n                        "time":0,\n                        "actor":"urn:li:corpuser:fbar"\n                     },\n                     "hash":"",\n                     "platformSchema":{\n                        "com.linkedin.schema.KafkaSchema":{\n                           "documentSchema":"{\\"type\\":\\"record\\",\\"name\\":\\"MetadataChangeEvent\\",\\"namespace\\":\\"com.linkedin.mxe\\",\\"doc\\":\\"Kafka event for proposing a metadata change for an entity.\\",\\"fields\\":[{\\"name\\":\\"auditHeader\\",\\"type\\":{\\"type\\":\\"record\\",\\"name\\":\\"KafkaAuditHeader\\",\\"namespace\\":\\"com.linkedin.avro2pegasus.events\\",\\"doc\\":\\"Header\\"}}]}"\n                        }\n                     },\n                     "fields":[\n                        {\n                           "fieldPath":"foo",\n                           "description":"Bar",\n                           "nativeDataType":"string",\n                           "type":{\n                              "type":{\n                                 "com.linkedin.schema.StringType":{\n\n                                 }\n                              }\n                           }\n                        }\n                     ]\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("h5",{id:"create-a-chart"},"Create a chart"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.ChartSnapshot":{\n            "urn":"urn:li:chart:(looker,baz1)",\n            "aspects":[\n               {\n                  "com.linkedin.chart.ChartInfo":{\n                     "title":"Baz Chart 1",\n                     "description":"Baz Chart 1",\n                     "inputs":[\n                        {\n                           "string":"urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)"\n                        }\n                     ],\n                     "lastModified":{\n                        "created":{\n                           "time":0,\n                           "actor":"urn:li:corpuser:jdoe"\n                        },\n                        "lastModified":{\n                           "time":0,\n                           "actor":"urn:li:corpuser:datahub"\n                        }\n                     }\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("h5",{id:"create-a-dashboard"},"Create a dashboard"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.DashboardSnapshot":{\n            "urn":"urn:li:dashboard:(looker,baz)",\n            "aspects":[\n               {\n                  "com.linkedin.dashboard.DashboardInfo":{\n                     "title":"Baz Dashboard",\n                     "description":"Baz Dashboard",\n                     "charts":[\n                        "urn:li:chart:(looker,baz1)",\n                        "urn:li:chart:(looker,baz2)"\n                     ],\n                     "lastModified":{\n                        "created":{\n                           "time":0,\n                           "actor":"urn:li:corpuser:jdoe"\n                        },\n                        "lastModified":{\n                           "time":0,\n                           "actor":"urn:li:corpuser:datahub"\n                        }\n                     }\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("h5",{id:"create-tags"},"Create Tags"),(0,a.yg)("p",null,'To create a new tag called "Engineering", we can use the following curl.'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.TagSnapshot":{\n            "urn":"urn:li:tag:Engineering",\n            "aspects":[\n               {\n                  "com.linkedin.tag.TagProperties":{\n                     "name":"Engineering",\n                     "description":"The tag will be assigned to all assets owned by the Eng org."\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("p",null,'This tag can subsequently be associated with a Data Asset using the "Global Tags" aspect associated with each. For example,\nto add a tag to a Dataset, you can use the following CURL:'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.DatasetSnapshot":{\n            "urn":"urn:li:dataset:(urn:li:dataPlatform:foo,bar,PROD)",\n            "aspects":[\n               {\n                  "com.linkedin.common.GlobalTags":{\n                     "tags":[\n                        {\n                           "tag":"urn:li:tag:Engineering"\n                        }\n                     ]\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("p",null,"And to add the tag to a field in a particular Dataset's schema, you can use a CURL to update the EditableSchemaMetadata Aspect:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.DatasetSnapshot":{\n            "urn":"urn:li:dataset:(urn:li:dataPlatform:foo,bar,PROD)",\n            "aspects":[\n               {\n                  "com.linkedin.schema.EditableSchemaMetadata": {\n                     "editableSchemaFieldInfo":[\n                        {\n                           "fieldPath":"myFieldName",\n                           "globalTags": {\n                              "tags":[\n                                 {\n                                     "tag":"urn:li:tag:Engineering"\n                                 }\n                              ]\n                           }\n                        }\n                     ]\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("h5",{id:"soft-deleting-an-entity"},"Soft Deleting an Entity"),(0,a.yg)("p",null,'DataHub uses a special "Status" aspect associated with each entity to represent the lifecycle state of an Entity.\nTo soft delete an entire Entity, you can use the special "Status" aspect. Note that soft deletion means that\nan entity will not be discoverable via Search or Browse, but its entity page will still be viewable.'),(0,a.yg)("p",null,"For example, to delete a particular chart:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.ChartSnapshot":{\n            "aspects":[\n               {\n                  "com.linkedin.common.Status":{\n                     "removed": true\n                  }\n               }\n            ],\n            "urn":"urn:li:chart:(looker,baz1)"\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("p",null,"To re-enable the Entity, you can make a similar request:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities?action=ingest\' -X POST --data \'{\n   "entity":{\n      "value":{\n         "com.linkedin.metadata.snapshot.ChartSnapshot":{\n            "aspects":[\n               {\n                  "com.linkedin.common.Status":{\n                     "removed": false\n                  }\n               }\n            ],\n            "urn":"urn:li:chart:(looker,baz1)"\n         }\n      }\n   }\n}\'\n')),(0,a.yg)("p",null,"To issue a hard delete or soft-delete, or undo a particular ingestion run, you can use the ",(0,a.yg)("a",{parentName:"p",href:"/docs/how/delete-metadata"},"DataHub CLI"),"."),(0,a.yg)("h4",{id:"retrieving-entity-aspects"},"Retrieving Entity Aspects"),(0,a.yg)("p",null,"Simply curl the ",(0,a.yg)("inlineCode",{parentName:"p"},"entitiesV2")," endpoint of GMS:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"curl  'http://localhost:8080/entitiesV2/<url-encoded-entity-urn>'\n")),(0,a.yg)("p",null,'For example, to retrieve the latest aspects associated with the "SampleHdfsDataset" ',(0,a.yg)("inlineCode",{parentName:"p"},"Dataset"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"curl --header 'X-RestLi-Protocol-Version: 2.0.0' 'http://localhost:8080/entitiesV2/urn%3Ali%3Adataset%3A%28urn%3Ali%3AdataPlatform%3Ahdfs%2CSampleHdfsDataset%2CPROD%29'\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Example Response")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "urn": "urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)",\n  "aspects": {\n    "editableSchemaMetadata": {\n      "name": "editableSchemaMetadata",\n      "version": 0,\n      "value": {\n        "created": {\n          "actor": "urn:li:corpuser:jdoe",\n          "time": 1581407189000\n        },\n        "editableSchemaFieldInfo": [\n          {\n            "fieldPath": "shipment_info",\n            "globalTags": {\n              "tags": [\n                {\n                  "tag": "urn:li:tag:Legacy"\n                }\n              ]\n            }\n          }\n        ],\n        "lastModified": {\n          "actor": "urn:li:corpuser:jdoe",\n          "time": 1581407189000\n        }\n      },\n      "created": {\n        "actor": "urn:li:corpuser:UNKNOWN",\n        "time": 1646245614843\n      }\n    },\n    "browsePaths": {\n      "name": "browsePaths",\n      "version": 0,\n      "value": {\n        "paths": ["/prod/hdfs/SampleHdfsDataset"]\n      },\n      "created": {\n        "actor": "urn:li:corpuser:UNKNOWN",\n        "time": 1646245614843\n      }\n    },\n    "datasetKey": {\n      "name": "datasetKey",\n      "version": 0,\n      "value": {\n        "name": "SampleHdfsDataset",\n        "platform": "urn:li:dataPlatform:hdfs",\n        "origin": "PROD"\n      },\n      "created": {\n        "actor": "urn:li:corpuser:UNKNOWN",\n        "time": 1646245614843\n      }\n    },\n    "ownership": {\n      "name": "ownership",\n      "version": 0,\n      "value": {\n        "owners": [\n          {\n            "owner": "urn:li:corpuser:jdoe",\n            "type": "DATAOWNER"\n          },\n          {\n            "owner": "urn:li:corpuser:datahub",\n            "type": "DATAOWNER"\n          }\n        ],\n        "lastModified": {\n          "actor": "urn:li:corpuser:jdoe",\n          "time": 1581407189000\n        }\n      },\n      "created": {\n        "actor": "urn:li:corpuser:UNKNOWN",\n        "time": 1646245614843\n      }\n    },\n    "dataPlatformInstance": {\n      "name": "dataPlatformInstance",\n      "version": 0,\n      "value": {\n        "platform": "urn:li:dataPlatform:hdfs"\n      },\n      "created": {\n        "actor": "urn:li:corpuser:UNKNOWN",\n        "time": 1646245614843\n      }\n    },\n    "institutionalMemory": {\n      "name": "institutionalMemory",\n      "version": 0,\n      "value": {\n        "elements": [\n          {\n            "createStamp": {\n              "actor": "urn:li:corpuser:jdoe",\n              "time": 1581407189000\n            },\n            "description": "Sample doc",\n            "url": "https://www.linkedin.com"\n          }\n        ]\n      },\n      "created": {\n        "actor": "urn:li:corpuser:UNKNOWN",\n        "time": 1646245614843\n      }\n    },\n    "schemaMetadata": {\n      "name": "schemaMetadata",\n      "version": 0,\n      "value": {\n        "created": {\n          "actor": "urn:li:corpuser:jdoe",\n          "time": 1581407189000\n        },\n        "platformSchema": {\n          "com.linkedin.schema.KafkaSchema": {\n            "documentSchema": "{\\"type\\":\\"record\\",\\"name\\":\\"SampleHdfsSchema\\",\\"namespace\\":\\"com.linkedin.dataset\\",\\"doc\\":\\"Sample HDFS dataset\\",\\"fields\\":[{\\"name\\":\\"field_foo\\",\\"type\\":[\\"string\\"]},{\\"name\\":\\"field_bar\\",\\"type\\":[\\"boolean\\"]}]}"\n          }\n        },\n        "lastModified": {\n          "actor": "urn:li:corpuser:jdoe",\n          "time": 1581407189000\n        },\n        "schemaName": "SampleHdfsSchema",\n        "fields": [\n          {\n            "nullable": false,\n            "fieldPath": "shipment_info",\n            "description": "Shipment info description",\n            "isPartOfKey": false,\n            "type": {\n              "type": {\n                "com.linkedin.schema.RecordType": {}\n              }\n            },\n            "nativeDataType": "varchar(100)",\n            "recursive": false\n          },\n          {\n            "nullable": false,\n            "fieldPath": "shipment_info.date",\n            "description": "Shipment info date description",\n            "isPartOfKey": false,\n            "type": {\n              "type": {\n                "com.linkedin.schema.DateType": {}\n              }\n            },\n            "nativeDataType": "Date",\n            "recursive": false\n          },\n          {\n            "nullable": false,\n            "fieldPath": "shipment_info.target",\n            "description": "Shipment info target description",\n            "isPartOfKey": false,\n            "type": {\n              "type": {\n                "com.linkedin.schema.StringType": {}\n              }\n            },\n            "nativeDataType": "text",\n            "recursive": false\n          },\n          {\n            "nullable": false,\n            "fieldPath": "shipment_info.destination",\n            "description": "Shipment info destination description",\n            "isPartOfKey": false,\n            "type": {\n              "type": {\n                "com.linkedin.schema.StringType": {}\n              }\n            },\n            "nativeDataType": "varchar(100)",\n            "recursive": false\n          },\n          {\n            "nullable": false,\n            "fieldPath": "shipment_info.geo_info",\n            "description": "Shipment info geo_info description",\n            "isPartOfKey": false,\n            "type": {\n              "type": {\n                "com.linkedin.schema.RecordType": {}\n              }\n            },\n            "nativeDataType": "varchar(100)",\n            "recursive": false\n          },\n          {\n            "nullable": false,\n            "fieldPath": "shipment_info.geo_info.lat",\n            "description": "Shipment info geo_info lat",\n            "isPartOfKey": false,\n            "type": {\n              "type": {\n                "com.linkedin.schema.NumberType": {}\n              }\n            },\n            "nativeDataType": "float",\n            "recursive": false\n          },\n          {\n            "nullable": false,\n            "fieldPath": "shipment_info.geo_info.lng",\n            "description": "Shipment info geo_info lng",\n            "isPartOfKey": false,\n            "type": {\n              "type": {\n                "com.linkedin.schema.NumberType": {}\n              }\n            },\n            "nativeDataType": "float",\n            "recursive": false\n          }\n        ],\n        "version": 0,\n        "hash": "",\n        "platform": "urn:li:dataPlatform:hdfs"\n      },\n      "created": {\n        "actor": "urn:li:corpuser:UNKNOWN",\n        "time": 1646245614843\n      }\n    },\n    "upstreamLineage": {\n      "name": "upstreamLineage",\n      "version": 0,\n      "value": {\n        "upstreams": [\n          {\n            "auditStamp": {\n              "actor": "urn:li:corpuser:jdoe",\n              "time": 1581407189000\n            },\n            "type": "TRANSFORMED",\n            "dataset": "urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD)"\n          }\n        ]\n      },\n      "created": {\n        "actor": "urn:li:corpuser:UNKNOWN",\n        "time": 1646245614843\n      }\n    }\n  },\n  "entityName": "dataset"\n}\n')),(0,a.yg)("p",null,"You can also optionally limit to specific aspects using the ",(0,a.yg)("inlineCode",{parentName:"p"},"aspects")," query parameter:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"curl  'http://localhost:8080/entitiesV2/<url-encoded-entity-urn>?aspects=List(upstreamLineage)'\n")),(0,a.yg)("h4",{id:"retrieving-entities-legacy"},"Retrieving Entities (Legacy)"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"Note that this method of retrieving entities is deprecated, as it uses the legacy Snapshot models. Please refer to the ",(0,a.yg)("strong",{parentName:"p"},"Retriving Entity Aspects")," section above for the\nlatest guidance.")),(0,a.yg)("p",null,"The Entity Snapshot Get APIs allow to retrieve the latest version of each aspect associated with an Entity."),(0,a.yg)("p",null,"In general, when reading entities by primary key (urn), you will use the general-purpose ",(0,a.yg)("inlineCode",{parentName:"p"},"entities")," endpoints. To fetch by primary key (urn), you'll\nissue a query of the following form:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"curl  'http://localhost:8080/entities/<url-encoded-entity-urn>'\n")),(0,a.yg)("h5",{id:"get-a-corpuser"},"Get a CorpUser"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities/urn%3Ali%3Acorpuser%3Afbar\'\n\n{\n   "value":{\n      "com.linkedin.metadata.snapshot.CorpUserSnapshot":{\n         "urn":"urn:li:corpuser:fbar",\n         "aspects":[\n            {\n               "com.linkedin.metadata.key.CorpUserKey":{\n                  "username":"fbar"\n               }\n            },\n            {\n               "com.linkedin.identity.CorpUserInfo":{\n                  "active":true,\n                  "fullName":"Foo Bar",\n                  "displayName":"Foo Bar",\n                  "email":"fbar@linkedin.com"\n               }\n            },\n            {\n               "com.linkedin.identity.CorpUserEditableInfo":{\n\n               }\n            }\n         ]\n      }\n   }\n}\n')),(0,a.yg)("h5",{id:"get-a-corpgroup"},"Get a CorpGroup"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities/urn%3Ali%3AcorpGroup%3Adev\'\n\n{\n   "value":{\n      "com.linkedin.metadata.snapshot.CorpGroupSnapshot":{\n         "urn":"urn:li:corpGroup:dev",\n         "aspects":[\n            {\n               "com.linkedin.metadata.key.CorpGroupKey":{\n                  "name":"dev"\n               }\n            },\n            {\n               "com.linkedin.identity.CorpGroupInfo":{\n                  "groups":[\n\n                  ],\n                  "email":"dev@linkedin.com",\n                  "admins":[\n                     "urn:li:corpUser:jdoe"\n                  ],\n                  "members":[\n                     "urn:li:corpUser:datahub",\n                     "urn:li:corpUser:jdoe"\n                  ]\n               }\n            }\n         ]\n      }\n   }\n}\n')),(0,a.yg)("h5",{id:"get-a-dataset"},"Get a Dataset"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities/urn%3Ali%3Adataset%3A(urn%3Ali%3AdataPlatform%3Afoo,bar,PROD)\'\n\n{\n   "value":{\n      "com.linkedin.metadata.snapshot.DatasetSnapshot":{\n         "urn":"urn:li:dataset:(urn:li:dataPlatform:foo,bar,PROD)",\n         "aspects":[\n            {\n               "com.linkedin.metadata.key.DatasetKey":{\n                  "origin":"PROD",\n                  "name":"bar",\n                  "platform":"urn:li:dataPlatform:foo"\n               }\n            },\n            {\n               "com.linkedin.common.InstitutionalMemory":{\n                  "elements":[\n                     {\n                        "createStamp":{\n                           "actor":"urn:li:corpuser:fbar",\n                           "time":0\n                        },\n                        "description":"Sample doc",\n                        "url":"https://www.linkedin.com"\n                     }\n                  ]\n               }\n            },\n            {\n               "com.linkedin.common.Ownership":{\n                  "owners":[\n                     {\n                        "owner":"urn:li:corpuser:fbar",\n                        "type":"DATAOWNER"\n                     }\n                  ],\n                  "lastModified":{\n                     "actor":"urn:li:corpuser:fbar",\n                     "time":0\n                  }\n               }\n            },\n            {\n               "com.linkedin.schema.SchemaMetadata":{\n                  "created":{\n                     "actor":"urn:li:corpuser:fbar",\n                     "time":0\n                  },\n                  "platformSchema":{\n                     "com.linkedin.schema.KafkaSchema":{\n                        "documentSchema":"{\\"type\\":\\"record\\",\\"name\\":\\"MetadataChangeEvent\\",\\"namespace\\":\\"com.linkedin.mxe\\",\\"doc\\":\\"Kafka event for proposing a metadata change for an entity.\\",\\"fields\\":[{\\"name\\":\\"auditHeader\\",\\"type\\":{\\"type\\":\\"record\\",\\"name\\":\\"KafkaAuditHeader\\",\\"namespace\\":\\"com.linkedin.avro2pegasus.events\\",\\"doc\\":\\"Header\\"}}]}"\n                     }\n                  },\n                  "lastModified":{\n                     "actor":"urn:li:corpuser:fbar",\n                     "time":0\n                  },\n                  "schemaName":"FooEvent",\n                  "fields":[\n                     {\n                        "fieldPath":"foo",\n                        "description":"Bar",\n                        "type":{\n                           "type":{\n                              "com.linkedin.schema.StringType":{\n\n                              }\n                           }\n                        },\n                        "nativeDataType":"string"\n                     }\n                  ],\n                  "version":0,\n                  "hash":"",\n                  "platform":"urn:li:dataPlatform:foo"\n               }\n            },\n            {\n               "com.linkedin.common.BrowsePaths":{\n                  "paths":[\n                     "/prod/foo/bar"\n                  ]\n               }\n            },\n            {\n               "com.linkedin.dataset.UpstreamLineage":{\n                  "upstreams":[\n                     {\n                        "auditStamp":{\n                           "actor":"urn:li:corpuser:fbar",\n                           "time":0\n                        },\n                        "type":"TRANSFORMED",\n                        "dataset":"urn:li:dataset:(urn:li:dataPlatform:foo,barUp,PROD)"\n                     }\n                  ]\n               }\n            }\n         ]\n      }\n   }\n}\n')),(0,a.yg)("h5",{id:"get-a-chart"},"Get a Chart"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities/urn%3Ali%3Achart%3A(looker,baz1)\'\n\n{\n   "value":{\n      "com.linkedin.metadata.snapshot.ChartSnapshot":{\n         "urn":"urn:li:chart:(looker,baz1)",\n         "aspects":[\n            {\n               "com.linkedin.metadata.key.ChartKey":{\n                  "chartId":"baz1",\n                  "dashboardTool":"looker"\n               }\n            },\n            {\n               "com.linkedin.common.BrowsePaths":{\n                  "paths":[\n                     "/looker/baz1"\n                  ]\n               }\n            },\n            {\n               "com.linkedin.chart.ChartInfo":{\n                  "description":"Baz Chart 1",\n                  "lastModified":{\n                     "created":{\n                        "actor":"urn:li:corpuser:jdoe",\n                        "time":0\n                     },\n                     "lastModified":{\n                        "actor":"urn:li:corpuser:datahub",\n                        "time":0\n                     }\n                  },\n                  "title":"Baz Chart 1",\n                  "inputs":[\n                     {\n                        "string":"urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)"\n                     }\n                  ]\n               }\n            }\n         ]\n      }\n   }\n}\n')),(0,a.yg)("h5",{id:"get-a-dashboard"},"Get a Dashboard"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities/urn%3Ali%3Adashboard%3A(looker,foo)\'\n\n{\n   "value":{\n      "com.linkedin.metadata.snapshot.DashboardSnapshot":{\n         "urn":"urn:li:dashboard:(looker,foo)",\n         "aspects":[\n            {\n               "com.linkedin.metadata.key.DashboardKey":{\n                  "dashboardId":"foo",\n                  "dashboardTool":"looker"\n               }\n            }\n         ]\n      }\n   }\n}\n')),(0,a.yg)("h5",{id:"get-a-glossaryterm"},"Get a GlossaryTerm"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/entities/urn%3Ali%3AglossaryTerm%3A(instruments,instruments.FinancialInstrument_v1)\'\n{\n   "value":{\n      "com.linkedin.metadata.snapshot.GlossaryTermSnapshot":{\n         "urn":"urn:li:glossaryTerm:instruments.FinancialInstrument_v1",\n         "ownership":{\n            "owners":[\n               {\n                  "owner":"urn:li:corpuser:jdoe",\n                  "type":"DATAOWNER"\n               }\n            ],\n            "lastModified":{\n               "actor":"urn:li:corpuser:jdoe",\n               "time":1581407189000\n            }\n         },\n         "glossaryTermInfo":{\n            "definition":"written contract that gives rise to both a financial asset of one entity and a financial liability of another entity",\n            "customProperties":{\n               "FQDN":"full"\n            },\n            "sourceRef":"FIBO",\n            "sourceUrl":"https://spec.edmcouncil.org/fibo/ontology/FBC/FinancialInstruments/FinancialInstruments/FinancialInstrument",\n            "termSource":"EXTERNAL"\n         }\n      }\n   }\n}\n')),(0,a.yg)("h5",{id:"browse-an-entity"},"Browse an Entity"),(0,a.yg)("p",null,"To browse (explore) for an Entity of a particular type (e.g. dataset, chart, etc), you can use the following query format:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=browse\' \\\n--data \'{\n    "path": "<slash-delimited-browse-path>",\n    "entity": "<entity name>",\n    "start": 0,\n    "limit": 10\n}\'\n')),(0,a.yg)("p",null,'For example, to browse the "charts" entity, you could use the following query:'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=browse\' \\\n--data \'{\n    "path": "/looker",\n    "entity": "chart",\n    "start": 0,\n    "limit": 10\n}\'\n\n{\n   "value":{\n      "numEntities":1,\n      "pageSize":1,\n      "metadata":{\n         "totalNumEntities":1,\n         "groups":[\n\n         ],\n         "path":"/looker"\n      },\n      "from":0,\n      "entities":[\n         {\n            "name":"baz1",\n            "urn":"urn:li:chart:(looker,baz1)"\n         }\n      ]\n   }\n}\n')),(0,a.yg)("h5",{id:"search-an-entity"},"Search an Entity"),(0,a.yg)("p",null,"To search for an Entity of a particular type (e.g. dataset, chart, etc), you can use the following query format:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=search\' \\\n--data \'{\n    "input": "<query-text>",\n    "entity": "<entity name>",\n    "start": 0,\n    "count": 10\n}\'\n')),(0,a.yg)("p",null,"The API will return a list of URNs that matched your search query."),(0,a.yg)("p",null,'For example, to search the "charts" entity, you could use the following query:'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=search\' \\\n--data \'{\n    "input": "looker",\n    "entity": "chart",\n    "start": 0,\n    "count": 10\n}\'\n\n{\n   "value":{\n      "numEntities":1,\n      "pageSize":10,\n      "metadata":{\n         "urns":[\n            "urn:li:chart:(looker,baz1)"\n         ],\n         "matches":[\n            {\n               "matchedFields":[\n                  {\n                     "name":"tool",\n                     "value":"looker"\n                  }\n               ]\n            }\n         ],\n         "searchResultMetadatas":[\n            {\n               "name":"tool",\n               "aggregations":{\n                  "looker":1\n               }\n            }\n         ]\n      },\n      "from":0,\n      "entities":[\n         "urn:li:chart:(looker,baz1)"\n      ]\n   }\n}\n')),(0,a.yg)("h6",{id:"exact-match-search"},"Exact Match Search"),(0,a.yg)("p",null,"You can use colon search for exact match searching on particular @Searchable fields of an Entity."),(0,a.yg)("h6",{id:"example-find-assets-by-tag"},"Example: Find assets by Tag"),(0,a.yg)("p",null,"For example, to fetch all Datasets having a particular tag (Engineering), we can use the following query:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=search\' \\\n--data \'{\n    "input": "tags:Engineering",\n    "entity": "dataset",\n    "start": 0,\n    "count": 10\n}\'\n\n{\n   "value":{\n      "numEntities":1,\n      "pageSize":10,\n      "metadata":{\n         "urns":[\n            "urn:li:dataset:(urn:li:dataPlatform:foo,bar,PROD)"\n         ],\n         "matches":[\n            {\n               "matchedFields":[\n                  {\n                     "name":"tags",\n                     "value":"urn:li:tag:Engineering"\n                  }\n               ]\n            }\n         ],\n         "searchResultMetadatas":[\n            {\n               "name":"platform",\n               "aggregations":{\n                  "foo":1\n               }\n            },\n            {\n               "name":"origin",\n               "aggregations":{\n                  "PROD":1\n               }\n            }\n         ]\n      },\n      "from":0,\n      "entities":[\n         "urn:li:dataset:(urn:li:dataPlatform:foo,bar,PROD)"\n      ]\n   }\n}\n')),(0,a.yg)("h6",{id:"filtering"},"Filtering"),(0,a.yg)("p",null,"In addition to performing full-text search, you can also filter explicitly against fields marked as @Searchable in the corresponding aspect PDLs."),(0,a.yg)("p",null,'For example, to perform filtering for a chart with title "Baz Chart 1", you could issue the following query:'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=search\' \\\n--data \'{\n    "input": "looker",\n    "entity": "chart",\n    "start": 0,\n    "count": 10,\n    "filter": {\n        "or": [{\n            "and": [\n               {\n                  "field": "title",\n                  "values": ["Baz Chart 1"],\n                  "condition": "EQUAL"\n               }\n            ]\n        }]\n    }\n}\'\n\n{\n   "value":{\n      "numEntities":1,\n      "pageSize":10,\n      "metadata":{\n         "urns":[\n            "urn:li:chart:(looker,baz1)"\n         ],\n         "matches":[\n            {\n               "matchedFields":[\n                  {\n                     "name":"tool",\n                     "value":"looker"\n                  }\n               ]\n            }\n         ],\n         "searchResultMetadatas":[\n            {\n               "name":"tool",\n               "aggregations":{\n                  "looker":1\n               }\n            }\n         ]\n      },\n      "from":0,\n      "entities":[\n         "urn:li:chart:(looker,baz1)"\n      ]\n   }\n}\n')),(0,a.yg)("p",null,"where valid conditions include - CONTAIN - END_WITH - EQUAL - IEQUAL (Supports case insensitive equals) - GREATER_THAN - GREATER_THAN_OR_EQUAL_TO - LESS_THAN - LESS_THAN_OR_EQUAL_TO - START_WITH"),(0,a.yg)("p",null,"*","Note that the search API only includes data corresponding to the latest snapshots of a particular Entity."),(0,a.yg)("h5",{id:"autocomplete-against-fields-of-an-entity"},"Autocomplete against fields of an entity"),(0,a.yg)("p",null,"To autocomplete a query for a particular entity type, you can use a query of the following form:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=autocomplete\' \\\n--data \'{\n    "query": "<query-text>",\n    "entity": "<entity-name>",\n    "limit": 10\n}\'\n')),(0,a.yg)("p",null,"For example, to autocomplete a query against all Dataset entities, you could issue the following:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=autocomplete\' \\\n--data \'{\n    "query": "Baz Ch",\n    "entity": "chart",\n    "start": 0,\n    "limit": 10\n}\'\n\n{\n   "value":{\n      "suggestions":[\n         "Baz Chart 1"\n      ],\n      "query":"Baz Ch"\n   }\n}\n')),(0,a.yg)("p",null,"Note that you can also provide a ",(0,a.yg)("inlineCode",{parentName:"p"},"Filter")," to the autocomplete endpoint:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/entities?action=autocomplete\' \\\n--data \'{\n    "query": "Baz C",\n    "entity": "chart",\n    "start": 0,\n    "limit": 10,\n    "filter": {\n        "or": [{\n            "and": [\n               {\n                "field": "tool",\n                "values": ["looker"],\n                "condition": "EQUAL"\n               }\n            ]\n        }]\n    }\n}\'\n\n{\n   "value":{\n      "suggestions":[\n         "Baz Chart 1"\n      ],\n      "query":"Baz Ch"\n   }\n}\n')),(0,a.yg)("p",null,"*","Note that the autocomplete API only includes data corresponding to the latest snapshots of a particular Entity."),(0,a.yg)("h5",{id:"get-a-versioned-aspect"},"Get a Versioned Aspect"),(0,a.yg)("p",null,"In addition to fetching the set of latest Snapshot aspects for an entity, we also support doing a point lookup of an entity at a particular version."),(0,a.yg)("p",null,"To do so, you can use the following query template:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"curl 'http://localhost:8080/aspects/<url-encoded-entity-urn>?aspect=<aspect-name>&version=<version>\n")),(0,a.yg)("p",null,"Which will return a VersionedAspect, which is a record containing a version and an aspect inside a Rest.li Union, wherein the fully-qualified record name of the\naspect is the key for the union."),(0,a.yg)("p",null,'For example, to fetch the latest version of a Dataset\'s "schemaMetadata" aspect, you could issue the following query:'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl \'http://localhost:8080/aspects/urn%3Ali%3Adataset%3A(urn%3Ali%3AdataPlatform%3Afoo%2Cbar%2CPROD)?aspect=schemaMetadata&version=0\'\n\n{\n   "version":0,\n   "aspect":{\n      "com.linkedin.schema.SchemaMetadata":{\n         "created":{\n            "actor":"urn:li:corpuser:fbar",\n            "time":0\n         },\n         "platformSchema":{\n            "com.linkedin.schema.KafkaSchema":{\n               "documentSchema":"{\\"type\\":\\"record\\",\\"name\\":\\"MetadataChangeEvent\\",\\"namespace\\":\\"com.linkedin.mxe\\",\\"doc\\":\\"Kafka event for proposing a metadata change for an entity.\\",\\"fields\\":[{\\"name\\":\\"auditHeader\\",\\"type\\":{\\"type\\":\\"record\\",\\"name\\":\\"KafkaAuditHeader\\",\\"namespace\\":\\"com.linkedin.avro2pegasus.events\\",\\"doc\\":\\"Header\\"}}]}"\n            }\n         },\n         "lastModified":{\n            "actor":"urn:li:corpuser:fbar",\n            "time":0\n         },\n         "schemaName":"FooEvent",\n         "fields":[\n            {\n               "fieldPath":"foo",\n               "description":"Bar",\n               "type":{\n                  "type":{\n                     "com.linkedin.schema.StringType":{\n\n                     }\n                  }\n               },\n               "nativeDataType":"string"\n            }\n         ],\n         "version":0,\n         "hash":"",\n         "platform":"urn:li:dataPlatform:foo"\n      }\n   }\n}\n')),(0,a.yg)("p",null,"Keep in mind that versions increase monotonically ",(0,a.yg)("em",{parentName:"p"},"after")," version 0, which represents the latest."),(0,a.yg)("p",null,"Note that this API will soon be deprecated and replaced by the V2 Aspect API, discussed below."),(0,a.yg)("h5",{id:"get-a-range-of-versioned-aspects"},"Get a range of Versioned Aspects"),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Coming Soon"),"!"),(0,a.yg)("h5",{id:"get-a-range-of-timeseries-aspects"},"Get a range of Timeseries Aspects"),(0,a.yg)("p",null,"With the introduction of Timeseries Aspects, we've introduced a new API for fetching a series of aspects falling into a particular time range. For this, you'll\nuse the ",(0,a.yg)("inlineCode",{parentName:"p"},"/aspects"),' endpoint. The V2 APIs are unique in that they return a new type of payload: an "Enveloped Aspect". This is essentially a serialized aspect along with\nsome system metadata. The serialized aspect can be in any form, though we currently default to escaped Rest.li-compatible JSON.'),(0,a.yg)("p",null,"Callers of the V2 Aspect APIs will be expected to deserialize the aspect payload in the way they see fit. For example, they may bind the deserialized JSON object\ninto a strongly typed Rest.li RecordTemplate class (which is what datahub-frontend does). The benefit of doing it this way is thaet we remove the necessity to\nuse Rest.li Unions to represent an object which can take on multiple payload forms. It also makes adding and removing aspects from the model easier, a process\nwhich could theoretically be done at runtime as opposed to at deploy time."),(0,a.yg)("p",null,"To fetch a set of Timeseries Aspects that fall into a particular time range, you can use the following query template:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/aspects?action=getTimeseriesAspectValues\' \\\n--data \'{\n    "urn": "<urn>",\n    "entity": "<entity-name>",\n    "aspect": "<time-series-aspect-name>",\n    "startTimeMillis": "<your-start-time-ms>",\n    "endTimeMillis": "<your-end-time-ms>"\n}\'\n')),(0,a.yg)("p",null,'For example, to fetch "datasetProfile" timeseries aspects for a dataset with urn ',(0,a.yg)("inlineCode",{parentName:"p"},"urn:li:dataset:(urn:li:dataPlatform:foo,barUp,PROD)"),"\nthat were reported after July 26, 2021 and before July 28, 2021, you could issue the following query:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl -X POST \'http://localhost:8080/aspects?action=getTimeseriesAspectValues\' \\\n--data \'{\n    "urn": "urn:li:dataset:(urn:li:dataPlatform:redshift,global_dev.larxynx_carcinoma_data_2020,PROD)",\n    "entity": "dataset",\n    "aspect": "datasetProfile",\n    "startTimeMillis": 1625122800000,\n    "endTimeMillis": 1627455600000\n}\'\n\n{\n   "value":{\n      "limit":2000,\n      "aspectName":"datasetProfile",\n      "endTimeMillis":1627455600000,\n      "startTimeMillis":1625122800000,\n      "entityName":"dataset",\n      "values":[\n         {\n            "aspect":{\n               "value":"{\\"timestampMillis\\":1626912000000,\\"fieldProfiles\\":[{\\"uniqueProportion\\":1.0,\\"sampleValues\\":[\\"123MMKK12\\",\\"13KDFMKML\\",\\"123NNJJJL\\"],\\"fieldPath\\":\\"id\\",\\"nullCount\\":0,\\"nullProportion\\":0.0,\\"uniqueCount\\":3742},{\\"uniqueProportion\\":1.0,\\"min\\":\\"1524406400000\\",\\"max\\":\\"1624406400000\\",\\"sampleValues\\":[\\"1640023230002\\",\\"1640343012207\\",\\"16303412330117\\"],\\"mean\\":\\"1555406400000\\",\\"fieldPath\\":\\"date\\",\\"nullCount\\":0,\\"nullProportion\\":0.0,\\"uniqueCount\\":3742},{\\"uniqueProportion\\":0.037,\\"min\\":\\"21\\",\\"median\\":\\"68\\",\\"max\\":\\"92\\",\\"sampleValues\\":[\\"45\\",\\"65\\",\\"81\\"],\\"mean\\":\\"65\\",\\"distinctValueFrequencies\\":[{\\"value\\":\\"12\\",\\"frequency\\":103},{\\"value\\":\\"54\\",\\"frequency\\":12}],\\"fieldPath\\":\\"patient_age\\",\\"nullCount\\":0,\\"nullProportion\\":0.0,\\"uniqueCount\\":79},{\\"uniqueProportion\\":0.00820873786407767,\\"sampleValues\\":[\\"male\\",\\"female\\"],\\"fieldPath\\":\\"patient_gender\\",\\"nullCount\\":120,\\"nullProportion\\":0.03,\\"uniqueCount\\":2}],\\"rowCount\\":3742,\\"columnCount\\":4}",\n               "contentType":"application/json"\n            }\n         },\n      ]\n   }\n}\n')),(0,a.yg)("p",null,"You'll notice that in this API (V2), we return a generic serialized aspect string as opposed to an inlined Rest.li-serialized Snapshot Model."),(0,a.yg)("p",null,"This is part of an initiative to move from MCE + MAE to MetadataChangeProposal and MetadataChangeLog. For more information, see ",(0,a.yg)("a",{parentName:"p",href:"/docs/advanced/mcp-mcl"},"this doc"),"."),(0,a.yg)("h5",{id:"get-relationships-edges"},"Get Relationships (Edges)"),(0,a.yg)("p",null,"To get relationships between entities, you can use the ",(0,a.yg)("inlineCode",{parentName:"p"},"/relationships")," API. Do do so, you must provide the following inputs:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Urn of the source node"),(0,a.yg)("li",{parentName:"ol"},"Direction of the edge (INCOMING, OUTGOING)"),(0,a.yg)("li",{parentName:"ol"},"The name of the Relationship (This can be found in Aspect PDLs within the @Relationship annotation)")),(0,a.yg)("p",null,"For example, to get all entities owned by ",(0,a.yg)("inlineCode",{parentName:"p"},"urn:li:corpuser:fbar"),", we could issue the following query:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"curl 'http://localhost:8080/relationships?direction=INCOMING&urn=urn%3Ali%3Acorpuser%3Auser1&types=OwnedBy'\n")),(0,a.yg)("p",null,"which will return a list of urns, representing entities on the other side of the relationship:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'{\n   "entities":[\n      urn:li:dataset:(urn:li:dataPlatform:foo,barUp,PROD)\n   ]\n}\n')),(0,a.yg)("h2",{id:"faq"},"FAQ"),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"1. How do I find the valid set of Entity names?")),(0,a.yg)("p",null,'Entities are named inside of PDL schemas. Each entity will be annotated with the @Entity annotation, which will include a "name" field inside.\nThis represents the "common name" for the entity which can be used in browsing, searching, and more. By default, DataHub ships with the following entities:'),(0,a.yg)("p",null,"By convention, all entity PDLs live under ",(0,a.yg)("inlineCode",{parentName:"p"},"metadata-models/src/main/pegasus/com/linkedin/metadata/snapshot")),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"2. How do I find the valid set of Aspect names?")),(0,a.yg)("p",null,'Aspects are named inside of PDL schemas. Each aspect will be annotated with the @Aspect annotation, which will include a "name" field inside.\nThis represents the "common name" for the entity which can be used in browsing, searching, and more.'),(0,a.yg)("p",null,"By convention, all entity PDLs live under ",(0,a.yg)("inlineCode",{parentName:"p"},"metadata-models/src/main/pegasus/com/linkedin/metadata/common")," or ",(0,a.yg)("inlineCode",{parentName:"p"},"metadata-models/src/main/pegasus/com/linkedin/metadata/<entity-name>"),". For example,\nthe dataset-specific aspects are located under ",(0,a.yg)("inlineCode",{parentName:"p"},"metadata-models/src/main/pegasus/com/linkedin/metadata/dataset"),"."),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"3. How do I find the valid set of Relationship names?")),(0,a.yg)("p",null,'All relationships are defined on foreign-key fields inside Aspect PDLs. They are reflected by fields bearing the @Relationship annotation. Inside this annotation\nis a "name" field that defines the standardized name of the Relationship to be used when querying.'),(0,a.yg)("p",null,"By convention, all entity PDLs live under ",(0,a.yg)("inlineCode",{parentName:"p"},"metadata-models/src/main/pegasus/com/linkedin/metadata/common")," or ",(0,a.yg)("inlineCode",{parentName:"p"},"metadata-models/src/main/pegasus/com/linkedin/metadata/<entity-name>"),". For example,\nthe dataset-specific aspects are located under ",(0,a.yg)("inlineCode",{parentName:"p"},"metadata-models/src/main/pegasus/com/linkedin/metadata/dataset"),"."))}h.isMDXComponent=!0}}]);