"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[90506],{7653:(e,t,a)=>{a.d(t,{A:()=>n});const n={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"}},4732:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(89379),r=a(96540),o=a(7653),i=a(89990),l=function(e,t){return r.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:t,icon:o.A}))};const s=r.forwardRef(l)},15680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>y});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},g=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,g=l(e,["components","mdxType","originalType","parentName"]),c=u(a),m=r,y=c["".concat(s,".").concat(m)]||c[m]||p[m]||o;return a?n.createElement(y,i(i({ref:t},g),{},{components:a})):n.createElement(y,i({ref:t},g))}));function y(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},43655:(e,t,a)=>{a.d(t,{A:()=>b});var n=a(96540),r=a(20053);const o="availabilityCard_P5od",i="managedIcon_AxXO",l="platform_wqXv",s="platformAvailable_Y8lN";var u=a(4732),g=a(89379);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var p=a(89990),m=function(e,t){return n.createElement(p.A,(0,g.A)((0,g.A)({},e),{},{ref:t,icon:c}))};const y=n.forwardRef(m);const d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"};var h=function(e,t){return n.createElement(p.A,(0,g.A)((0,g.A)({},e),{},{ref:t,icon:d}))};const N=n.forwardRef(h),b=({saasOnly:e,ossOnly:t})=>n.createElement("div",{className:(0,r.A)(o,"card")},n.createElement("strong",null,"Feature Availability"),n.createElement("div",null,n.createElement("span",{className:(0,r.A)(l,!e&&s)},"Self-Hosted DataHub ",e?n.createElement(u.A,null):n.createElement(y,null))),n.createElement("div",null,n.createElement(N,{className:i}),n.createElement("span",{className:(0,r.A)(l,!t&&s)},"DataHub Cloud ",t?n.createElement(u.A,null):n.createElement(y,null))))},27842:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>d,frontMatter:()=>s,metadata:()=>g,toc:()=>p});a(96540);var n=a(15680),r=a(43655);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={title:"Configuring Remote Executor",description:"Learn how to set up, deploy, and configure Remote Executors in your environment",sidebar_label:"Configuring Remote Executor",slug:"/managed-datahub/operator-guide/setting-up-remote-ingestion-executor",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/operator-guide/setting-up-remote-ingestion-executor.md"},u="Configuring Remote Executor",g={unversionedId:"docs/managed-datahub/operator-guide/setting-up-remote-ingestion-executor",id:"docs/managed-datahub/operator-guide/setting-up-remote-ingestion-executor",title:"Configuring Remote Executor",description:"Learn how to set up, deploy, and configure Remote Executors in your environment",source:"@site/genDocs/docs/managed-datahub/operator-guide/setting-up-remote-ingestion-executor.md",sourceDirName:"docs/managed-datahub/operator-guide",slug:"/managed-datahub/operator-guide/setting-up-remote-ingestion-executor",permalink:"/docs/managed-datahub/operator-guide/setting-up-remote-ingestion-executor",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/operator-guide/setting-up-remote-ingestion-executor.md",tags:[],version:"current",frontMatter:{title:"Configuring Remote Executor",description:"Learn how to set up, deploy, and configure Remote Executors in your environment",sidebar_label:"Configuring Remote Executor",slug:"/managed-datahub/operator-guide/setting-up-remote-ingestion-executor",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/operator-guide/setting-up-remote-ingestion-executor.md"},sidebar:"overviewSidebar",previous:{title:"About Remote Executor",permalink:"/docs/managed-datahub/remote-executor/about"},next:{title:"Monitoring Remote Executor",permalink:"/docs/managed-datahub/remote-executor/monitoring"}},c={},p=[{value:"Overview",id:"overview",level:2},{value:"Understanding Remote Executors and Pools",id:"understanding-remote-executors-and-pools",level:2},{value:"Configuration Prerequisites",id:"configuration-prerequisites",level:2},{value:"Creating and Managing Executor Pools",id:"creating-and-managing-executor-pools",level:2},{value:"Deploying Remote Executors in Your Environment",id:"deploying-remote-executors-in-your-environment",level:2},{value:"Deploy on Amazon ECS",id:"deploy-on-amazon-ecs",level:3},{value:"Update Amazon ECS Deployment",id:"update-amazon-ecs-deployment",level:3},{value:"Deploy on Kubernetes",id:"deploy-on-kubernetes",level:3},{value:"Checking Remote Executor status",id:"checking-remote-executor-status",level:2},{value:"Assigning Ingestion Sources to an Executor Pool",id:"assigning-ingestion-sources-to-an-executor-pool",level:2},{value:"Advanced: Performance Settings and Task Weight-Based Queuing",id:"advanced-performance-settings-and-task-weight-based-queuing",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Frequently Asked Questions",id:"frequently-asked-questions",level:3}],m={toc:p},y="wrapper";function d(e){var{components:t}=e,a=l(e,["components"]);return(0,n.yg)(y,i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){o(e,t,a[t])}))}return e}({},m,a),{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"configuring-remote-executor"},"Configuring Remote Executor"),(0,n.yg)(r.A,{saasOnly:!0,mdxType:"FeatureAvailability"}),(0,n.yg)("h2",{id:"overview"},"Overview"),(0,n.yg)("p",null,"This guide will walk you through the process of setting up Remote Executors in your environment, including:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Understanding Remote Executors and Pools"),(0,n.yg)("li",{parentName:"ol"},"Configuration prerequisites"),(0,n.yg)("li",{parentName:"ol"},"Creating and managing Executor Pools"),(0,n.yg)("li",{parentName:"ol"},"Deploying Remote Executors in your environment"),(0,n.yg)("li",{parentName:"ol"},"Assigning Ingestion Sources to Pools")),(0,n.yg)("h2",{id:"understanding-remote-executors-and-pools"},"Understanding Remote Executors and Pools"),(0,n.yg)("p",null,"A Remote Executor Pool provides a way to organize and manage your Remote Executors in DataHub. Here's how they work:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"A ",(0,n.yg)("strong",{parentName:"li"},"Remote Executor Pool")," (or ",(0,n.yg)("strong",{parentName:"li"},"Pool"),") is a logical grouping of one or more Remote Executors"),(0,n.yg)("li",{parentName:"ul"},"Each ",(0,n.yg)("strong",{parentName:"li"},"Remote Executor")," in a Pool automatically reports its status and health"),(0,n.yg)("li",{parentName:"ul"},"Each ",(0,n.yg)("strong",{parentName:"li"},"Ingestion Source")," can be assigned to a specific Pool"),(0,n.yg)("li",{parentName:"ul"},"One Pool can be designated as the ",(0,n.yg)("strong",{parentName:"li"},"Default Pool")," for new Ingestion Sources"),(0,n.yg)("li",{parentName:"ul"},"Multiple Pools can be created for different purposes (e.g., by region, department, or workload type)")),(0,n.yg)("h2",{id:"configuration-prerequisites"},"Configuration Prerequisites"),(0,n.yg)("p",null,"Before deploying a Remote Executor, ensure you have the following:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"DataHub Cloud")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"A DataHub User with the ",(0,n.yg)("strong",{parentName:"li"},"Manage Metadata Ingestion")," Platform privilege"),(0,n.yg)("li",{parentName:"ul"},"A DataHub Remote Executor Access Token (generate from ",(0,n.yg)("strong",{parentName:"li"},"Settings > Access Tokens > Generate new token > Remote Executor"),")"),(0,n.yg)("li",{parentName:"ul"},"Your DataHub Cloud URL (e.g., ",(0,n.yg)("inlineCode",{parentName:"li"},"<your-company>.acryl.io/gms"),"). ",(0,n.yg)("strong",{parentName:"li"},"NOTE:")," you MUST include the trailing ",(0,n.yg)("inlineCode",{parentName:"li"},"/gms")," when configuring the executor."))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Deployment Environment")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Access to your deployment platform (AWS ECS or Kubernetes)"),(0,n.yg)("li",{parentName:"ul"},"Necessary permissions to create resources"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Network Connectivity")),(0,n.yg)("p",{parentName:"li"},"The Remote Executor requires ",(0,n.yg)("strong",{parentName:"p"},"outbound")," HTTPS (port 443) connectivity only \u2014 no inbound connectivity is needed. Ensure the following endpoints are reachable from your deployment environment:"),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"https://<your-company>.acryl.io/*")," \u2014 DataHub GMS API"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"https://sqs.*.amazonaws.com/*")," \u2014 AWS SQS, used for remote execution task dispatch"),(0,n.yg)("li",{parentName:"ul"},"A Python package index (e.g., ",(0,n.yg)("inlineCode",{parentName:"li"},"https://pypi.org"),") or an alternate internal mirror, to download pip packages required by ingestion sources"),(0,n.yg)("li",{parentName:"ul"},"A container registry hosting the DataHub Remote Executor image (e.g., AWS ECR or ",(0,n.yg)("inlineCode",{parentName:"li"},"docker.datahub.com"),")"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Registry Access")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"For AWS: Provide your AWS account ID to DataHub Cloud"),(0,n.yg)("li",{parentName:"ul"},"For Kubernetes: Work with DataHub team to set up access to the Remote Executor Docker Image Registry")))),(0,n.yg)("h2",{id:"creating-and-managing-executor-pools"},"Creating and Managing Executor Pools"),(0,n.yg)("p",null,"Complete the following steps to create a new Executor Pool from the DataHub Cloud UI:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Navigate to the ",(0,n.yg)("strong",{parentName:"li"},"Data Sources")," section on the left sidebar"),(0,n.yg)("li",{parentName:"ol"},"Click the ",(0,n.yg)("strong",{parentName:"li"},"Executors")," tab and click ",(0,n.yg)("strong",{parentName:"li"},"Create"))),(0,n.yg)("p",{align:"center"},(0,n.yg)("img",{width:"90%",src:"https://github.com/datahub-project/static-assets/blob/main/imgs/remote-executor/pool-list-before.png?raw=true"})),(0,n.yg)("ol",{start:3},(0,n.yg)("li",{parentName:"ol"},"Configure Pool settings:",(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Pool Identifier"),": A unique identifier for this Pool"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Description"),": Purpose or details about the Pool"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Default Pool"),": Optionally set as the Default Pool for new Ingestion Sources")))),(0,n.yg)("p",{align:"center"},(0,n.yg)("img",{width:"85%",src:"https://github.com/datahub-project/static-assets/blob/main/imgs/remote-executor/configure-pool-modal.png?raw=true"})),(0,n.yg)("ol",{start:4},(0,n.yg)("li",{parentName:"ol"},"Click ",(0,n.yg)("strong",{parentName:"li"},"Create")," to provision the Pool")),(0,n.yg)("h2",{id:"deploying-remote-executors-in-your-environment"},"Deploying Remote Executors in Your Environment"),(0,n.yg)("p",null,"Once you have created an Executor Pool in DataHub Cloud, you are now ready to deploy an Executor within your environment."),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"Work with DataHub team to receive deployment templates specific to your environment (Helm charts, CloudFormation, or Terraform) for deploying Remote Executors in this Pool.")),(0,n.yg)("h3",{id:"deploy-on-amazon-ecs"},"Deploy on Amazon ECS"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"AWS Account Configuration"))),(0,n.yg)("p",null,"To access the private DataHub Cloud ECR registry, you'll need to provide your AWS account ID to DataHub Cloud. You can securely share your account ID through:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Your DataHub Cloud representative"),(0,n.yg)("li",{parentName:"ul"},"A secure secret-sharing service like ",(0,n.yg)("a",{parentName:"li",href:"https://onetimesecret.com/"},"One Time Secret"))),(0,n.yg)("p",null,"This step is required to grant your AWS account access to pull the Remote Executor container image."),(0,n.yg)("ol",{start:2},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Configure CloudFormation Template"))),(0,n.yg)("p",null,"The DataHub Team will provide a ",(0,n.yg)("a",{parentName:"p",href:"https://raw.githubusercontent.com/acryldata/datahub-cloudformation/master/remote-executor/datahub-executor.ecs.template.yaml"},"Cloudformation Template")," that you can run to provision an ECS cluster with a single remote ingestion task. It will also provision an AWS role for the task which grants the permissions necessary to read and delete from the private queue created for you, along with reading the secrets you've specified. At minimum, the template requires the following parameters:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Deployment Location (VPC and subnet)"),(0,n.yg)("li",{parentName:"ul"},"DataHub Personal Access Token"),(0,n.yg)("li",{parentName:"ul"},"DataHub Cloud URL (e.g., ",(0,n.yg)("inlineCode",{parentName:"li"},"<your-company>.acryl.io/gms"),")"),(0,n.yg)("li",{parentName:"ul"},"Executor Pool ID you set in the Datahub UI"),(0,n.yg)("li",{parentName:"ul"},"Optional: DataHub Cloud Remote Executor Version; defaults to latest")),(0,n.yg)("p",null,"Optional parameters:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Source Secrets: ",(0,n.yg)("inlineCode",{parentName:"li"},"SECRET_NAME=SECRET_ARN")," (up to 10); separate multiple secrets by comma, e.g. ",(0,n.yg)("inlineCode",{parentName:"li"},"SECRET_NAME_1=SECRET_ARN_1,SECRET_NAME_2,SECRET_ARN_2"),"."),(0,n.yg)("li",{parentName:"ul"},"Environment Variables: ",(0,n.yg)("inlineCode",{parentName:"li"},"ENV_VAR_NAME=ENV_VAR_VALUE")," (up to 10); separate multiple variable by comma, e.g. ",(0,n.yg)("inlineCode",{parentName:"li"},"ENV_VAR_NAME_1=ENV_VAR_VALUE_1,ENV_VAR_NAME_2,ENV_VAR_VALUE_2"),".")),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"Configuring Secrets enables you to manage ingestion sources from the DataHub UI without storing credentials inside DataHub. Once defined, secrets can be referenced by name inside of your DataHub Ingestion Source configurations using the usual convention: ",(0,n.yg)("inlineCode",{parentName:"p"},"${SECRET_NAME}"),".")),(0,n.yg)("ol",{start:3},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Deploy Stack")),(0,n.yg)("pre",{parentName:"li"},(0,n.yg)("code",{parentName:"pre",className:"language-bash"},'\n# Using AWS CLI\n\n aws --region us-east-1 cloudformation create-stack \\\n   --stack-name datahub-remote-executor \\\n   --template-body file://datahub-executor.ecs.template.yaml \\\n   --capabilities CAPABILITY_AUTO_EXPAND CAPABILITY_NAMED_IAM \\\n   --parameters ParameterKey=ExecutorPoolId,ParameterValue="remote" \\\n   ParameterKey=VPCID,ParameterValue="<your-vpc>" \\\n   ParameterKey=SubnetID,ParameterValue="<your-subnet>" \\\n   ParameterKey=DataHubBaseUrl,ParameterValue="https://<your-company>.acryl.io/gms" \\\n   ParameterKey=DataHubAccessToken,ParameterValue="<your-remote-executor-access-token>"\n')),(0,n.yg)("p",{parentName:"li"},"Or use the ",(0,n.yg)("a",{parentName:"p",href:"https://console.aws.amazon.com/cloudformation"},"CloudFormation Console"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Configure Secrets (Optional)")),(0,n.yg)("pre",{parentName:"li"},(0,n.yg)("code",{parentName:"pre",className:"language-bash"},'\n# Create a secret in AWS Secrets Manager\n\naws secretsmanager create-secret \\\n  --name my-source-secret \\\n  --secret-string \'{"username":"user","password":"pass"}\'\n')))),(0,n.yg)("h3",{id:"update-amazon-ecs-deployment"},"Update Amazon ECS Deployment"),(0,n.yg)("p",null,"To update your Remote Executor deployment (e.g., to deploy a new container version or modify configuration), you'll need to update your existing CloudFormation Stack. This process involves re-deploying the CloudFormation template with your updated parameters while preserving your existing resources."),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Access CloudFormation")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Navigate to the AWS CloudFormation Console"),(0,n.yg)("li",{parentName:"ul"},"Locate and select your Remote Executor stack"),(0,n.yg)("li",{parentName:"ul"},"Click the ",(0,n.yg)("strong",{parentName:"li"},"Update")," button"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Update Template")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Select ",(0,n.yg)("strong",{parentName:"li"},"Replace current template")),(0,n.yg)("li",{parentName:"ul"},"Choose ",(0,n.yg)("strong",{parentName:"li"},"Upload a template file")),(0,n.yg)("li",{parentName:"ul"},"Download the latest DataHub Cloud Remote Executor ",(0,n.yg)("a",{parentName:"li",href:"https://raw.githubusercontent.com/acryldata/datahub-cloudformation/master/remote-executor/datahub-executor.ecs.template.yaml"},"CloudFormation Template")),(0,n.yg)("li",{parentName:"ul"},"Upload the template file")))),(0,n.yg)("p",{align:"center"},(0,n.yg)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/saas/Screen-Shot-2023-01-19-at-4.23.32-PM.png"})),(0,n.yg)("ol",{start:3},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Configure Parameters")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Review and update parameters as needed:",(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"ImageTag"),": Specify a new version if upgrading"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"DatahubGmsURL"),": Verify your DataHub URL is correct"),(0,n.yg)("li",{parentName:"ul"},"Other parameters will retain their previous values unless changed"))),(0,n.yg)("li",{parentName:"ul"},"Click ",(0,n.yg)("strong",{parentName:"li"},"Next")," to proceed"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Review and Deploy")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Review the configuration changes"),(0,n.yg)("li",{parentName:"ul"},"Acknowledge any capabilities if prompted"),(0,n.yg)("li",{parentName:"ul"},"Click ",(0,n.yg)("strong",{parentName:"li"},"Update stack")," to begin the update process")))),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"The update process will maintain your existing resources (e.g., secrets, IAM roles) while deploying the new configuration. Monitor the stack events to track the update progress.")),(0,n.yg)("h3",{id:"deploy-on-kubernetes"},"Deploy on Kubernetes"),(0,n.yg)("p",null,"The ",(0,n.yg)("a",{parentName:"p",href:"https://executor-helm.acryl.io/index.yaml"},"datahub-executor-worker")," Helm chart provides a streamlined way to deploy Remote Executors on any Kubernetes cluster, including Amazon EKS and Google GKE."),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Registry Access Configuration"))),(0,n.yg)("p",null,"To access the private DataHub Cloud container registry, you'll need to work with your DataHub Cloud representative to set up the necessary permissions:"),(0,n.yg)("p",null,"For AWS EKS: Provide the IAM principal that will pull from the ECR repository"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"For Google Cloud: Provide the cluster's IAM service account"),(0,n.yg)("li",{parentName:"ul"},"For other platforms: Contact DataHub team for specific requirements")),(0,n.yg)("ol",{start:2},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Configure Secrets"))),(0,n.yg)("p",null,"Create the required secrets in your Kubernetes cluster:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"# Create DataHub PAT secret (required)\n# Generate token from Settings > Access Tokens in DataHub UI\nkubectl create secret generic datahub-access-token-secret \\\n  --from-literal=datahub-access-token-secret-key=<DATAHUB-ACCESS-TOKEN>\n\n# Create source credentials (optional)\nkubectl create secret generic datahub-secret-store \\\n  --from-literal=REDSHIFT_PASSWORD=password \\\n  --from-literal=SNOWFLAKE_PASSWORD=password\n")),(0,n.yg)("ol",{start:3},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Install Helm Chart"))),(0,n.yg)("p",null,"Add the DataHub Cloud Helm repository and install the chart:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},'# Add Helm repository\nhelm repo add acryl https://executor-helm.acryl.io\nhelm repo update\n\n# Install the chart\nhelm install \\\n  --set global.datahub.executor.pool_id="remote" \\\n  --set global.datahub.gms.url="https://<your-company>.acryl.io/gms" \\\n  acryl-executor-worker acryl/datahub-executor-worker\n')),(0,n.yg)("p",null,"Required parameters:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"global.datahub.executor.pool_id"),": Your Executor Pool ID"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"global.datahub.gms.url"),": Your DataHub Cloud URL (must include ",(0,n.yg)("inlineCode",{parentName:"li"},"/gms"),")"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"image.tag"),": DataHub Cloud Remote Executor version")),(0,n.yg)("ol",{start:4},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Configure Secret Mounting (Optional)"))),(0,n.yg)("p",null,"Starting from DataHub Cloud v0.3.8.2, you can manage secrets using Kubernetes Secret CRDs. This enables runtime secret updates without executor restarts."),(0,n.yg)("p",null,"Create a Kubernetes secret:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-yaml"},"# secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: datahub-secret-store\ndata:\n  REDSHIFT_PASSWORD: <base64-encoded-password>\n  SNOWFLAKE_PASSWORD: <base64-encoded-password>\n")),(0,n.yg)("p",null,"Mount the secret in your ",(0,n.yg)("inlineCode",{parentName:"p"},"values.yaml"),":"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-yaml"},"extraVolumes:\n  - name: datahub-secret-store\n    secret:\n      secretName: datahub-secret-store\nextraVolumeMounts:\n  - mountPath: /mnt/secrets\n    name: datahub-secret-store\n")),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"Secret Configuration:"),(0,n.yg)("ul",{parentName:"admonition"},(0,n.yg)("li",{parentName:"ul"},"Default mount path: ",(0,n.yg)("inlineCode",{parentName:"li"},"/mnt/secrets")," (override with ",(0,n.yg)("inlineCode",{parentName:"li"},"DATAHUB_EXECUTOR_FILE_SECRET_BASEDIR"),")"),(0,n.yg)("li",{parentName:"ul"},"Default file size limit: 1MB (override with ",(0,n.yg)("inlineCode",{parentName:"li"},"DATAHUB_EXECUTOR_FILE_SECRET_MAXLEN"),")"),(0,n.yg)("li",{parentName:"ul"},"Reference secrets in ingestion recipes using ",(0,n.yg)("inlineCode",{parentName:"li"},"${SECRET_NAME}")," syntax"))),(0,n.yg)("p",null,"Example ingestion recipe using mounted secrets:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: redshift\n  config:\n    host_port: "<redshift-host:port>"\n    username: connector_test\n    password: "${REDSHIFT_PASSWORD}"\n    # ... other configuration ...\n')),(0,n.yg)("p",null,"For additional configuration options, refer to the ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/acryldata/datahub-executor-helm/blob/main/charts/datahub-executor-worker/values.yaml"},"values.yaml")," file in the Helm chart repository."),(0,n.yg)("h2",{id:"checking-remote-executor-status"},"Checking Remote Executor status"),(0,n.yg)("p",null,"Once you have successfully deployed the Executor in your environment, DataHub will automatically begin reporting Executor Status in the UI:"),(0,n.yg)("p",{align:"center"},(0,n.yg)("img",{width:"90%",src:"https://github.com/datahub-project/static-assets/blob/main/imgs/remote-executor/pool-list-after.png?raw=true"})),(0,n.yg)("h2",{id:"assigning-ingestion-sources-to-an-executor-pool"},"Assigning Ingestion Sources to an Executor Pool"),(0,n.yg)("p",null,"After you have created an Executor Pool and deployed the Executor within your environment, you are now ready to configure an Ingestion Source to run in that Pool."),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Navigate to ",(0,n.yg)("strong",{parentName:"li"},"Manage Data Sources")," in DataHub Cloud"),(0,n.yg)("li",{parentName:"ol"},"Edit an existing Source or click ",(0,n.yg)("strong",{parentName:"li"},"Create new source")),(0,n.yg)("li",{parentName:"ol"},"In the ",(0,n.yg)("strong",{parentName:"li"},"Finish Up")," step, expand the ",(0,n.yg)("strong",{parentName:"li"},"Advanced")," to select your desired ",(0,n.yg)("strong",{parentName:"li"},"Executor Pool"))),(0,n.yg)("p",{align:"center"},(0,n.yg)("img",{width:"80%",src:"https://github.com/datahub-project/static-assets/blob/main/imgs/remote-executor/ingestion-select-executor-pool.png?raw=true"})),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"New Ingestion Sources will automatically use your designated Default Pool if you have assigned one. You can override this assignment when creating or editing an Ingestion Source at any time.")),(0,n.yg)("ol",{start:5},(0,n.yg)("li",{parentName:"ol"},"Click ",(0,n.yg)("strong",{parentName:"li"},"Save & Run"),". The task should show as 'Running' if properly configured.")),(0,n.yg)("p",{align:"center"},(0,n.yg)("img",{width:"90%",src:"https://github.com/datahub-project/static-assets/blob/main/imgs/remote-executor/view-ingestion-running.png?raw=true"})),(0,n.yg)("h2",{id:"advanced-performance-settings-and-task-weight-based-queuing"},"Advanced: Performance Settings and Task Weight-Based Queuing"),(0,n.yg)("p",null,"Executors use a weight-based queuing system to manage resource allocation efficiently:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Default Behavior"),": With 4 ingestion threads (default), each task gets a weight of 0.25, allowing up to 4 parallel tasks"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Resource-Intensive Tasks"),": Tasks can be assigned a higher weight (up to 1.0) to limit parallelism"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Queue Management"),": If the total weight of running tasks exceeds 1.0, new tasks are queued until capacity becomes available"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Priority Tasks"),": Setting a weight of 1.0 ensures exclusive resource access - the task will run alone until completion")),(0,n.yg)("p",null,"The following environment variables can be configured to manage memory-intensive ingestion tasks, prevent resource contention, and ensure stable execution of resource-demanding processes:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"DATAHUB_EXECUTOR_INGESTION_MAX_WORKERS")," (default: 4) - Maximum concurrent Ingestion tasks"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"DATAHUB_EXECUTOR_MONITORS_MAX_WORKERS")," (default: 10) - Maximum concurrent Observe monitoring tasks"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"EXECUTOR_TASK_MEMORY_LIMIT")," - Memory limit per task in kilobytes, configured per Ingestion Source under ",(0,n.yg)("strong",{parentName:"li"},"Extra Environment Variables"),". This setting helps prevent the executor's master process from being OOM-killed and protects against memory-leaking ingestion tasks. Example configuration:",(0,n.yg)("pre",{parentName:"li"},(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{ "EXECUTOR_TASK_MEMORY_LIMIT": "128000000" }\n'))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"EXECUTOR_TASK_WEIGHT")," - Task weight for resource allocation, configured per Ingestion Source under ",(0,n.yg)("strong",{parentName:"li"},"Extra Environment Variables"),". By default, each task is assigned a weight of 1/MAX_THREADS (e.g., 0.25 with 4 threads). The total weight of concurrent tasks cannot exceed 1.0. Example configuration for a resource-intensive task:",(0,n.yg)("pre",{parentName:"li"},(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{ "EXECUTOR_TASK_WEIGHT": "1.0" }\n')))),(0,n.yg)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,n.yg)("h3",{id:"common-issues"},"Common Issues"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Connection Failed")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Verify network connectivity"),(0,n.yg)("li",{parentName:"ul"},"Check DataHub URL configuration"),(0,n.yg)("li",{parentName:"ul"},"Validate Executor Pool ID"),(0,n.yg)("li",{parentName:"ul"},"Validate access token"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Secret Access Failed")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Confirm secret ARNs/names"),(0,n.yg)("li",{parentName:"ul"},"Check permissions"),(0,n.yg)("li",{parentName:"ul"},"Verify secret format"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Container Failed to Start")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Check resource limits"),(0,n.yg)("li",{parentName:"ul"},"Verify registry access"),(0,n.yg)("li",{parentName:"ul"},"Review container logs")))),(0,n.yg)("h3",{id:"frequently-asked-questions"},"Frequently Asked Questions"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Do AWS Secrets Manager secrets automatically update in the executor?")),(0,n.yg)("p",null,"No. Secrets are wired into the executor container at deployment time. The ECS Task needs to be restarted when secrets change."),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"How can I verify successful deployment?")),(0,n.yg)("p",null,"For ECS deployments, check AWS Console:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Navigate to ",(0,n.yg)("strong",{parentName:"li"},"ECS > Cluster > Stack Name > Services > Logs")),(0,n.yg)("li",{parentName:"ol"},"Look for the log line: ",(0,n.yg)("inlineCode",{parentName:"li"},"Starting datahub executor worker"))),(0,n.yg)("p",null,"This indicates successful connection to DataHub Cloud."))}d.isMDXComponent=!0}}]);