"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[93536],{15680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>c});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),p=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},g=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,c=m["".concat(o,".").concat(d)]||m[d]||u[d]||i;return a?n.createElement(c,l(l({ref:t},g),{},{components:a})):n.createElement(c,l({ref:t},g))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[m]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},14131:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>g,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>p,toc:()=>m});a(96540);var n=a(15680);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={title:"Migration Guide: V1 to V2",slug:"/metadata-integration/java/docs/sdk-v2/migration-from-v1",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/metadata-integration/java/docs/sdk-v2/migration-from-v1.md"},o="Migration Guide: V1 to V2",p={unversionedId:"metadata-integration/java/docs/sdk-v2/migration-from-v1",id:"metadata-integration/java/docs/sdk-v2/migration-from-v1",title:"Migration Guide: V1 to V2",description:"This guide helps you migrate from Java SDK V1 (RestEmitter) to V2 (DataHubClientV2). We'll show side-by-side examples and highlight key differences.",source:"@site/genDocs/metadata-integration/java/docs/sdk-v2/migration-from-v1.md",sourceDirName:"metadata-integration/java/docs/sdk-v2",slug:"/metadata-integration/java/docs/sdk-v2/migration-from-v1",permalink:"/docs/metadata-integration/java/docs/sdk-v2/migration-from-v1",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/metadata-integration/java/docs/sdk-v2/migration-from-v1.md",tags:[],version:"current",frontMatter:{title:"Migration Guide: V1 to V2",slug:"/metadata-integration/java/docs/sdk-v2/migration-from-v1",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/metadata-integration/java/docs/sdk-v2/migration-from-v1.md"},sidebar:"overviewSidebar",previous:{title:"Patch Operations Guide",permalink:"/docs/metadata-integration/java/docs/sdk-v2/patch-operations"},next:{title:"Design Principles of Java SDK V2",permalink:"/docs/metadata-integration/java/docs/sdk-v2/design-principles"}},g={},m=[{value:"Why Migrate?",id:"why-migrate",level:2},{value:"Key Differences",id:"key-differences",level:2},{value:"Migration Examples",id:"migration-examples",level:2},{value:"Example 1: Creating a Dataset",id:"example-1-creating-a-dataset",level:3},{value:"Example 2: Adding Tags",id:"example-2-adding-tags",level:3},{value:"Example 3: Adding Owners",id:"example-3-adding-owners",level:3},{value:"Example 4: Multiple Metadata Additions",id:"example-4-multiple-metadata-additions",level:3},{value:"Example 5: Updating Existing Entity",id:"example-5-updating-existing-entity",level:3},{value:"Migration Checklist",id:"migration-checklist",level:2},{value:"1. Update Dependencies",id:"1-update-dependencies",level:3},{value:"2. Change Imports",id:"2-change-imports",level:3},{value:"3. Replace RestEmitter with DataHubClientV2",id:"3-replace-restemitter-with-datahubclientv2",level:3},{value:"4. Use Entity Builders",id:"4-use-entity-builders",level:3},{value:"5. Use Patch Operations for Updates",id:"5-use-patch-operations-for-updates",level:3},{value:"Gradual Migration Strategy",id:"gradual-migration-strategy",level:2},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"1. Forgetting to Call <code>update()</code> or <code>upsert()</code>",id:"1-forgetting-to-call-update-or-upsert",level:3},{value:"2. Using V1 Pattern with V2 Entities",id:"2-using-v1-pattern-with-v2-entities",level:3},{value:"3. Mixing Operation Modes",id:"3-mixing-operation-modes",level:3},{value:"Benefits After Migration",id:"benefits-after-migration",level:2},{value:"Need Help?",id:"need-help",level:2},{value:"Still Using V1 Features?",id:"still-using-v1-features",level:2}],u={toc:m},d="wrapper";function c(e){var{components:t}=e,a=l(e,["components"]);return(0,n.yg)(d,i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){r(e,t,a[t])}))}return e}({},u,a),{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"migration-guide-v1-to-v2"},"Migration Guide: V1 to V2"),(0,n.yg)("p",null,"This guide helps you migrate from Java SDK V1 (RestEmitter) to V2 (DataHubClientV2). We'll show side-by-side examples and highlight key differences."),(0,n.yg)("h2",{id:"why-migrate"},"Why Migrate?"),(0,n.yg)("p",null,"V2 offers significant improvements over V1:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"\u2705 ",(0,n.yg)("strong",{parentName:"li"},"Type-safe entity builders")," instead of manual MCP construction"),(0,n.yg)("li",{parentName:"ul"},"\u2705 ",(0,n.yg)("strong",{parentName:"li"},"Automatic URN generation")," instead of string manipulation"),(0,n.yg)("li",{parentName:"ul"},"\u2705 ",(0,n.yg)("strong",{parentName:"li"},"Patch-based updates")," for efficient incremental changes"),(0,n.yg)("li",{parentName:"ul"},"\u2705 ",(0,n.yg)("strong",{parentName:"li"},"Fluent API")," with method chaining"),(0,n.yg)("li",{parentName:"ul"},"\u2705 ",(0,n.yg)("strong",{parentName:"li"},"Lazy loading")," with caching"),(0,n.yg)("li",{parentName:"ul"},"\u2705 ",(0,n.yg)("strong",{parentName:"li"},"Mode-aware operations")," (SDK vs INGESTION)")),(0,n.yg)("h2",{id:"key-differences"},"Key Differences"),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},"Aspect"),(0,n.yg)("th",{parentName:"tr",align:null},"V1 (RestEmitter)"),(0,n.yg)("th",{parentName:"tr",align:null},"V2 (DataHubClientV2)"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"Abstraction")),(0,n.yg)("td",{parentName:"tr",align:null},"Low-level MCPs"),(0,n.yg)("td",{parentName:"tr",align:null},"High-level entities")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"URN Construction")),(0,n.yg)("td",{parentName:"tr",align:null},"Manual strings"),(0,n.yg)("td",{parentName:"tr",align:null},"Automatic from builder")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"Updates")),(0,n.yg)("td",{parentName:"tr",align:null},"Full aspect replacement"),(0,n.yg)("td",{parentName:"tr",align:null},"Patch-based incremental")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"Type Safety")),(0,n.yg)("td",{parentName:"tr",align:null},"Minimal"),(0,n.yg)("td",{parentName:"tr",align:null},"Strong compile-time checking")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"API Style")),(0,n.yg)("td",{parentName:"tr",align:null},"Imperative emission"),(0,n.yg)("td",{parentName:"tr",align:null},"Fluent builders")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"Entity Support")),(0,n.yg)("td",{parentName:"tr",align:null},"Generic MCPs"),(0,n.yg)("td",{parentName:"tr",align:null},"Dataset, Chart, Dashboard")))),(0,n.yg)("h2",{id:"migration-examples"},"Migration Examples"),(0,n.yg)("h3",{id:"example-1-creating-a-dataset"},"Example 1: Creating a Dataset"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V1 (RestEmitter):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'import datahub.client.rest.RestEmitter;\nimport datahub.event.MetadataChangeProposalWrapper;\nimport com.linkedin.dataset.DatasetProperties;\nimport com.linkedin.common.urn.DatasetUrn;\n\n// Manual URN construction\nDatasetUrn urn = new DatasetUrn(\n    new DataPlatformUrn("snowflake"),\n    "my_database.my_schema.my_table",\n    FabricType.PROD\n);\n\n// Manual aspect construction\nDatasetProperties props = new DatasetProperties();\nprops.setDescription("My dataset description");\nprops.setName("My Dataset");\n\n// Manual MCP construction\nMetadataChangeProposalWrapper mcp = MetadataChangeProposalWrapper.builder()\n    .entityType("dataset")\n    .entityUrn(urn)\n    .upsert()\n    .aspect(props)\n    .build();\n\n// Create emitter\nRestEmitter emitter = RestEmitter.create(b -> b.server("http://localhost:8080"));\n\n// Emit\nemitter.emit(mcp, null).get();\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V2 (DataHubClientV2):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'import datahub.client.v2.DataHubClientV2;\nimport datahub.client.v2.entity.Dataset;\n\n// Fluent builder\nDataset dataset = Dataset.builder()\n    .platform("snowflake")\n    .name("my_database.my_schema.my_table")\n    .env("PROD")\n    .description("My dataset description")\n    .displayName("My Dataset")\n    .build();\n\n// Create client\nDataHubClientV2 client = DataHubClientV2.builder()\n    .server("http://localhost:8080")\n    .build();\n\n// Upsert (URN auto-generated, aspect auto-wired)\nclient.entities().upsert(dataset);\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Changes:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"\u274c No manual URN construction"),(0,n.yg)("li",{parentName:"ul"},"\u274c No manual aspect creation"),(0,n.yg)("li",{parentName:"ul"},"\u274c No MCP wrapper construction"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Fluent builder handles everything"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Type-safe method calls"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Automatic aspect wiring")),(0,n.yg)("h3",{id:"example-2-adding-tags"},"Example 2: Adding Tags"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V1 (RestEmitter):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'import com.linkedin.common.GlobalTags;\nimport com.linkedin.common.TagAssociation;\nimport com.linkedin.common.TagAssociationArray;\nimport com.linkedin.common.urn.TagUrn;\n\n// Fetch existing tags or create new\nGlobalTags tags = fetchExistingTags(urn);  // You implement this\nif (tags == null) {\n    tags = new GlobalTags();\n    tags.setTags(new TagAssociationArray());\n}\n\n// Add new tag\nTagAssociation newTag = new TagAssociation();\nnewTag.setTag(new TagUrn("pii"));\ntags.getTags().add(newTag);\n\n// Create MCP to replace entire GlobalTags aspect\nMetadataChangeProposalWrapper mcp = MetadataChangeProposalWrapper.builder()\n    .entityType("dataset")\n    .entityUrn(urn)\n    .upsert()\n    .aspect(tags)\n    .build();\n\nemitter.emit(mcp, null).get();\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V2 (DataHubClientV2):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'// Just add the tag - patch handles everything\ndataset.addTag("pii");\nclient.entities().update(dataset);\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Changes:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"\u274c No fetching existing tags"),(0,n.yg)("li",{parentName:"ul"},"\u274c No manual aspect manipulation"),(0,n.yg)("li",{parentName:"ul"},"\u274c No MCP construction"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Single method call"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Patch-based (doesn't overwrite other tags)"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Automatic URN handling")),(0,n.yg)("h3",{id:"example-3-adding-owners"},"Example 3: Adding Owners"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V1 (RestEmitter):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'import com.linkedin.common.Ownership;\nimport com.linkedin.common.Owner;\nimport com.linkedin.common.OwnerArray;\nimport com.linkedin.common.OwnershipType;\nimport com.linkedin.common.urn.Urn;\n\n// Fetch existing owners or create new\nOwnership ownership = fetchExistingOwnership(urn);\nif (ownership == null) {\n    ownership = new Ownership();\n    ownership.setOwners(new OwnerArray());\n}\n\n// Add new owner\nOwner newOwner = new Owner();\nnewOwner.setOwner(Urn.createFromString("urn:li:corpuser:john_doe"));\nnewOwner.setType(OwnershipType.TECHNICAL_OWNER);\nownership.getOwners().add(newOwner);\n\n// Create MCP\nMetadataChangeProposalWrapper mcp = MetadataChangeProposalWrapper.builder()\n    .entityType("dataset")\n    .entityUrn(urn)\n    .upsert()\n    .aspect(ownership)\n    .build();\n\nemitter.emit(mcp, null).get();\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V2 (DataHubClientV2):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'dataset.addOwner("urn:li:corpuser:john_doe", OwnershipType.TECHNICAL_OWNER);\nclient.entities().update(dataset);\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Changes:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"\u274c No fetching existing owners"),(0,n.yg)("li",{parentName:"ul"},"\u274c No manual Owner object creation"),(0,n.yg)("li",{parentName:"ul"},"\u274c No array manipulation"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Single method with parameters"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Type-safe ownership type enum"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Automatic patch creation")),(0,n.yg)("h3",{id:"example-4-multiple-metadata-additions"},"Example 4: Multiple Metadata Additions"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V1 (RestEmitter):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'// Create dataset properties\nDatasetProperties props = new DatasetProperties();\nprops.setDescription("My description");\n\n// Create tags\nGlobalTags tags = new GlobalTags();\nTagAssociationArray tagArray = new TagAssociationArray();\ntagArray.add(createTagAssociation("pii"));\ntagArray.add(createTagAssociation("sensitive"));\ntags.setTags(tagArray);\n\n// Create ownership\nOwnership ownership = new Ownership();\nOwnerArray ownerArray = new OwnerArray();\nownerArray.add(createOwner("urn:li:corpuser:john", OwnershipType.TECHNICAL_OWNER));\nownership.setOwners(ownerArray);\n\n// Create 3 separate MCPs and emit each\nemitter.emit(createMCP(urn, props), null).get();\nemitter.emit(createMCP(urn, tags), null).get();\nemitter.emit(createMCP(urn, ownership), null).get();\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V2 (DataHubClientV2):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'Dataset dataset = Dataset.builder()\n    .platform("snowflake")\n    .name("my_table")\n    .description("My description")\n    .build();\n\ndataset.addTag("pii")\n       .addTag("sensitive")\n       .addOwner("urn:li:corpuser:john", OwnershipType.TECHNICAL_OWNER);\n\nclient.entities().upsert(dataset);  // Single call, all metadata included\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Changes:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"\u274c No creating multiple aspects separately"),(0,n.yg)("li",{parentName:"ul"},"\u274c No multiple emission calls"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Method chaining for fluent API"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Single upsert emits everything"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Atomic operation")),(0,n.yg)("h3",{id:"example-5-updating-existing-entity"},"Example 5: Updating Existing Entity"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V1 (RestEmitter):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'// 1. Fetch current state from DataHub\nDatasetProperties existingProps = fetchAspect(urn, DatasetProperties.class);\n\n// 2. Modify\nexistingProps.setDescription("Updated description");\n\n// 3. Send back (overwrites entire aspect)\nMetadataChangeProposalWrapper mcp = MetadataChangeProposalWrapper.builder()\n    .entityType("dataset")\n    .entityUrn(urn)\n    .upsert()\n    .aspect(existingProps)\n    .build();\n\nemitter.emit(mcp, null).get();\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"V2 (DataHubClientV2):")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'// Just modify - patch handles incremental update\nDataset dataset = client.entities().get(urn);  // Optional: load existing\ndataset.setDescription("Updated description");\nclient.entities().update(dataset);  // Patch only changes description\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Changes:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"\u2705 Can update without fetching (for patches)"),(0,n.yg)("li",{parentName:"ul"},"\u2705 Patch-based incremental update"),(0,n.yg)("li",{parentName:"ul"},"\u2705 No risk of overwriting other fields"),(0,n.yg)("li",{parentName:"ul"},"\u2705 More efficient payload")),(0,n.yg)("h2",{id:"migration-checklist"},"Migration Checklist"),(0,n.yg)("h3",{id:"1-update-dependencies"},"1. Update Dependencies"),(0,n.yg)("p",null,"Keep existing dependency (backwards compatible):"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-gradle"},"dependencies {\n    implementation 'io.acryl:datahub-client:__version__'\n}\n")),(0,n.yg)("h3",{id:"2-change-imports"},"2. Change Imports"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Replace:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},"import datahub.client.rest.RestEmitter;\nimport datahub.event.MetadataChangeProposalWrapper;\n")),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"With:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},"import datahub.client.v2.DataHubClientV2;\nimport datahub.client.v2.entity.Dataset;\nimport datahub.client.v2.entity.Chart;\n")),(0,n.yg)("h3",{id:"3-replace-restemitter-with-datahubclientv2"},"3. Replace RestEmitter with DataHubClientV2"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Before:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'RestEmitter emitter = RestEmitter.create(b -> b\n    .server("http://localhost:8080")\n    .token("my-token")\n);\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"After:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'DataHubClientV2 client = DataHubClientV2.builder()\n    .server("http://localhost:8080")\n    .token("my-token")\n    .build();\n')),(0,n.yg)("h3",{id:"4-use-entity-builders"},"4. Use Entity Builders"),(0,n.yg)("p",null,"Replace manual MCP/URN construction with entity builders:"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Before:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'DatasetUrn urn = new DatasetUrn(...);\nDatasetProperties props = new DatasetProperties();\nprops.setDescription("...");\nMetadataChangeProposalWrapper mcp = MetadataChangeProposalWrapper.builder()...\nemitter.emit(mcp, null).get();\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"After:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'Dataset dataset = Dataset.builder()\n    .platform("...")\n    .name("...")\n    .description("...")\n    .build();\nclient.entities().upsert(dataset);\n')),(0,n.yg)("h3",{id:"5-use-patch-operations-for-updates"},"5. Use Patch Operations for Updates"),(0,n.yg)("p",null,"Replace fetch-modify-send with patches:"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Before:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},"GlobalTags tags = fetch(...);\ntags.getTags().add(...);\nemit(tags);\n")),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"After:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'dataset.addTag("...");\nclient.entities().update(dataset);\n')),(0,n.yg)("h2",{id:"gradual-migration-strategy"},"Gradual Migration Strategy"),(0,n.yg)("p",null,"You can migrate incrementally - V1 and V2 can coexist:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'// V1 emitter (for unsupported operations)\nRestEmitter emitter = RestEmitter.create(b -> b.server("..."));\n\n// V2 client (for entities)\nDataHubClientV2 client = DataHubClientV2.builder()\n    .server("...")\n    .build();\n\n// Use V2 for supported entities\nDataset dataset = Dataset.builder()...\nclient.entities().upsert(dataset);\n\n// Fall back to V1 for custom MCPs\nMetadataChangeProposalWrapper customMcp = ...;\nemitter.emit(customMcp, null).get();\n')),(0,n.yg)("h2",{id:"common-pitfalls"},"Common Pitfalls"),(0,n.yg)("h3",{id:"1-forgetting-to-call-update-or-upsert"},"1. Forgetting to Call ",(0,n.yg)("inlineCode",{parentName:"h3"},"update()")," or ",(0,n.yg)("inlineCode",{parentName:"h3"},"upsert()")),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Problem:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'dataset.addTag("pii");  // Patch created but not emitted!\n// Missing: client.entities().update(dataset);\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Solution:"),"\nAlways call ",(0,n.yg)("inlineCode",{parentName:"p"},"update()")," or ",(0,n.yg)("inlineCode",{parentName:"p"},"upsert()")," to emit changes."),(0,n.yg)("h3",{id:"2-using-v1-pattern-with-v2-entities"},"2. Using V1 Pattern with V2 Entities"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Problem:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},"Dataset dataset = Dataset.builder()...;\n// Don't do this - use client.entities() instead\nemitter.emit(dataset.toMCPs(), null);  // Wrong!\n")),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Solution:"),"\nUse V2's EntityClient:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},"client.entities().upsert(dataset);\n")),(0,n.yg)("h3",{id:"3-mixing-operation-modes"},"3. Mixing Operation Modes"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Problem:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'// Client in SDK mode\nDataHubClientV2 client = DataHubClientV2.builder()\n    .operationMode(OperationMode.SDK)\n    .build();\n\n// But manually setting system description (conflicts with mode)\ndataset.setSystemDescription("...");  // Inconsistent!\n')),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Solution:"),"\nUse mode-aware methods or match mode to explicit methods:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-java"},'dataset.setDescription("...");  // Mode-aware\n')),(0,n.yg)("h2",{id:"benefits-after-migration"},"Benefits After Migration"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"50-80% less code")," for common operations"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Type safety")," catches errors at compile time"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Better performance")," with patches"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Easier testing")," with mock entities"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Better IDE support")," with autocomplete")),(0,n.yg)("h2",{id:"need-help"},"Need Help?"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"V2 Documentation"),": ",(0,n.yg)("a",{parentName:"li",href:"/docs/metadata-integration/java/docs/sdk-v2/getting-started"},"Getting Started Guide")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Entity Guides"),": ",(0,n.yg)("a",{parentName:"li",href:"/docs/metadata-integration/java/docs/sdk-v2/dataset-entity"},"Dataset"),", ",(0,n.yg)("a",{parentName:"li",href:"/docs/metadata-integration/java/docs/sdk-v2/chart-entity"},"Chart")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Examples"),": ",(0,n.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/metadata-integration/java/examples/src/main/java/io/datahubproject/examples/v2/"},"V2 Examples Directory")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"V1 Documentation"),": ",(0,n.yg)("a",{parentName:"li",href:"/docs/metadata-integration/java/as-a-library"},"Java SDK V1")," (for reference)")),(0,n.yg)("h2",{id:"still-using-v1-features"},"Still Using V1 Features?"),(0,n.yg)("p",null,"Some advanced features are still V1-only:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"KafkaEmitter")," - Use V1 for Kafka-based emission"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"FileEmitter")," - Use V1 for file-based emission"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Custom MCPs")," - Use V1 for entity types not yet in V2"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Direct aspect access")," - Use V1 for fine-grained control")),(0,n.yg)("p",null,"You can use both V1 and V2 in the same application!"))}c.isMDXComponent=!0}}]);