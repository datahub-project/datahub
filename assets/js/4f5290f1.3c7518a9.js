"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[16616],{15680:(e,n,t)=>{t.d(n,{xA:()=>u,yg:()=>m});var a=t(96540);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=a.createContext({}),s=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=s(e.components);return a.createElement(c.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(t),g=o,m=p["".concat(c,".").concat(g)]||p[g]||d[g]||i;return t?a.createElement(m,r(r({ref:n},u),{},{components:t})):a.createElement(m,r({ref:n},u))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=g;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l[p]="string"==typeof e?e:o,r[1]=l;for(var s=2;s<i;s++)r[s]=t[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},82718:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>p});t(96540);var a=t(15680);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function r(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}const l={title:"\u26a1 DataHub Actions Framework",slug:"/datahub-actions",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/datahub-actions/README.md"},c="\u26a1 DataHub Actions Framework",s={unversionedId:"datahub-actions/README",id:"datahub-actions/README",title:"\u26a1 DataHub Actions Framework",description:"Welcome to DataHub Actions! The Actions framework makes responding to realtime changes in your Metadata Graph easy, enabling you to seamlessly integrate DataHub into a broader events-based architecture.",source:"@site/genDocs/datahub-actions/README.md",sourceDirName:"datahub-actions",slug:"/datahub-actions",permalink:"/docs/datahub-actions",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/datahub-actions/README.md",tags:[],version:"current",frontMatter:{title:"\u26a1 DataHub Actions Framework",slug:"/datahub-actions",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/datahub-actions/README.md"}},u={},p=[{value:"Quickstart",id:"quickstart",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuring an Action",id:"configuring-an-action",level:2},{value:"Example: Hello World",id:"example-hello-world",level:3},{value:"Running an Action",id:"running-an-action",level:2},{value:"Running multiple Actions",id:"running-multiple-actions",level:3},{value:"Running in debug mode",id:"running-in-debug-mode",level:3},{value:"Stopping an Action",id:"stopping-an-action",level:3},{value:"Supported Events",id:"supported-events",level:2},{value:"Supported Event Sources",id:"supported-event-sources",level:2},{value:"Supported Actions",id:"supported-actions",level:2},{value:"Development",id:"development",level:2},{value:"Build and Test",id:"build-and-test",level:3},{value:"Developing a Transformer",id:"developing-a-transformer",level:3},{value:"Developing an Action",id:"developing-an-action",level:3},{value:"Contributing",id:"contributing",level:2},{value:"Resources",id:"resources",level:2},{value:"License",id:"license",level:2}],d={toc:p},g="wrapper";function m(e){var{components:n}=e,t=r(e,["components"]);return(0,a.yg)(g,i(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){o(e,n,t[n])}))}return e}({},d,t),{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"-datahub-actions-framework"},"\u26a1 DataHub Actions Framework"),(0,a.yg)("p",null,"Welcome to DataHub Actions! The Actions framework makes responding to realtime changes in your Metadata Graph easy, enabling you to seamlessly integrate ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub"},"DataHub")," into a broader events-based architecture."),(0,a.yg)("p",null,"For a detailed introduction, check out the ",(0,a.yg)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=7iwNxHgqxtg&t=2189s"},"original announcement")," of the DataHub Actions Framework at the DataHub April 2022 Town Hall. For a more in-depth look at use cases and concepts, check out ",(0,a.yg)("a",{parentName:"p",href:"/docs/actions/concepts"},"DataHub Actions Concepts"),"."),(0,a.yg)("h2",{id:"quickstart"},"Quickstart"),(0,a.yg)("p",null,"To get started right away, check out the ",(0,a.yg)("a",{parentName:"p",href:"/docs/actions/quickstart"},"DataHub Actions Quickstart")," Guide."),(0,a.yg)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.yg)("p",null,"The DataHub Actions CLI commands are an extension of the base ",(0,a.yg)("inlineCode",{parentName:"p"},"datahub")," CLI commands. We recommend\nfirst installing the ",(0,a.yg)("inlineCode",{parentName:"p"},"datahub")," CLI:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"python3 -m pip install --upgrade pip wheel setuptools\npython3 -m pip install --upgrade acryl-datahub\ndatahub --version\n")),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"Note that the Actions Framework requires a version of ",(0,a.yg)("inlineCode",{parentName:"p"},"acryl-datahub")," >= v0.8.34")),(0,a.yg)("h2",{id:"installation"},"Installation"),(0,a.yg)("p",null,"Next, simply install the ",(0,a.yg)("inlineCode",{parentName:"p"},"acryl-datahub-actions")," package from PyPi:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"python3 -m pip install --upgrade pip wheel setuptools\npython3 -m pip install --upgrade acryl-datahub-actions\ndatahub actions version\n")),(0,a.yg)("h2",{id:"configuring-an-action"},"Configuring an Action"),(0,a.yg)("p",null,"Actions are configured using a YAML file, much in the same way DataHub ingestion sources are. An action configuration file consists of the following"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Action Pipeline Name (Should be unique and static)"),(0,a.yg)("li",{parentName:"ol"},"Source Configurations"),(0,a.yg)("li",{parentName:"ol"},"Transform + Filter Configurations"),(0,a.yg)("li",{parentName:"ol"},"Action Configuration"),(0,a.yg)("li",{parentName:"ol"},"Pipeline Options (Optional)"),(0,a.yg)("li",{parentName:"ol"},"DataHub API configs (Optional - required for select actions)")),(0,a.yg)("p",null,"With each component being independently pluggable and configurable."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yml"},'# 1. Required: Action Pipeline Name\nname: <action-pipeline-name>\n\n# 2. Required: Event Source - Where to source event from.\nsource:\n  type: <source-type>\n  config:\n    # Event Source specific configs (map)\n\n# 3a. Optional: Filter to run on events (map)\nfilter:\n  event_type: <filtered-event-type>\n  event:\n    # Filter event fields by exact-match\n    <filtered-event-fields>\n\n# 3b. Optional: Custom Transformers to run on events (array)\ntransform:\n  - type: <transformer-type>\n    config:\n      # Transformer-specific configs (map)\n\n# 4. Required: Action - What action to take on events.\naction:\n  type: <action-type>\n  config:\n    # Action-specific configs (map)\n\n# 5. Optional: Additional pipeline options (error handling, etc)\noptions:\n  retry_count: 0 # The number of times to retry an Action with the same event. (If an exception is thrown). 0 by default.\n  failure_mode: "CONTINUE" # What to do when an event fails to be processed. Either \'CONTINUE\' to make progress or \'THROW\' to stop the pipeline. Either way, the failed event will be logged to a failed_events.log file.\n  failed_events_dir: "/tmp/datahub/actions" # The directory in which to write a failed_events.log file that tracks events which fail to be processed. Defaults to "/tmp/logs/datahub/actions".\n\n# 6. Optional: DataHub API configuration\ndatahub:\n  server: "http://localhost:8080" # Location of DataHub API\n  # token: <your-access-token> # Required if Metadata Service Auth enabled\n')),(0,a.yg)("h3",{id:"example-hello-world"},"Example: Hello World"),(0,a.yg)("p",null,'An simple configuration file for a "Hello World" action, which simply prints all events it receives, is'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yml"},'# 1. Action Pipeline Name\nname: "hello_world"\n# 2. Event Source: Where to source event from.\nsource:\n  type: "kafka"\n  config:\n    connection:\n      bootstrap: ${KAFKA_BOOTSTRAP_SERVER:-localhost:9092}\n      schema_registry_url: ${SCHEMA_REGISTRY_URL:-http://localhost:8081}\n# 3. Action: What action to take on events.\naction:\n  type: "hello_world"\n')),(0,a.yg)("p",null,'We can modify this configuration further to filter for specific events, by adding a "filter" block.'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yml"},'# 1. Action Pipeline Name\nname: "hello_world"\n\n# 2. Event Source - Where to source event from.\nsource:\n  type: "kafka"\n  config:\n    connection:\n      bootstrap: ${KAFKA_BOOTSTRAP_SERVER:-localhost:9092}\n      schema_registry_url: ${SCHEMA_REGISTRY_URL:-http://localhost:8081}\n\n# 3. Filter - Filter events that reach the Action\nfilter:\n  event_type: "EntityChangeEvent_v1"\n  event:\n    category: "TAG"\n    operation: "ADD"\n    modifier: "urn:li:tag:pii"\n\n# 4. Action - What action to take on events.\naction:\n  type: "hello_world"\n')),(0,a.yg)("h2",{id:"running-an-action"},"Running an Action"),(0,a.yg)("p",null,"To run a new Action, just use the ",(0,a.yg)("inlineCode",{parentName:"p"},"actions")," CLI command"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"datahub actions -c <config.yml>\n")),(0,a.yg)("p",null,"Once the Action is running, you will see"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"Action Pipeline with name '<action-pipeline-name>' is now running.\n")),(0,a.yg)("h3",{id:"running-multiple-actions"},"Running multiple Actions"),(0,a.yg)("p",null,'You can run multiple actions pipeline within the same command. Simply provide multiple\nconfig files by restating the "-c" command line argument.'),(0,a.yg)("p",null,"For example,"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"datahub actions -c <config-1.yaml> -c <config-2.yaml>\n")),(0,a.yg)("h3",{id:"running-in-debug-mode"},"Running in debug mode"),(0,a.yg)("p",null,"Simply append the ",(0,a.yg)("inlineCode",{parentName:"p"},"--debug")," flag to the CLI to run your action in debug mode."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"datahub actions -c <config.yaml> --debug\n")),(0,a.yg)("h3",{id:"stopping-an-action"},"Stopping an Action"),(0,a.yg)("p",null,"Just issue a Control-C as usual. You should see the Actions Pipeline shut down gracefully, with a small\nsummary of processing results."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"Actions Pipeline with name '<action-pipeline-name' has been stopped.\n")),(0,a.yg)("h2",{id:"supported-events"},"Supported Events"),(0,a.yg)("p",null,"Two event types are currently supported. Read more about them below."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/docs/actions/events/entity-change-event"},"Entity Change Event V1")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/docs/actions/events/metadata-change-log-event"},"Metadata Change Log V1"))),(0,a.yg)("h2",{id:"supported-event-sources"},"Supported Event Sources"),(0,a.yg)("p",null,"Currently, the only event source that is officially supported is ",(0,a.yg)("inlineCode",{parentName:"p"},"kafka"),", which polls for events\nvia a Kafka Consumer."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/docs/actions/sources/kafka-event-source"},"Kafka Event Source"))),(0,a.yg)("h2",{id:"supported-actions"},"Supported Actions"),(0,a.yg)("p",null,"By default, DataHub supports a set of standard actions plugins. These can be found inside the folder\n",(0,a.yg)("inlineCode",{parentName:"p"},"src/datahub-actions/plugins"),"."),(0,a.yg)("p",null,"Some pre-included Actions include"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/docs/actions/actions/hello_world"},"Hello World")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/docs/actions/actions/executor"},"Executor"))),(0,a.yg)("h2",{id:"development"},"Development"),(0,a.yg)("h3",{id:"build-and-test"},"Build and Test"),(0,a.yg)("p",null,"Notice that we support all actions command using a separate ",(0,a.yg)("inlineCode",{parentName:"p"},"datahub-actions")," CLI entry point. Feel free\nto use this during development."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"# Build datahub-actions module\n./gradlew datahub-actions:build\n\n# Drop into virtual env\ncd datahub-actions && source venv/bin/activate\n\n# Start hello world action\ndatahub-actions actions -c ../examples/hello_world.yaml\n\n# Start ingestion executor action\ndatahub-actions actions -c ../examples/executor.yaml\n\n# Start multiple actions\ndatahub-actions actions -c ../examples/executor.yaml -c ../examples/hello_world.yaml\n")),(0,a.yg)("h3",{id:"developing-a-transformer"},"Developing a Transformer"),(0,a.yg)("p",null,"To develop a new Transformer, check out the ",(0,a.yg)("a",{parentName:"p",href:"/docs/actions/guides/developing-a-transformer"},"Developing a Transformer")," guide."),(0,a.yg)("h3",{id:"developing-an-action"},"Developing an Action"),(0,a.yg)("p",null,"To develop a new Action, check out the ",(0,a.yg)("a",{parentName:"p",href:"/docs/actions/guides/developing-an-action"},"Developing an Action")," guide."),(0,a.yg)("h2",{id:"contributing"},"Contributing"),(0,a.yg)("p",null,"Contributing guidelines follow those of the ",(0,a.yg)("a",{parentName:"p",href:"/docs/contributing"},"main DataHub project"),". We are accepting contributions for Actions, Transformers, and general framework improvements (tests, error handling, etc)."),(0,a.yg)("h2",{id:"resources"},"Resources"),(0,a.yg)("p",null,"Check out the ",(0,a.yg)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=7iwNxHgqxtg&t=2189s"},"original announcement")," of the DataHub Actions Framework at the DataHub April 2022 Town Hall."),(0,a.yg)("h2",{id:"license"},"License"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub/blob/master/datahub-actions/LICENSE"},"Apache 2.0")))}m.isMDXComponent=!0}}]);