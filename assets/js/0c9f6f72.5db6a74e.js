"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[9494],{87225:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>m,contentTitle:()=>p,default:()=>u,frontMatter:()=>c,metadata:()=>g,toc:()=>d});a(96540);var t=a(15680),i=a(53720),l=a(5400);function s(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})),e}function o(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},l=Object.keys(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const c={sidebar_position:35,title:"Kafka Connect",slug:"/generated/ingestion/sources/kafka-connect",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/kafka-connect.md"},p="Kafka Connect",g={unversionedId:"docs/generated/ingestion/sources/kafka-connect",id:"docs/generated/ingestion/sources/kafka-connect",title:"Kafka Connect",description:"Integration Details",source:"@site/genDocs/docs/generated/ingestion/sources/kafka-connect.md",sourceDirName:"docs/generated/ingestion/sources",slug:"/generated/ingestion/sources/kafka-connect",permalink:"/docs/generated/ingestion/sources/kafka-connect",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/kafka-connect.md",tags:[],version:"current",sidebarPosition:35,frontMatter:{sidebar_position:35,title:"Kafka Connect",slug:"/generated/ingestion/sources/kafka-connect",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/kafka-connect.md"},sidebar:"overviewSidebar",previous:{title:"Kafka",permalink:"/docs/generated/ingestion/sources/kafka"},next:{title:"LDAP",permalink:"/docs/generated/ingestion/sources/ldap"}},m={},d=[{value:"Integration Details",id:"integration-details",level:2},{value:"Concept Mapping",id:"concept-mapping",level:3},{value:"Current limitations",id:"current-limitations",level:2},{value:"Important Capabilities",id:"important-capabilities",level:3},{value:"CLI based Ingestion",id:"cli-based-ingestion",level:3},{value:"Starter Recipe",id:"starter-recipe",level:3},{value:"Config Details",id:"config-details",level:3},{value:"Advanced Configurations",id:"advanced-configurations",level:2},{value:"Working with Platform Instances",id:"working-with-platform-instances",level:3},{value:"Example - Multiple MySQL Source Connectors each reading from different mysql instance",id:"example---multiple-mysql-source-connectors-each-reading-from-different-mysql-instance",level:4},{value:"Example - Multiple MySQL Source Connectors each reading from difference mysql instance and writing to different kafka cluster",id:"example---multiple-mysql-source-connectors-each-reading-from-difference-mysql-instance-and-writing-to-different-kafka-cluster",level:4},{value:"Example - Multiple BigQuery Sink Connectors each writing to different kafka cluster",id:"example---multiple-bigquery-sink-connectors-each-writing-to-different-kafka-cluster",level:4},{value:"Provided Configurations from External Sources",id:"provided-configurations-from-external-sources",level:3},{value:"Code Coordinates",id:"code-coordinates",level:3}],y={toc:d},f="wrapper";function u(e){var{components:n}=e,a=o(e,["components"]);return(0,t.yg)(f,r(function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(n){s(e,n,a[n])}))}return e}({},y,a),{components:n,mdxType:"MDXLayout"}),(0,t.yg)("h1",{id:"kafka-connect"},"Kafka Connect"),(0,t.yg)("h2",{id:"integration-details"},"Integration Details"),(0,t.yg)("p",null,"This plugin extracts the following:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Source and Sink Connectors in Kafka Connect as Data Pipelines"),(0,t.yg)("li",{parentName:"ul"},"For Source connectors - Data Jobs to represent lineage information between source dataset to Kafka topic per ",(0,t.yg)("inlineCode",{parentName:"li"},"{connector_name}:{source_dataset}")," combination"),(0,t.yg)("li",{parentName:"ul"},"For Sink connectors - Data Jobs to represent lineage information between Kafka topic to destination dataset per ",(0,t.yg)("inlineCode",{parentName:"li"},"{connector_name}:{topic}")," combination")),(0,t.yg)("h3",{id:"concept-mapping"},"Concept Mapping"),(0,t.yg)("p",null,"This ingestion source maps the following Source System Concepts to DataHub Concepts:"),(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:null},"Source Concept"),(0,t.yg)("th",{parentName:"tr",align:null},"DataHub Concept"),(0,t.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("inlineCode",{parentName:"td"},'"kafka-connect"')),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"/docs/generated/metamodel/entities/dataplatform/"},"Data Platform")),(0,t.yg)("td",{parentName:"tr",align:null})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"https://kafka.apache.org/documentation/#connect_connectorsandtasks"},"Connector")),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"/docs/generated/metamodel/entities/dataflow/"},"DataFlow")),(0,t.yg)("td",{parentName:"tr",align:null})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"Kafka Topic"),(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"/docs/generated/metamodel/entities/dataset/"},"Dataset")),(0,t.yg)("td",{parentName:"tr",align:null})))),(0,t.yg)("h2",{id:"current-limitations"},"Current limitations"),(0,t.yg)("p",null,"Works only for"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Source connectors: JDBC, Debezium, Mongo and Generic connectors with user-defined lineage graph"),(0,t.yg)("li",{parentName:"ul"},"Sink connectors: BigQuery, Confluent, S3, Snowflake\n",(0,t.yg)("img",{parentName:"li",src:"https://img.shields.io/badge/support%20status-certified-brightgreen",alt:"Certified"}))),(0,t.yg)("h3",{id:"important-capabilities"},"Important Capabilities"),(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:null},"Capability"),(0,t.yg)("th",{parentName:"tr",align:null},"Status"),(0,t.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"/docs/metadata-ingestion/docs/dev_guides/stateful#stale-entity-removal"},"Detect Deleted Entities")),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default via stateful ingestion.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},(0,t.yg)("a",{parentName:"td",href:"/docs/platform-instances"},"Platform Instance")),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"Schema Metadata"),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default.")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"Table-Level Lineage"),(0,t.yg)("td",{parentName:"tr",align:null},"\u2705"),(0,t.yg)("td",{parentName:"tr",align:null},"Enabled by default.")))),(0,t.yg)("h3",{id:"cli-based-ingestion"},"CLI based Ingestion"),(0,t.yg)("h3",{id:"starter-recipe"},"Starter Recipe"),(0,t.yg)("p",null,"Check out the following recipe to get started with ingestion! See ",(0,t.yg)("a",{parentName:"p",href:"#config-details"},"below")," for full configuration options."),(0,t.yg)("p",null,"For general pointers on writing and running a recipe, see our ",(0,t.yg)("a",{parentName:"p",href:"/docs/metadata-ingestion#recipes"},"main recipe guide"),"."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},'source:\n  type: "kafka-connect"\n  config:\n    # Coordinates\n    connect_uri: "http://localhost:8083"\n\n    # Credentials\n    username: admin\n    password: password\n\n    # Optional\n    # Platform instance mapping to use when constructing URNs.\n    # Use if single instance of platform is referred across connectors.\n    platform_instance_map:\n      mysql: mysql_platform_instance\n\nsink:\n  # sink configs\n\n')),(0,t.yg)("h3",{id:"config-details"},"Config Details"),(0,t.yg)(i.A,{mdxType:"Tabs"},(0,t.yg)(l.A,{value:"options",label:"Options",default:!0,mdxType:"TabItem"},(0,t.yg)("p",null,"Note that a ",(0,t.yg)("inlineCode",{parentName:"p"},".")," is used to denote nested fields in the YAML recipe."),(0,t.yg)("div",{className:"config-table"},(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:"left"},"Field"),(0,t.yg)("th",{parentName:"tr",align:"left"},"Description"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"cluster_name"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Cluster to ingest from. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"connect-cluster")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"connect_to_platform_map"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Platform instance mapping when multiple instances for a platform is available. Entry for a platform should be in either ",(0,t.yg)("inlineCode",{parentName:"td"},"platform_instance_map")," or ",(0,t.yg)("inlineCode",{parentName:"td"},"connect_to_platform_map"),". e.g.",(0,t.yg)("inlineCode",{parentName:"td"},'connect_to_platform_map: { "postgres-connector-finance-db": "postgres": "core_finance_instance" }')," ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"connect_uri"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"URI to connect to. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"http://localhost:8083/")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"convert_lineage_urns_to_lowercase"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to convert the urns of ingested lineage dataset to lowercase ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"password"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Kafka Connect password. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"platform_instance"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"The instance of the platform that all assets produced by this recipe belong to. This should be unique within the platform. See ",(0,t.yg)("a",{parentName:"td",href:"https://docs.datahub.com/docs/platform-instances/"},"https://docs.datahub.com/docs/platform-instances/")," for more details. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"platform_instance_map"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Platform instance mapping to use when constructing URNs. e.g.",(0,t.yg)("inlineCode",{parentName:"td"},'platform_instance_map: { "hive": "warehouse" }')," ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"username"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of string, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Kafka Connect username. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"env"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"The environment that all assets produced by this connector belong to ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"PROD")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"connector_patterns"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"AllowDenyPattern"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"A class to store allow deny regexes")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"connector_patterns."),(0,t.yg)("span",{className:"path-main"},"ignoreCase"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of boolean, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether to ignore case sensitivity during pattern matching. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"connector_patterns."),(0,t.yg)("span",{className:"path-main"},"allow"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"array"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"List of regex patterns to include in ingestion ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"[","'",".","*","'","]")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"connector_patterns.allow."),(0,t.yg)("span",{className:"path-main"},"string"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"connector_patterns."),(0,t.yg)("span",{className:"path-main"},"deny"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"array"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"List of regex patterns to exclude from ingestion. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"[","]")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"connector_patterns.deny."),(0,t.yg)("span",{className:"path-main"},"string"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"generic_connectors"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"array"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Provide lineage graph for sources connectors other than Confluent JDBC Source Connector, Debezium Source Connector, and Mongo Source Connector ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"[","]")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"generic_connectors."),(0,t.yg)("span",{className:"path-main"},"GenericConnectorConfig"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"GenericConnectorConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"generic_connectors.GenericConnectorConfig."),(0,t.yg)("span",{className:"path-main"},"connector_name"),"\xa0",(0,t.yg)("abbr",{title:"Required if GenericConnectorConfig is set"},"\u2753"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"generic_connectors.GenericConnectorConfig."),(0,t.yg)("span",{className:"path-main"},"source_dataset"),"\xa0",(0,t.yg)("abbr",{title:"Required if GenericConnectorConfig is set"},"\u2753"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"generic_connectors.GenericConnectorConfig."),(0,t.yg)("span",{className:"path-main"},"source_platform"),"\xa0",(0,t.yg)("abbr",{title:"Required if GenericConnectorConfig is set"},"\u2753"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"provided_configs"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of array, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Provided Configurations ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"provided_configs."),(0,t.yg)("span",{className:"path-main"},"ProvidedConfig"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"ProvidedConfig"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"provided_configs.ProvidedConfig."),(0,t.yg)("span",{className:"path-main"},"path_key"),"\xa0",(0,t.yg)("abbr",{title:"Required if ProvidedConfig is set"},"\u2753"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"provided_configs.ProvidedConfig."),(0,t.yg)("span",{className:"path-main"},"provider"),"\xa0",(0,t.yg)("abbr",{title:"Required if ProvidedConfig is set"},"\u2753"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"provided_configs.ProvidedConfig."),(0,t.yg)("span",{className:"path-main"},"value"),"\xa0",(0,t.yg)("abbr",{title:"Required if ProvidedConfig is set"},"\u2753"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"string"))),(0,t.yg)("td",{parentName:"tr",align:"left"})),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-main"},"stateful_ingestion"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"One of StatefulStaleMetadataRemovalConfig, null"))),(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"default-line "},"Default: ",(0,t.yg)("span",{className:"default-value"},"None")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"stateful_ingestion."),(0,t.yg)("span",{className:"path-main"},"enabled"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Whether or not to enable stateful ingest. Default: True if a pipeline_name is set and either a datahub-rest sink or ",(0,t.yg)("inlineCode",{parentName:"td"},"datahub_api")," is specified, otherwise False ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"False")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"stateful_ingestion."),(0,t.yg)("span",{className:"path-main"},"fail_safe_threshold"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"number"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Prevents large amount of soft deletes & the state from committing from accidental changes to the source configuration if the relative change percent in entities compared to the previous state is above the 'fail_safe_threshold'. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"75.0")))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},(0,t.yg)("div",{className:"path-line"},(0,t.yg)("span",{className:"path-prefix"},"stateful_ingestion."),(0,t.yg)("span",{className:"path-main"},"remove_stale_metadata"))," ",(0,t.yg)("div",{className:"type-name-line"},(0,t.yg)("span",{className:"type-name"},"boolean"))),(0,t.yg)("td",{parentName:"tr",align:"left"},"Soft-deletes the entities present in the last successful run but missing in the current run with stateful_ingestion enabled. ",(0,t.yg)("div",{className:"default-line default-line-with-docs"},"Default: ",(0,t.yg)("span",{className:"default-value"},"True")))))))),(0,t.yg)(l.A,{value:"schema",label:"Schema",mdxType:"TabItem"},(0,t.yg)("p",null,"The ",(0,t.yg)("a",{parentName:"p",href:"https://json-schema.org/"},"JSONSchema")," for this configuration is inlined below."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-javascript"},'{\n  "$defs": {\n    "AllowDenyPattern": {\n      "additionalProperties": false,\n      "description": "A class to store allow deny regexes",\n      "properties": {\n        "allow": {\n          "default": [\n            ".*"\n          ],\n          "description": "List of regex patterns to include in ingestion",\n          "items": {\n            "type": "string"\n          },\n          "title": "Allow",\n          "type": "array"\n        },\n        "deny": {\n          "default": [],\n          "description": "List of regex patterns to exclude from ingestion.",\n          "items": {\n            "type": "string"\n          },\n          "title": "Deny",\n          "type": "array"\n        },\n        "ignoreCase": {\n          "anyOf": [\n            {\n              "type": "boolean"\n            },\n            {\n              "type": "null"\n            }\n          ],\n          "default": true,\n          "description": "Whether to ignore case sensitivity during pattern matching.",\n          "title": "Ignorecase"\n        }\n      },\n      "title": "AllowDenyPattern",\n      "type": "object"\n    },\n    "GenericConnectorConfig": {\n      "additionalProperties": false,\n      "properties": {\n        "connector_name": {\n          "title": "Connector Name",\n          "type": "string"\n        },\n        "source_dataset": {\n          "title": "Source Dataset",\n          "type": "string"\n        },\n        "source_platform": {\n          "title": "Source Platform",\n          "type": "string"\n        }\n      },\n      "required": [\n        "connector_name",\n        "source_dataset",\n        "source_platform"\n      ],\n      "title": "GenericConnectorConfig",\n      "type": "object"\n    },\n    "ProvidedConfig": {\n      "additionalProperties": false,\n      "properties": {\n        "provider": {\n          "title": "Provider",\n          "type": "string"\n        },\n        "path_key": {\n          "title": "Path Key",\n          "type": "string"\n        },\n        "value": {\n          "title": "Value",\n          "type": "string"\n        }\n      },\n      "required": [\n        "provider",\n        "path_key",\n        "value"\n      ],\n      "title": "ProvidedConfig",\n      "type": "object"\n    },\n    "StatefulStaleMetadataRemovalConfig": {\n      "additionalProperties": false,\n      "description": "Base specialized config for Stateful Ingestion with stale metadata removal capability.",\n      "properties": {\n        "enabled": {\n          "default": false,\n          "description": "Whether or not to enable stateful ingest. Default: True if a pipeline_name is set and either a datahub-rest sink or `datahub_api` is specified, otherwise False",\n          "title": "Enabled",\n          "type": "boolean"\n        },\n        "remove_stale_metadata": {\n          "default": true,\n          "description": "Soft-deletes the entities present in the last successful run but missing in the current run with stateful_ingestion enabled.",\n          "title": "Remove Stale Metadata",\n          "type": "boolean"\n        },\n        "fail_safe_threshold": {\n          "default": 75.0,\n          "description": "Prevents large amount of soft deletes & the state from committing from accidental changes to the source configuration if the relative change percent in entities compared to the previous state is above the \'fail_safe_threshold\'.",\n          "maximum": 100.0,\n          "minimum": 0.0,\n          "title": "Fail Safe Threshold",\n          "type": "number"\n        }\n      },\n      "title": "StatefulStaleMetadataRemovalConfig",\n      "type": "object"\n    }\n  },\n  "additionalProperties": false,\n  "properties": {\n    "stateful_ingestion": {\n      "anyOf": [\n        {\n          "$ref": "#/$defs/StatefulStaleMetadataRemovalConfig"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null\n    },\n    "env": {\n      "default": "PROD",\n      "description": "The environment that all assets produced by this connector belong to",\n      "title": "Env",\n      "type": "string"\n    },\n    "platform_instance_map": {\n      "anyOf": [\n        {\n          "additionalProperties": {\n            "type": "string"\n          },\n          "type": "object"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "Platform instance mapping to use when constructing URNs. e.g.`platform_instance_map: { \\"hive\\": \\"warehouse\\" }`",\n      "title": "Platform Instance Map"\n    },\n    "platform_instance": {\n      "anyOf": [\n        {\n          "type": "string"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "The instance of the platform that all assets produced by this recipe belong to. This should be unique within the platform. See https://docs.datahub.com/docs/platform-instances/ for more details.",\n      "title": "Platform Instance"\n    },\n    "connect_uri": {\n      "default": "http://localhost:8083/",\n      "description": "URI to connect to.",\n      "title": "Connect Uri",\n      "type": "string"\n    },\n    "username": {\n      "anyOf": [\n        {\n          "type": "string"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "Kafka Connect username.",\n      "title": "Username"\n    },\n    "password": {\n      "anyOf": [\n        {\n          "type": "string"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "Kafka Connect password.",\n      "title": "Password"\n    },\n    "cluster_name": {\n      "anyOf": [\n        {\n          "type": "string"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": "connect-cluster",\n      "description": "Cluster to ingest from.",\n      "title": "Cluster Name"\n    },\n    "convert_lineage_urns_to_lowercase": {\n      "default": false,\n      "description": "Whether to convert the urns of ingested lineage dataset to lowercase",\n      "title": "Convert Lineage Urns To Lowercase",\n      "type": "boolean"\n    },\n    "connector_patterns": {\n      "$ref": "#/$defs/AllowDenyPattern",\n      "default": {\n        "allow": [\n          ".*"\n        ],\n        "deny": [],\n        "ignoreCase": true\n      },\n      "description": "regex patterns for connectors to filter for ingestion."\n    },\n    "provided_configs": {\n      "anyOf": [\n        {\n          "items": {\n            "$ref": "#/$defs/ProvidedConfig"\n          },\n          "type": "array"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "Provided Configurations",\n      "title": "Provided Configs"\n    },\n    "connect_to_platform_map": {\n      "anyOf": [\n        {\n          "additionalProperties": {\n            "additionalProperties": {\n              "type": "string"\n            },\n            "type": "object"\n          },\n          "type": "object"\n        },\n        {\n          "type": "null"\n        }\n      ],\n      "default": null,\n      "description": "Platform instance mapping when multiple instances for a platform is available. Entry for a platform should be in either `platform_instance_map` or `connect_to_platform_map`. e.g.`connect_to_platform_map: { \\"postgres-connector-finance-db\\": \\"postgres\\": \\"core_finance_instance\\" }`",\n      "title": "Connect To Platform Map"\n    },\n    "generic_connectors": {\n      "default": [],\n      "description": "Provide lineage graph for sources connectors other than Confluent JDBC Source Connector, Debezium Source Connector, and Mongo Source Connector",\n      "items": {\n        "$ref": "#/$defs/GenericConnectorConfig"\n      },\n      "title": "Generic Connectors",\n      "type": "array"\n    }\n  },\n  "title": "KafkaConnectSourceConfig",\n  "type": "object"\n}\n')))),(0,t.yg)("h2",{id:"advanced-configurations"},"Advanced Configurations"),(0,t.yg)("h3",{id:"working-with-platform-instances"},"Working with Platform Instances"),(0,t.yg)("p",null,"If you've multiple instances of kafka OR source/sink systems that are referred in your ",(0,t.yg)("inlineCode",{parentName:"p"},"kafka-connect")," setup, you'd need to configure platform instance for these systems in ",(0,t.yg)("inlineCode",{parentName:"p"},"kafka-connect")," recipe to generate correct lineage edges. You must have already set ",(0,t.yg)("inlineCode",{parentName:"p"},"platform_instance")," in recipes of original source/sink systems. Refer the document ",(0,t.yg)("a",{parentName:"p",href:"/docs/platform-instances"},"Working with Platform Instances")," to understand more about this."),(0,t.yg)("p",null,"There are two options available to declare source/sink system's ",(0,t.yg)("inlineCode",{parentName:"p"},"platform_instance")," in ",(0,t.yg)("inlineCode",{parentName:"p"},"kafka-connect")," recipe. If single instance of platform is used across all ",(0,t.yg)("inlineCode",{parentName:"p"},"kafka-connect")," connectors, you can use ",(0,t.yg)("inlineCode",{parentName:"p"},"platform_instance_map")," to specify platform_instance to use for a platform when constructing URNs for lineage."),(0,t.yg)("p",null,"Example:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yml"},"# Map of platform name to platform instance\nplatform_instance_map:\n  snowflake: snowflake_platform_instance\n  mysql: mysql_platform_instance\n")),(0,t.yg)("p",null,"If multiple instances of platform are used across ",(0,t.yg)("inlineCode",{parentName:"p"},"kafka-connect")," connectors, you'd need to specify platform_instance to use for platform for every connector."),(0,t.yg)("h4",{id:"example---multiple-mysql-source-connectors-each-reading-from-different-mysql-instance"},"Example - Multiple MySQL Source Connectors each reading from different mysql instance"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yml"},"# Map of platform name to platform instance per connector\nconnect_to_platform_map:\n  mysql_connector1:\n    mysql: mysql_instance1\n\n  mysql_connector2:\n    mysql: mysql_instance2\n")),(0,t.yg)("p",null,"Here mysql_connector1 and mysql_connector2 are names of MySQL source connectors as defined in ",(0,t.yg)("inlineCode",{parentName:"p"},"kafka-connect")," connector config."),(0,t.yg)("h4",{id:"example---multiple-mysql-source-connectors-each-reading-from-difference-mysql-instance-and-writing-to-different-kafka-cluster"},"Example - Multiple MySQL Source Connectors each reading from difference mysql instance and writing to different kafka cluster"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yml"},"connect_to_platform_map:\n  mysql_connector1:\n    mysql: mysql_instance1\n    kafka: kafka_instance1\n\n  mysql_connector2:\n    mysql: mysql_instance2\n    kafka: kafka_instance2\n")),(0,t.yg)("p",null,"You can also use combination of ",(0,t.yg)("inlineCode",{parentName:"p"},"platform_instance_map")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"connect_to_platform_map")," in your recipe. Note that, the platform_instance specified for the connector in ",(0,t.yg)("inlineCode",{parentName:"p"},"connect_to_platform_map")," will always take higher precedance even if platform_instance for same platform is set in ",(0,t.yg)("inlineCode",{parentName:"p"},"platform_instance_map"),"."),(0,t.yg)("p",null,"If you do not use ",(0,t.yg)("inlineCode",{parentName:"p"},"platform_instance")," in original source/sink recipes, you do not need to specify them in above configurations."),(0,t.yg)("p",null,"Note that, you do not need to specify platform_instance for BigQuery."),(0,t.yg)("h4",{id:"example---multiple-bigquery-sink-connectors-each-writing-to-different-kafka-cluster"},"Example - Multiple BigQuery Sink Connectors each writing to different kafka cluster"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yml"},"connect_to_platform_map:\n  bigquery_connector1:\n    kafka: kafka_instance1\n\n  bigquery_connector2:\n    kafka: kafka_instance2\n")),(0,t.yg)("h3",{id:"provided-configurations-from-external-sources"},"Provided Configurations from External Sources"),(0,t.yg)("p",null,"Kafka Connect supports pluggable configuration providers which can load configuration data from external sources at runtime. These values are not available to DataHub ingestion source through Kafka Connect APIs. If you are using such provided configurations to specify connection url (database, etc) in Kafka Connect connector configuration then you will need also add these in ",(0,t.yg)("inlineCode",{parentName:"p"},"provided_configs")," section in recipe for DataHub to generate correct lineage."),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-yml"},"# Optional mapping of provider configurations if using\nprovided_configs:\n  - provider: env\n    path_key: MYSQL_CONNECTION_URL\n    value: jdbc:mysql://test_mysql:3306/librarydb\n")),(0,t.yg)("h3",{id:"code-coordinates"},"Code Coordinates"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Class Name: ",(0,t.yg)("inlineCode",{parentName:"li"},"datahub.ingestion.source.kafka_connect.kafka_connect.KafkaConnectSource")),(0,t.yg)("li",{parentName:"ul"},"Browse on ",(0,t.yg)("a",{parentName:"li",href:"https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/source/kafka_connect/kafka_connect.py"},"GitHub"))),(0,t.yg)("h2",null,"Questions"),(0,t.yg)("p",null,"If you've got any questions on configuring ingestion for Kafka Connect, feel free to ping us on ",(0,t.yg)("a",{parentName:"p",href:"https://datahub.com/slack"},"our Slack"),"."))}u.isMDXComponent=!0}}]);